import{S as t,i as s,s as e,F as a,r as n,a1 as o,J as r,M as c,q as l,a2 as i,a3 as $,G as u,f as m,L as p,m as d,t as f,g,O as h,h as x,a4 as v,a5 as w,a6 as y,N as b,a7 as k,H as q,a8 as j,a9 as H,aa as W,ab as E}from"./vendor.46162738.js";import{u as P,C as z,o as A}from"./index.2eabfaf9.js";import{P as C}from"./page-container.e9f373a8.js";import{F,a as _}from"./form-item.a67decc1.js";function G(t){let s,e,i,$;return{c(){s=a("img"),n(s,"class","image-background absolute inset-0 svelte-a0kiaq"),n(s,"alt",""),o(s.src,e="https://source.unsplash.com/random/"+t[0].clientWidth+"x"+t[0].clientHeight)||n(s,"src",e)},m(e,a){r(e,s,a),i||($=c(s,"load",t[3]),i=!0)},p(t,a){1&a&&!o(s.src,e="https://source.unsplash.com/random/"+t[0].clientWidth+"x"+t[0].clientHeight)&&n(s,"src",e)},d(t){t&&l(s),i=!1,$()}}}function I(t){let s,e,o;return{c(){s=a("div"),n(s,"class","absolute inset-0 color-background svelte-a0kiaq")},m(t,e){r(t,s,e),o=!0},i(t){o||(i((()=>{e||(e=$(s,w,{},!0)),e.run(1)})),o=!0)},o(t){e||(e=$(s,w,{},!1)),e.run(0),o=!1},d(t){t&&l(s),t&&e&&e.end()}}}function J(t){let s,e,a;function n(s){t[8](s)}let o={};return void 0!==t[2].email&&(o.value=t[2].email),s=new j({props:o}),k.push((()=>H(s,"value",n))),{c(){m(s.$$.fragment)},m(t,e){d(s,t,e),a=!0},p(t,a){const n={};!e&&4&a&&(e=!0,n.value=t[2].email,W((()=>e=!1))),s.$set(n)},i(t){a||(f(s.$$.fragment,t),a=!0)},o(t){g(s.$$.fragment,t),a=!1},d(t){x(s,t)}}}function L(t){let s,e,a;function n(s){t[9](s)}let o={};return void 0!==t[2].password&&(o.value=t[2].password),s=new E({props:o}),k.push((()=>H(s,"value",n))),{c(){m(s.$$.fragment)},m(t,e){d(s,t,e),a=!0},p(t,a){const n={};!e&&4&a&&(e=!0,n.value=t[2].password,W((()=>e=!1))),s.$set(n)},i(t){a||(f(s.$$.fragment,t),a=!0)},o(t){g(s.$$.fragment,t),a=!1},d(t){x(s,t)}}}function M(t){let s,e,a,n;return s=new _({props:{label:"邮箱",$$slots:{default:[J]},$$scope:{ctx:t}}}),a=new _({props:{label:"密码",$$slots:{default:[L]},$$scope:{ctx:t}}}),{c(){m(s.$$.fragment),e=u(),m(a.$$.fragment)},m(t,o){d(s,t,o),r(t,e,o),d(a,t,o),n=!0},p(t,e){const n={};4100&e&&(n.$$scope={dirty:e,ctx:t}),s.$set(n);const o={};4100&e&&(o.$$scope={dirty:e,ctx:t}),a.$set(o)},i(t){n||(f(s.$$.fragment,t),f(a.$$.fragment,t),n=!0)},o(t){g(s.$$.fragment,t),g(a.$$.fragment,t),n=!1},d(t){x(s,t),t&&l(e),x(a,t)}}}function N(t){let s;return{c(){s=q("注册")},m(t,e){r(t,s,e)},d(t){t&&l(s)}}}function O(t){let s;return{c(){s=q("登录")},m(t,e){r(t,s,e)},d(t){t&&l(s)}}}function S(t){let s,e,o,c,i,$,h,v,w,b,k,q;return $=new F({props:{layout:"float",$$slots:{default:[M]},$$scope:{ctx:t}}}),w=new y({props:{kind:"secondary",size:"small",$$slots:{default:[N]},$$scope:{ctx:t}}}),w.$on("click",t[4]),k=new y({props:{kind:"primary",size:"small",$$slots:{default:[O]},$$scope:{ctx:t}}}),k.$on("click",t[5]),{c(){s=a("div"),e=a("div"),o=a("div"),o.textContent="H5 Editor",c=u(),i=a("div"),m($.$$.fragment),h=u(),v=a("div"),m(w.$$.fragment),b=u(),m(k.$$.fragment),n(o,"class","welcome text-center svelte-a0kiaq"),n(i,"class","form p-5"),n(v,"class","flex justify-center pt-10 space-x-10"),n(e,"class","form-container svelte-a0kiaq"),n(s,"class","login-container absolute inset-0 flex items-center justify-end")},m(t,a){r(t,s,a),p(s,e),p(e,o),p(e,c),p(e,i),d($,i,null),p(e,h),p(e,v),d(w,v,null),p(v,b),d(k,v,null),q=!0},p(t,s){const e={};4100&s&&(e.$$scope={dirty:s,ctx:t}),$.$set(e);const a={};4096&s&&(a.$$scope={dirty:s,ctx:t}),w.$set(a);const n={};4096&s&&(n.$$scope={dirty:s,ctx:t}),k.$set(n)},i(t){q||(f($.$$.fragment,t),f(w.$$.fragment,t),f(k.$$.fragment,t),q=!0)},o(t){g($.$$.fragment,t),g(w.$$.fragment,t),g(k.$$.fragment,t),q=!1},d(t){t&&l(s),x($),x(w),x(k)}}}function U(t){let s,e,o,c,i,$=t[0]&&G(t),v=!t[1]&&I();return c=new C({props:{title:"登录",layout:"default",header:!1,$$slots:{default:[S]},$$scope:{ctx:t}}}),{c(){s=a("div"),$&&$.c(),e=u(),v&&v.c(),o=u(),m(c.$$.fragment),n(s,"class","absolute inset-0")},m(a,n){r(a,s,n),$&&$.m(s,null),p(s,e),v&&v.m(s,null),t[7](s),r(a,o,n),d(c,a,n),i=!0},p(t,[a]){t[0]?$?$.p(t,a):($=G(t),$.c(),$.m(s,e)):$&&($.d(1),$=null),t[1]?v&&(b(),g(v,1,1,(()=>{v=null})),h()):v?2&a&&f(v,1):(v=I(),v.c(),f(v,1),v.m(s,null));const n={};4100&a&&(n.$$scope={dirty:a,ctx:t}),c.$set(n)},i(t){i||(f(v),f(c.$$.fragment,t),i=!0)},o(t){g(v),g(c.$$.fragment,t),i=!1},d(e){e&&l(s),$&&$.d(),v&&v.d(),t[7](null),e&&l(o),x(c,e)}}}function B(t,s,e){let a,{router:n}=s,o=!1,r={email:"2037630@163.com",password:"password123456"};const{userid:c,dispatch:l}=P((t=>t.user));return v((()=>{})),t.$$set=t=>{"router"in t&&e(6,n=t.router)},[a,o,r,function(){e(1,o=!0)},function(){const t=z.get(),{email:s,password:e}=r;t.auth({persistence:"local"}).signUpWithEmailAndPassword(s,e).then((()=>{A({type:"success",message:"验证邮件已发送"})})).catch((()=>{A({type:"error",message:"注册失败,请检查邮箱地址或是否已注册"})}))},function(){const t=z.get(),{email:s,password:e}=r;t.auth({persistence:"local"}).signInWithEmailAndPassword(s,e).then((()=>{A({type:"success",message:"登录成功"}),l("login","admin"),n.push("/editor")})).catch((()=>{A({type:"error",message:"登录失败"})}))},n,function(t){k[t?"unshift":"push"]((()=>{a=t,e(0,a)}))},function(s){t.$$.not_equal(r.email,s)&&(r.email=s,e(2,r))},function(s){t.$$.not_equal(r.password,s)&&(r.password=s,e(2,r))}]}class D extends t{constructor(t){super(),s(this,t,B,U,e,{router:6})}}export{D as default};
