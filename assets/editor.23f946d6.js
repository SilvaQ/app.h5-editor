import{S as e,i as t,h as n,al as l,X as s,O as o,r as i,M as a,P as c,a3 as r,x as u,q as d,y as $,z as f,Q as p,ai as m,aj as g,ak as h,C as v,t as b,k as x,ar as w,D as y,as as k,at as M,J as S,j as q,m as A,n as z,l as C,au as O,L as N,N as H,U as L,V as R,W as j,av as B,aa as F,ap as V,aq as Y,ad as E,aw as I,ax as P,_ as T,ay as _,az as W,af as J,ag as X,aA as Z,aB as D,ae as U,an as G,aC as K,aD as Q,a7 as ee,aE as te,aF as ne,aG as le,aH as se,aI as oe,ac as ie,p as ae}from"./vendor.6ce12853.js";import{P as ce}from"./page-container.ffd52571.js";import{C as re,u as ue,e as de,f as $e,h as fe,s as pe,i as me,j as ge,c as he,r as ve,k as be,d as xe,t as we,l as ye,o as ke,W as Me}from"./index.a80689dd.js";import{F as Se,a as qe}from"./form-item.eec47ff0.js";function Ae(e){let t,n;return{c(){t=i("title"),n=a(e[2])},m(e,l){o(e,t,l),c(t,n)},p(e,t){4&t&&r(n,e[2])},d(e){e&&u(t)}}}function ze(e){let t,n,a,r,y;const k=e[11].default,M=l(k,e,e[10],null),S=M||function(e){let t,n=e[2]&&Ae(e);return{c(){n&&n.c(),t=s()},m(e,l){n&&n.m(e,l),o(e,t,l)},p(e,l){e[2]?n?n.p(e,l):(n=Ae(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}(e);let q=[{"data-carbon-icon":"SettingsAdjust24"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{width:"24"},{height:"24"},{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},{style:e[3]},{id:e[1]},e[4]],A={};for(let l=0;l<q.length;l+=1)A=d(A,q[l]);return{c(){t=i("svg"),n=i("path"),S&&S.c(),$(n,"d","M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30V8zM21 12c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3S22.7 12 21 12zM2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2V24zM11 20c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3S9.3 20 11 20z"),f(t,A)},m(l,s){o(l,t,s),c(t,n),S&&S.m(t,null),a=!0,r||(y=[p(t,"click",e[12]),p(t,"mouseover",e[13]),p(t,"mouseenter",e[14]),p(t,"mouseleave",e[15]),p(t,"keyup",e[16]),p(t,"keydown",e[17])],r=!0)},p(e,[n]){M?M.p&&(!a||1024&n)&&m(M,k,e,e[10],a?h(k,e[10],n,null):g(e[10]),null):S&&S.p&&(!a||4&n)&&S.p(e,a?n:-1),f(t,A=v(q,[{"data-carbon-icon":"SettingsAdjust24"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{width:"24"},{height:"24"},(!a||1&n)&&{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},(!a||8&n)&&{style:e[3]},(!a||2&n)&&{id:e[1]},16&n&&e[4]]))},i(e){a||(b(S,e),a=!0)},o(e){x(S,e),a=!1},d(e){e&&u(t),S&&S.d(e),r=!1,w(y)}}}function Ce(e,t,n){let l,s,o,i,{$$slots:a={},$$scope:c}=t,{class:r}=t,{id:u}=t,{tabindex:$}=t,{focusable:f=!1}=t,{title:p}=t,{style:m}=t;return e.$$set=e=>{n(18,t=d(d({},t),y(e))),"class"in e&&n(0,r=e.class),"id"in e&&n(1,u=e.id),"tabindex"in e&&n(5,$=e.tabindex),"focusable"in e&&n(6,f=e.focusable),"title"in e&&n(2,p=e.title),"style"in e&&n(3,m=e.style),"$$scope"in e&&n(10,c=e.$$scope)},e.$$.update=()=>{n(9,l=t["aria-label"]),n(8,s=t["aria-labelledby"]),772&e.$$.dirty&&n(7,o=l||s||p),992&e.$$.dirty&&n(4,i={"aria-label":l,"aria-labelledby":s,"aria-hidden":!o||void 0,role:o?"img":void 0,focusable:"0"===$||f,tabindex:$})},t=y(t),[r,u,p,m,i,$,f,o,s,l,c,a,function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)}]}var Oe=class extends e{constructor(e){super(),t(this,e,Ce,ze,n,{class:0,id:1,tabindex:5,focusable:6,title:2,style:3})}};function Ne(e){let t,n;return{c(){t=i("title"),n=a(e[2])},m(e,l){o(e,t,l),c(t,n)},p(e,t){4&t&&r(n,e[2])},d(e){e&&u(t)}}}function He(e){let t,n,a,r,y,k;const M=e[11].default,S=l(M,e,e[10],null),q=S||function(e){let t,n=e[2]&&Ne(e);return{c(){n&&n.c(),t=s()},m(e,l){n&&n.m(e,l),o(e,t,l)},p(e,l){e[2]?n?n.p(e,l):(n=Ne(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}(e);let A=[{"data-carbon-icon":"MediaLibrary24"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{width:"24"},{height:"24"},{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},{style:e[3]},{id:e[1]},e[4]],z={};for(let l=0;l<A.length;l+=1)z=d(z,A[l]);return{c(){t=i("svg"),n=i("path"),a=i("path"),q&&q.c(),$(n,"d","M13 15L13 23 13 23 20 19 13 15z"),$(a,"d","M26 28H6a2.0021 2.0021 0 01-2-2V12a2.0021 2.0021 0 012-2H26a2.0021 2.0021 0 012 2V26A2.0021 2.0021 0 0126 28zM6 12V26H26V12zM6 6H26V8H6zM8 2H24V4H8z"),f(t,z)},m(l,s){o(l,t,s),c(t,n),c(t,a),q&&q.m(t,null),r=!0,y||(k=[p(t,"click",e[12]),p(t,"mouseover",e[13]),p(t,"mouseenter",e[14]),p(t,"mouseleave",e[15]),p(t,"keyup",e[16]),p(t,"keydown",e[17])],y=!0)},p(e,[n]){S?S.p&&(!r||1024&n)&&m(S,M,e,e[10],r?h(M,e[10],n,null):g(e[10]),null):q&&q.p&&(!r||4&n)&&q.p(e,r?n:-1),f(t,z=v(A,[{"data-carbon-icon":"MediaLibrary24"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{width:"24"},{height:"24"},(!r||1&n)&&{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},(!r||8&n)&&{style:e[3]},(!r||2&n)&&{id:e[1]},16&n&&e[4]]))},i(e){r||(b(q,e),r=!0)},o(e){x(q,e),r=!1},d(e){e&&u(t),q&&q.d(e),y=!1,w(k)}}}function Le(e,t,n){let l,s,o,i,{$$slots:a={},$$scope:c}=t,{class:r}=t,{id:u}=t,{tabindex:$}=t,{focusable:f=!1}=t,{title:p}=t,{style:m}=t;return e.$$set=e=>{n(18,t=d(d({},t),y(e))),"class"in e&&n(0,r=e.class),"id"in e&&n(1,u=e.id),"tabindex"in e&&n(5,$=e.tabindex),"focusable"in e&&n(6,f=e.focusable),"title"in e&&n(2,p=e.title),"style"in e&&n(3,m=e.style),"$$scope"in e&&n(10,c=e.$$scope)},e.$$.update=()=>{n(9,l=t["aria-label"]),n(8,s=t["aria-labelledby"]),772&e.$$.dirty&&n(7,o=l||s||p),992&e.$$.dirty&&n(4,i={"aria-label":l,"aria-labelledby":s,"aria-hidden":!o||void 0,role:o?"img":void 0,focusable:"0"===$||f,tabindex:$})},t=y(t),[r,u,p,m,i,$,f,o,s,l,c,a,function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)}]}var Re=class extends e{constructor(e){super(),t(this,e,Le,He,n,{class:0,id:1,tabindex:5,focusable:6,title:2,style:3})}};function je(e){let t,n;return{c(){t=i("title"),n=a(e[2])},m(e,l){o(e,t,l),c(t,n)},p(e,t){4&t&&r(n,e[2])},d(e){e&&u(t)}}}function Be(e){let t,n,a,r,y,k;const M=e[11].default,S=l(M,e,e[10],null),q=S||function(e){let t,n=e[2]&&je(e);return{c(){n&&n.c(),t=s()},m(e,l){n&&n.m(e,l),o(e,t,l)},p(e,l){e[2]?n?n.p(e,l):(n=je(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}(e);let A=[{"data-carbon-icon":"TextScale20"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{width:"20"},{height:"20"},{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},{style:e[3]},{id:e[1]},e[4]],z={};for(let l=0;l<A.length;l+=1)z=d(z,A[l]);return{c(){t=i("svg"),n=i("path"),a=i("path"),q&&q.c(),$(n,"d","M30 5L30 8 22 8 22 26 19 26 19 8 11 8 11 5 30 5z"),$(a,"d","M7 26L7 14 2 14 2 12 14 12 14 14 9 14 9 26 7 26z"),f(t,z)},m(l,s){o(l,t,s),c(t,n),c(t,a),q&&q.m(t,null),r=!0,y||(k=[p(t,"click",e[12]),p(t,"mouseover",e[13]),p(t,"mouseenter",e[14]),p(t,"mouseleave",e[15]),p(t,"keyup",e[16]),p(t,"keydown",e[17])],y=!0)},p(e,[n]){S?S.p&&(!r||1024&n)&&m(S,M,e,e[10],r?h(M,e[10],n,null):g(e[10]),null):q&&q.p&&(!r||4&n)&&q.p(e,r?n:-1),f(t,z=v(A,[{"data-carbon-icon":"TextScale20"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{width:"20"},{height:"20"},(!r||1&n)&&{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},(!r||8&n)&&{style:e[3]},(!r||2&n)&&{id:e[1]},16&n&&e[4]]))},i(e){r||(b(q,e),r=!0)},o(e){x(q,e),r=!1},d(e){e&&u(t),q&&q.d(e),y=!1,w(k)}}}function Fe(e,t,n){let l,s,o,i,{$$slots:a={},$$scope:c}=t,{class:r}=t,{id:u}=t,{tabindex:$}=t,{focusable:f=!1}=t,{title:p}=t,{style:m}=t;return e.$$set=e=>{n(18,t=d(d({},t),y(e))),"class"in e&&n(0,r=e.class),"id"in e&&n(1,u=e.id),"tabindex"in e&&n(5,$=e.tabindex),"focusable"in e&&n(6,f=e.focusable),"title"in e&&n(2,p=e.title),"style"in e&&n(3,m=e.style),"$$scope"in e&&n(10,c=e.$$scope)},e.$$.update=()=>{n(9,l=t["aria-label"]),n(8,s=t["aria-labelledby"]),772&e.$$.dirty&&n(7,o=l||s||p),992&e.$$.dirty&&n(4,i={"aria-label":l,"aria-labelledby":s,"aria-hidden":!o||void 0,role:o?"img":void 0,focusable:"0"===$||f,tabindex:$})},t=y(t),[r,u,p,m,i,$,f,o,s,l,c,a,function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)}]}var Ve=class extends e{constructor(e){super(),t(this,e,Fe,Be,n,{class:0,id:1,tabindex:5,focusable:6,title:2,style:3})}};function Ye(e){let t,n;return{c(){t=i("title"),n=a(e[2])},m(e,l){o(e,t,l),c(t,n)},p(e,t){4&t&&r(n,e[2])},d(e){e&&u(t)}}}function Ee(e){let t,n,a,r,y,k;const M=e[11].default,S=l(M,e,e[10],null),q=S||function(e){let t,n=e[2]&&Ye(e);return{c(){n&&n.c(),t=s()},m(e,l){n&&n.m(e,l),o(e,t,l)},p(e,l){e[2]?n?n.p(e,l):(n=Ye(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}(e);let A=[{"data-carbon-icon":"Image20"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{width:"20"},{height:"20"},{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},{style:e[3]},{id:e[1]},e[4]],z={};for(let l=0;l<A.length;l+=1)z=d(z,A[l]);return{c(){t=i("svg"),n=i("path"),a=i("path"),q&&q.c(),$(n,"d","M19,14a3,3,0,1,0-3-3A3,3,0,0,0,19,14Zm0-4a1,1,0,1,1-1,1A1,1,0,0,1,19,10Z"),$(a,"d","M26,4H6A2,2,0,0,0,4,6V26a2,2,0,0,0,2,2H26a2,2,0,0,0,2-2V6A2,2,0,0,0,26,4Zm0,22H6V20l5-5,5.59,5.59a2,2,0,0,0,2.82,0L21,19l5,5Zm0-4.83-3.59-3.59a2,2,0,0,0-2.82,0L18,19.17l-5.59-5.59a2,2,0,0,0-2.82,0L6,17.17V6H26Z"),f(t,z)},m(l,s){o(l,t,s),c(t,n),c(t,a),q&&q.m(t,null),r=!0,y||(k=[p(t,"click",e[12]),p(t,"mouseover",e[13]),p(t,"mouseenter",e[14]),p(t,"mouseleave",e[15]),p(t,"keyup",e[16]),p(t,"keydown",e[17])],y=!0)},p(e,[n]){S?S.p&&(!r||1024&n)&&m(S,M,e,e[10],r?h(M,e[10],n,null):g(e[10]),null):q&&q.p&&(!r||4&n)&&q.p(e,r?n:-1),f(t,z=v(A,[{"data-carbon-icon":"Image20"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{width:"20"},{height:"20"},(!r||1&n)&&{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},(!r||8&n)&&{style:e[3]},(!r||2&n)&&{id:e[1]},16&n&&e[4]]))},i(e){r||(b(q,e),r=!0)},o(e){x(q,e),r=!1},d(e){e&&u(t),q&&q.d(e),y=!1,w(k)}}}function Ie(e,t,n){let l,s,o,i,{$$slots:a={},$$scope:c}=t,{class:r}=t,{id:u}=t,{tabindex:$}=t,{focusable:f=!1}=t,{title:p}=t,{style:m}=t;return e.$$set=e=>{n(18,t=d(d({},t),y(e))),"class"in e&&n(0,r=e.class),"id"in e&&n(1,u=e.id),"tabindex"in e&&n(5,$=e.tabindex),"focusable"in e&&n(6,f=e.focusable),"title"in e&&n(2,p=e.title),"style"in e&&n(3,m=e.style),"$$scope"in e&&n(10,c=e.$$scope)},e.$$.update=()=>{n(9,l=t["aria-label"]),n(8,s=t["aria-labelledby"]),772&e.$$.dirty&&n(7,o=l||s||p),992&e.$$.dirty&&n(4,i={"aria-label":l,"aria-labelledby":s,"aria-hidden":!o||void 0,role:o?"img":void 0,focusable:"0"===$||f,tabindex:$})},t=y(t),[r,u,p,m,i,$,f,o,s,l,c,a,function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)}]}var Pe=class extends e{constructor(e){super(),t(this,e,Ie,Ee,n,{class:0,id:1,tabindex:5,focusable:6,title:2,style:3})}};function Te(e){let t,n,l;return n=new M({props:{labelText:"拖放文件或者通过单击进行上传"}}),n.$on("change",e[0]),{c(){t=S("div"),q(n.$$.fragment),$(t,"class","upload-card")},m(e,s){o(e,t,s),A(n,t,null),l=!0},p:z,i(e){l||(b(n.$$.fragment,e),l=!0)},o(e){x(n.$$.fragment,e),l=!1},d(e){e&&u(t),C(n)}}}function _e(e){const t=O();return[function({target:{files:e}}){const[n]=e;re.get().uploadFile({cloudPath:`images/${n.name}`,filePath:n}).then((({download_url:e})=>{t.close({url:e})}))}]}class We extends e{constructor(e){super(),t(this,e,_e,Te,n,{})}}function Je(e,t,n){const l=e.slice();return l[12]=t[n],l}function Xe(e,t,n){const l=e.slice();return l[15]=t[n],l}function Ze(e){let t,n,l,s,i,r,d,f,m,g=e[15].label+"";var h=e[15].icon;function v(){return e[4](e[15])}return h&&(n=new h({})),{c(){t=S("div"),n&&q(n.$$.fragment),l=N(),s=S("div"),i=a(g),r=N(),$(s,"class","pt-2 text-xs"),$(t,"class","menu-item flex flex-col justify-center items-center py-3 hover:text-blue-500 cursor-pointer svelte-5xo7rr"),H(t,"active",e[0]==e[15].name)},m(e,a){o(e,t,a),n&&A(n,t,null),c(t,l),c(t,s),c(s,i),c(t,r),d=!0,f||(m=p(t,"click",v),f=!0)},p(s,o){if(h!==(h=(e=s)[15].icon)){if(n){L();const e=n;x(e.$$.fragment,1,0,(()=>{C(e,1)})),R()}h?(n=new h({}),q(n.$$.fragment),b(n.$$.fragment,1),A(n,t,l)):n=null}5&o&&H(t,"active",e[0]==e[15].name)},i(e){d||(n&&b(n.$$.fragment,e),d=!0)},o(e){n&&x(n.$$.fragment,e),d=!1},d(e){e&&u(t),n&&C(n),f=!1,m()}}}function De(e){let t,n,l,s,i,d,f,m,g,h=e[12].label+"";var v=e[12].icon;function w(){return e[5](e[12])}return v&&(n=new v({})),{c(){t=S("div"),n&&q(n.$$.fragment),l=N(),s=S("div"),i=a(h),d=N(),$(s,"class","pt-2 text-xs"),$(t,"class","widget bg-gray-100 hover:bg-gray-50 hover:text-blue-500 cursor-pointer svelte-5xo7rr")},m(e,a){o(e,t,a),n&&A(n,t,null),c(t,l),c(t,s),c(s,i),c(t,d),f=!0,m||(g=p(t,"click",w),m=!0)},p(s,o){if(v!==(v=(e=s)[12].icon)){if(n){L();const e=n;x(e.$$.fragment,1,0,(()=>{C(e,1)})),R()}v?(n=new v({}),q(n.$$.fragment),b(n.$$.fragment,1),A(n,t,l)):n=null}(!f||2&o)&&h!==(h=e[12].label+"")&&r(i,h)},i(e){f||(n&&b(n.$$.fragment,e),f=!0)},o(e){n&&x(n.$$.fragment,e),f=!1},d(e){e&&u(t),n&&C(n),m=!1,g()}}}function Ue(e){let t,n,l,s,i,a=e[2],r=[];for(let o=0;o<a.length;o+=1)r[o]=Ze(Xe(e,a,o));const d=e=>x(r[e],1,1,(()=>{r[e]=null}));let f=e[1],p=[];for(let o=0;o<f.length;o+=1)p[o]=De(Je(e,f,o));const m=e=>x(p[e],1,1,(()=>{p[e]=null}));return{c(){t=S("div"),n=S("div");for(let e=0;e<r.length;e+=1)r[e].c();l=N(),s=S("div");for(let e=0;e<p.length;e+=1)p[e].c();$(n,"class","menu svelte-5xo7rr"),$(s,"class","widget-panel flex flex-auto flex-wrap svelte-5xo7rr"),$(t,"class","absolute inset-0 flex flex-column")},m(e,a){o(e,t,a),c(t,n);for(let t=0;t<r.length;t+=1)r[t].m(n,null);c(t,l),c(t,s);for(let t=0;t<p.length;t+=1)p[t].m(s,null);i=!0},p(e,[t]){if(5&t){let l;for(a=e[2],l=0;l<a.length;l+=1){const s=Xe(e,a,l);r[l]?(r[l].p(s,t),b(r[l],1)):(r[l]=Ze(s),r[l].c(),b(r[l],1),r[l].m(n,null))}for(L(),l=a.length;l<r.length;l+=1)d(l);R()}if(10&t){let n;for(f=e[1],n=0;n<f.length;n+=1){const l=Je(e,f,n);p[n]?(p[n].p(l,t),b(p[n],1)):(p[n]=De(l),p[n].c(),b(p[n],1),p[n].m(s,null))}for(L(),n=f.length;n<p.length;n+=1)m(n);R()}},i(e){if(!i){for(let e=0;e<a.length;e+=1)b(r[e]);for(let e=0;e<f.length;e+=1)b(p[e]);i=!0}},o(e){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)x(r[t]);p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)x(p[t]);i=!1},d(e){e&&u(t),j(r,e),j(p,e)}}}function Ge(e,t,n){let l;var s=this&&this.__awaiter||function(e,t,n,l){return new(n||(n=Promise))((function(s,o){function i(e){try{c(l.next(e))}catch(t){o(t)}}function a(e){try{c(l.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((l=l.apply(e,t||[])).next())}))};const o=O(),{dispatch:i}=ue((e=>e.editor));let a="base";const c=[{label:"文字",event:de.text,icon:Ve},{label:"图片",event:de.image,icon:Pe,before:function(){return s(this,void 0,void 0,(function*(){return o.open({component:We,width:500,props:{labelText:"拖放文件或者通过点击进行上传"},title:"上传"}).then((({url:e}={})=>{if(!e)return;const t=$e(de.image,e),n=new Image;return new Promise((l=>{n.onload=()=>{t.property.width=n.width,t.property.height=n.height,l(t)},n.src=e}))}))}))}}],r=[{label:"基础",name:"base",icon:Oe,widgets:c},{label:"引用",name:"quote",icon:Re,widgets:[]}];function u(e,t){return s(this,void 0,void 0,(function*(){const n=t||B,l=yield n(e);l&&i("createWidget",l)}))}return e.$$.update=()=>{1&e.$$.dirty&&n(1,l=r.find((e=>e.name===a)).widgets)},[a,l,r,u,e=>n(0,a=e.name),e=>u(e.event,e.before)]}class Ke extends e{constructor(e){super(),t(this,e,Ge,Ue,n,{})}}function Qe(e){window.addEventListener("keydown",(t=>{t.ctrlKey&&("c"===t.key&&function(e){const t=fe(e);if(!t)return;const n=t.getNodes().filter((e=>e.visible()));pe.dispatch("updateCopied",[...n])}(e),"v"===t.key&&function(){const{widgets:e,copied:t}=pe.get();if(0===t.length)return;const n=e.filter((e=>t.map((e=>e.id())).includes(e.id)));n.length&&n.map((e=>me(e))).forEach((e=>pe.dispatch("createWidget",e)))}())}))}function et(e){window.addEventListener("keydown",(t=>{if("Backspace"!==t.key)return;const n=ge(e);pe.dispatch("deleteWidget",n.map((e=>e.id())))}))}function tt(e){let t;return{c(){t=S("div"),$(t,"id","canvas-container"),$(t,"class","content-container absolute inset-0 svelte-1lg75l6")},m(n,l){o(n,t,l),e[1](t)},p:z,i:z,o:z,d(n){n&&u(t),e[1](null)}}}function nt(e,t,n){const{dispatch:l}=ue((e=>e.editor));let s;function o(e){window.addEventListener("resize",(()=>ve(e)))}function i(){l("updatePreview",!1),l("updateZoom",1),l("updateSelected",[])}return F((()=>{const e=he(s);V(Y(xe),Y(be),Y(Qe),Y(o),Y(ve),Y(et),Y(i))(e)})),[s,function(e){E[e?"unshift":"push"]((()=>{s=e,n(0,s)}))}]}class lt extends e{constructor(e){super(),t(this,e,nt,tt,n,{})}}function st(e){let t,n;return{c(){t=i("title"),n=a(e[2])},m(e,l){o(e,t,l),c(t,n)},p(e,t){4&t&&r(n,e[2])},d(e){e&&u(t)}}}function ot(e){let t,n,a,r,y;const k=e[11].default,M=l(k,e,e[10],null),S=M||function(e){let t,n=e[2]&&st(e);return{c(){n&&n.c(),t=s()},m(e,l){n&&n.m(e,l),o(e,t,l)},p(e,l){e[2]?n?n.p(e,l):(n=st(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}(e);let q=[{"data-carbon-icon":"Reset16"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{width:"16"},{height:"16"},{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},{style:e[3]},{id:e[1]},e[4]],A={};for(let l=0;l<q.length;l+=1)A=d(A,q[l]);return{c(){t=i("svg"),n=i("path"),S&&S.c(),$(n,"d","M18,28A12,12,0,1,0,6,16v6.2L2.4,18.6,1,20l6,6,6-6-1.4-1.4L8,22.2V16H8A10,10,0,1,1,18,26Z"),f(t,A)},m(l,s){o(l,t,s),c(t,n),S&&S.m(t,null),a=!0,r||(y=[p(t,"click",e[12]),p(t,"mouseover",e[13]),p(t,"mouseenter",e[14]),p(t,"mouseleave",e[15]),p(t,"keyup",e[16]),p(t,"keydown",e[17])],r=!0)},p(e,[n]){M?M.p&&(!a||1024&n)&&m(M,k,e,e[10],a?h(k,e[10],n,null):g(e[10]),null):S&&S.p&&(!a||4&n)&&S.p(e,a?n:-1),f(t,A=v(q,[{"data-carbon-icon":"Reset16"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{width:"16"},{height:"16"},(!a||1&n)&&{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},(!a||8&n)&&{style:e[3]},(!a||2&n)&&{id:e[1]},16&n&&e[4]]))},i(e){a||(b(S,e),a=!0)},o(e){x(S,e),a=!1},d(e){e&&u(t),S&&S.d(e),r=!1,w(y)}}}function it(e,t,n){let l,s,o,i,{$$slots:a={},$$scope:c}=t,{class:r}=t,{id:u}=t,{tabindex:$}=t,{focusable:f=!1}=t,{title:p}=t,{style:m}=t;return e.$$set=e=>{n(18,t=d(d({},t),y(e))),"class"in e&&n(0,r=e.class),"id"in e&&n(1,u=e.id),"tabindex"in e&&n(5,$=e.tabindex),"focusable"in e&&n(6,f=e.focusable),"title"in e&&n(2,p=e.title),"style"in e&&n(3,m=e.style),"$$scope"in e&&n(10,c=e.$$scope)},e.$$.update=()=>{n(9,l=t["aria-label"]),n(8,s=t["aria-labelledby"]),772&e.$$.dirty&&n(7,o=l||s||p),992&e.$$.dirty&&n(4,i={"aria-label":l,"aria-labelledby":s,"aria-hidden":!o||void 0,role:o?"img":void 0,focusable:"0"===$||f,tabindex:$})},t=y(t),[r,u,p,m,i,$,f,o,s,l,c,a,function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)}]}var at=class extends e{constructor(e){super(),t(this,e,it,ot,n,{class:0,id:1,tabindex:5,focusable:6,title:2,style:3})}};function ct(e){let t,n;return{c(){t=i("title"),n=a(e[2])},m(e,l){o(e,t,l),c(t,n)},p(e,t){4&t&&r(n,e[2])},d(e){e&&u(t)}}}function rt(e){let t,n,a,r,y;const k=e[11].default,M=l(k,e,e[10],null),S=M||function(e){let t,n=e[2]&&ct(e);return{c(){n&&n.c(),t=s()},m(e,l){n&&n.m(e,l),o(e,t,l)},p(e,l){e[2]?n?n.p(e,l):(n=ct(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}(e);let q=[{"data-carbon-icon":"Rotate16"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{width:"16"},{height:"16"},{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},{style:e[3]},{id:e[1]},e[4]],A={};for(let l=0;l<q.length;l+=1)A=d(A,q[l]);return{c(){t=i("svg"),n=i("path"),S&&S.c(),$(n,"d","M17.91 26.82l.35 2a12.9 12.9 0 004.24-1.54l-1-1.73A10.88 10.88 0 0117.91 26.82zM24.42 23.07L26 24.35a13 13 0 002.24-3.91l-1.87-.68A11 11 0 0124.42 23.07zM9.5 27.25a12.9 12.9 0 004.24 1.54l.35-2a10.88 10.88 0 01-3.59-1.3zM5.67 19.76l-1.87.68A13 13 0 006 24.35l.32-.26 1.22-1h0a11 11 0 01-1.91-3.31zM29 16a12.85 12.85 0 00-.8-4.44l-1.87.68A11.18 11.18 0 0127 16zM26 7.65a13 13 0 00-20 0V4H4v8h8V10H6.81A11 11 0 0124.42 8.93z"),f(t,A)},m(l,s){o(l,t,s),c(t,n),S&&S.m(t,null),a=!0,r||(y=[p(t,"click",e[12]),p(t,"mouseover",e[13]),p(t,"mouseenter",e[14]),p(t,"mouseleave",e[15]),p(t,"keyup",e[16]),p(t,"keydown",e[17])],r=!0)},p(e,[n]){M?M.p&&(!a||1024&n)&&m(M,k,e,e[10],a?h(k,e[10],n,null):g(e[10]),null):S&&S.p&&(!a||4&n)&&S.p(e,a?n:-1),f(t,A=v(q,[{"data-carbon-icon":"Rotate16"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{width:"16"},{height:"16"},(!a||1&n)&&{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},(!a||8&n)&&{style:e[3]},(!a||2&n)&&{id:e[1]},16&n&&e[4]]))},i(e){a||(b(S,e),a=!0)},o(e){x(S,e),a=!1},d(e){e&&u(t),S&&S.d(e),r=!1,w(y)}}}function ut(e,t,n){let l,s,o,i,{$$slots:a={},$$scope:c}=t,{class:r}=t,{id:u}=t,{tabindex:$}=t,{focusable:f=!1}=t,{title:p}=t,{style:m}=t;return e.$$set=e=>{n(18,t=d(d({},t),y(e))),"class"in e&&n(0,r=e.class),"id"in e&&n(1,u=e.id),"tabindex"in e&&n(5,$=e.tabindex),"focusable"in e&&n(6,f=e.focusable),"title"in e&&n(2,p=e.title),"style"in e&&n(3,m=e.style),"$$scope"in e&&n(10,c=e.$$scope)},e.$$.update=()=>{n(9,l=t["aria-label"]),n(8,s=t["aria-labelledby"]),772&e.$$.dirty&&n(7,o=l||s||p),992&e.$$.dirty&&n(4,i={"aria-label":l,"aria-labelledby":s,"aria-hidden":!o||void 0,role:o?"img":void 0,focusable:"0"===$||f,tabindex:$})},t=y(t),[r,u,p,m,i,$,f,o,s,l,c,a,function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)}]}var dt=class extends e{constructor(e){super(),t(this,e,ut,rt,n,{class:0,id:1,tabindex:5,focusable:6,title:2,style:3})}};function $t(e){let t,n;return{c(){t=i("title"),n=a(e[2])},m(e,l){o(e,t,l),c(t,n)},p(e,t){4&t&&r(n,e[2])},d(e){e&&u(t)}}}function ft(e){let t,n,a,r,y;const k=e[11].default,M=l(k,e,e[10],null),S=M||function(e){let t,n=e[2]&&$t(e);return{c(){n&&n.c(),t=s()},m(e,l){n&&n.m(e,l),o(e,t,l)},p(e,l){e[2]?n?n.p(e,l):(n=$t(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}(e);let q=[{"data-carbon-icon":"WatsonHealthRotate_18016"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{width:"16"},{height:"16"},{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},{style:e[3]},{id:e[1]},e[4]],A={};for(let l=0;l<q.length;l+=1)A=d(A,q[l]);return{c(){t=i("svg"),n=i("path"),S&&S.c(),$(n,"d","M14.0913 26.8235l-.3467 1.968a12.8956 12.8956 0 01-4.24-1.5418l1-1.7307A10.9086 10.9086 0 0014.0913 26.8235zM7.5767 23.0682L6.0449 24.3533a12.9811 12.9811 0 01-2.25-3.9112l1.8775-.6834A10.9808 10.9808 0 007.5767 23.0682zM22.4951 27.25a12.8956 12.8956 0 01-4.24 1.5418l-.3467-1.968a10.9086 10.9086 0 003.5869-1.3045zM26.3271 19.7587l1.8775.6834a12.9811 12.9811 0 01-2.2495 3.9112l-.3115-.2614-1.22-1.0237h0a10.9822 10.9822 0 001.9038-3.3093zM13.6616 5.2559c-.1592.0346-.3144.08-.4712.1215-.2131.0562-.4258.1138-.6335.1822-.1643.0547-.325.1167-.4859.1782-.1926.0742-.3835.1509-.57.2349-.1611.0727-.3193.15-.4763.23q-.2677.1363-.5262.2867c-.153.0893-.3046.18-.4531.2758-.1679.1089-.3308.2242-.4922.3413-.1406.1026-.2817.2037-.417.3125-.1616.1294-.3156.2676-.47.4063-.1225.11-.2478.2168-.3652.332-.1668.1636-.3223.3379-.4785.5117A10.9438 10.9438 0 005 16H3A12.9363 12.9363 0 016.05 7.65l-.0047-.0039c.0918-.1094.197-.2061.2925-.3125.1841-.2051.3672-.41.5635-.603.1382-.1358.2856-.2613.43-.3907.1831-.1645.3657-.3286.5581-.4824.1592-.1279.3244-.2466.4895-.3667.1921-.14.3855-.2768.5854-.4062.1743-.1128.3523-.2188.5322-.3238q.3081-.1786.6253-.3408c.1846-.0942.37-.1846.56-.27.2224-.1.449-.1914.678-.2793.1894-.0723.3777-.1455.5713-.209.2463-.0815.498-.1494.7507-.2163.1848-.0493.3674-.1025.5554-.1431.29-.0634.5865-.1074.8833-.1508.159-.023.3145-.0552.4754-.0728A12.9331 12.9331 0 0126 7.7031V4h2v8H20V10h5.1885A10.961 10.961 0 0016 5a11.1114 11.1114 0 00-1.189.0669c-.1362.0146-.268.042-.4026.0615C14.1575 5.165 13.907 5.2026 13.6616 5.2559z"),f(t,A)},m(l,s){o(l,t,s),c(t,n),S&&S.m(t,null),a=!0,r||(y=[p(t,"click",e[12]),p(t,"mouseover",e[13]),p(t,"mouseenter",e[14]),p(t,"mouseleave",e[15]),p(t,"keyup",e[16]),p(t,"keydown",e[17])],r=!0)},p(e,[n]){M?M.p&&(!a||1024&n)&&m(M,k,e,e[10],a?h(k,e[10],n,null):g(e[10]),null):S&&S.p&&(!a||4&n)&&S.p(e,a?n:-1),f(t,A=v(q,[{"data-carbon-icon":"WatsonHealthRotate_18016"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{width:"16"},{height:"16"},(!a||1&n)&&{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},(!a||8&n)&&{style:e[3]},(!a||2&n)&&{id:e[1]},16&n&&e[4]]))},i(e){a||(b(S,e),a=!0)},o(e){x(S,e),a=!1},d(e){e&&u(t),S&&S.d(e),r=!1,w(y)}}}function pt(e,t,n){let l,s,o,i,{$$slots:a={},$$scope:c}=t,{class:r}=t,{id:u}=t,{tabindex:$}=t,{focusable:f=!1}=t,{title:p}=t,{style:m}=t;return e.$$set=e=>{n(18,t=d(d({},t),y(e))),"class"in e&&n(0,r=e.class),"id"in e&&n(1,u=e.id),"tabindex"in e&&n(5,$=e.tabindex),"focusable"in e&&n(6,f=e.focusable),"title"in e&&n(2,p=e.title),"style"in e&&n(3,m=e.style),"$$scope"in e&&n(10,c=e.$$scope)},e.$$.update=()=>{n(9,l=t["aria-label"]),n(8,s=t["aria-labelledby"]),772&e.$$.dirty&&n(7,o=l||s||p),992&e.$$.dirty&&n(4,i={"aria-label":l,"aria-labelledby":s,"aria-hidden":!o||void 0,role:o?"img":void 0,focusable:"0"===$||f,tabindex:$})},t=y(t),[r,u,p,m,i,$,f,o,s,l,c,a,function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)}]}var mt=class extends e{constructor(e){super(),t(this,e,pt,ft,n,{class:0,id:1,tabindex:5,focusable:6,title:2,style:3})}};function gt(e){let t,n;return{c(){t=i("title"),n=a(e[2])},m(e,l){o(e,t,l),c(t,n)},p(e,t){4&t&&r(n,e[2])},d(e){e&&u(t)}}}function ht(e){let t,n,a,r,y,k;const M=e[11].default,S=l(M,e,e[10],null),q=S||function(e){let t,n=e[2]&&gt(e);return{c(){n&&n.c(),t=s()},m(e,l){n&&n.m(e,l),o(e,t,l)},p(e,l){e[2]?n?n.p(e,l):(n=gt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}(e);let A=[{"data-carbon-icon":"Delete16"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{width:"16"},{height:"16"},{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},{style:e[3]},{id:e[1]},e[4]],z={};for(let l=0;l<A.length;l+=1)z=d(z,A[l]);return{c(){t=i("svg"),n=i("path"),a=i("path"),q&&q.c(),$(n,"d","M12 12H14V24H12zM18 12H20V24H18z"),$(a,"d","M4 6V8H6V28a2 2 0 002 2H24a2 2 0 002-2V8h2V6zM8 28V8H24V28zM12 2H20V4H12z"),f(t,z)},m(l,s){o(l,t,s),c(t,n),c(t,a),q&&q.m(t,null),r=!0,y||(k=[p(t,"click",e[12]),p(t,"mouseover",e[13]),p(t,"mouseenter",e[14]),p(t,"mouseleave",e[15]),p(t,"keyup",e[16]),p(t,"keydown",e[17])],y=!0)},p(e,[n]){S?S.p&&(!r||1024&n)&&m(S,M,e,e[10],r?h(M,e[10],n,null):g(e[10]),null):q&&q.p&&(!r||4&n)&&q.p(e,r?n:-1),f(t,z=v(A,[{"data-carbon-icon":"Delete16"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{width:"16"},{height:"16"},(!r||1&n)&&{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},(!r||8&n)&&{style:e[3]},(!r||2&n)&&{id:e[1]},16&n&&e[4]]))},i(e){r||(b(q,e),r=!0)},o(e){x(q,e),r=!1},d(e){e&&u(t),q&&q.d(e),y=!1,w(k)}}}function vt(e,t,n){let l,s,o,i,{$$slots:a={},$$scope:c}=t,{class:r}=t,{id:u}=t,{tabindex:$}=t,{focusable:f=!1}=t,{title:p}=t,{style:m}=t;return e.$$set=e=>{n(18,t=d(d({},t),y(e))),"class"in e&&n(0,r=e.class),"id"in e&&n(1,u=e.id),"tabindex"in e&&n(5,$=e.tabindex),"focusable"in e&&n(6,f=e.focusable),"title"in e&&n(2,p=e.title),"style"in e&&n(3,m=e.style),"$$scope"in e&&n(10,c=e.$$scope)},e.$$.update=()=>{n(9,l=t["aria-label"]),n(8,s=t["aria-labelledby"]),772&e.$$.dirty&&n(7,o=l||s||p),992&e.$$.dirty&&n(4,i={"aria-label":l,"aria-labelledby":s,"aria-hidden":!o||void 0,role:o?"img":void 0,focusable:"0"===$||f,tabindex:$})},t=y(t),[r,u,p,m,i,$,f,o,s,l,c,a,function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)}]}var bt=class extends e{constructor(e){super(),t(this,e,vt,ht,n,{class:0,id:1,tabindex:5,focusable:6,title:2,style:3})}};function xt(e){let t,n;return{c(){t=i("title"),n=a(e[2])},m(e,l){o(e,t,l),c(t,n)},p(e,t){4&t&&r(n,e[2])},d(e){e&&u(t)}}}function wt(e){let t,n,a,r,y;const k=e[11].default,M=l(k,e,e[10],null),S=M||function(e){let t,n=e[2]&&xt(e);return{c(){n&&n.c(),t=s()},m(e,l){n&&n.m(e,l),o(e,t,l)},p(e,l){e[2]?n?n.p(e,l):(n=xt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}(e);let q=[{"data-carbon-icon":"ArrowUp16"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 16 16"},{fill:"currentColor"},{width:"16"},{height:"16"},{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},{style:e[3]},{id:e[1]},e[4]],A={};for(let l=0;l<q.length;l+=1)A=d(A,q[l]);return{c(){t=i("svg"),n=i("path"),S&&S.c(),$(n,"d","M3.7 6.7L7.5 2.9 7.5 15 8.5 15 8.5 2.9 12.3 6.7 13 6 8 1 3 6z"),f(t,A)},m(l,s){o(l,t,s),c(t,n),S&&S.m(t,null),a=!0,r||(y=[p(t,"click",e[12]),p(t,"mouseover",e[13]),p(t,"mouseenter",e[14]),p(t,"mouseleave",e[15]),p(t,"keyup",e[16]),p(t,"keydown",e[17])],r=!0)},p(e,[n]){M?M.p&&(!a||1024&n)&&m(M,k,e,e[10],a?h(k,e[10],n,null):g(e[10]),null):S&&S.p&&(!a||4&n)&&S.p(e,a?n:-1),f(t,A=v(q,[{"data-carbon-icon":"ArrowUp16"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 16 16"},{fill:"currentColor"},{width:"16"},{height:"16"},(!a||1&n)&&{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},(!a||8&n)&&{style:e[3]},(!a||2&n)&&{id:e[1]},16&n&&e[4]]))},i(e){a||(b(S,e),a=!0)},o(e){x(S,e),a=!1},d(e){e&&u(t),S&&S.d(e),r=!1,w(y)}}}function yt(e,t,n){let l,s,o,i,{$$slots:a={},$$scope:c}=t,{class:r}=t,{id:u}=t,{tabindex:$}=t,{focusable:f=!1}=t,{title:p}=t,{style:m}=t;return e.$$set=e=>{n(18,t=d(d({},t),y(e))),"class"in e&&n(0,r=e.class),"id"in e&&n(1,u=e.id),"tabindex"in e&&n(5,$=e.tabindex),"focusable"in e&&n(6,f=e.focusable),"title"in e&&n(2,p=e.title),"style"in e&&n(3,m=e.style),"$$scope"in e&&n(10,c=e.$$scope)},e.$$.update=()=>{n(9,l=t["aria-label"]),n(8,s=t["aria-labelledby"]),772&e.$$.dirty&&n(7,o=l||s||p),992&e.$$.dirty&&n(4,i={"aria-label":l,"aria-labelledby":s,"aria-hidden":!o||void 0,role:o?"img":void 0,focusable:"0"===$||f,tabindex:$})},t=y(t),[r,u,p,m,i,$,f,o,s,l,c,a,function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)}]}var kt=class extends e{constructor(e){super(),t(this,e,yt,wt,n,{class:0,id:1,tabindex:5,focusable:6,title:2,style:3})}};function Mt(e){let t,n;return{c(){t=i("title"),n=a(e[2])},m(e,l){o(e,t,l),c(t,n)},p(e,t){4&t&&r(n,e[2])},d(e){e&&u(t)}}}function St(e){let t,n,a,r,y;const k=e[11].default,M=l(k,e,e[10],null),S=M||function(e){let t,n=e[2]&&Mt(e);return{c(){n&&n.c(),t=s()},m(e,l){n&&n.m(e,l),o(e,t,l)},p(e,l){e[2]?n?n.p(e,l):(n=Mt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&u(t)}}}(e);let q=[{"data-carbon-icon":"ArrowDown16"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 16 16"},{fill:"currentColor"},{width:"16"},{height:"16"},{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},{style:e[3]},{id:e[1]},e[4]],A={};for(let l=0;l<q.length;l+=1)A=d(A,q[l]);return{c(){t=i("svg"),n=i("path"),S&&S.c(),$(n,"d","M12.3 9.3L8.5 13.1 8.5 1 7.5 1 7.5 13.1 3.7 9.3 3 10 8 15 13 10z"),f(t,A)},m(l,s){o(l,t,s),c(t,n),S&&S.m(t,null),a=!0,r||(y=[p(t,"click",e[12]),p(t,"mouseover",e[13]),p(t,"mouseenter",e[14]),p(t,"mouseleave",e[15]),p(t,"keyup",e[16]),p(t,"keydown",e[17])],r=!0)},p(e,[n]){M?M.p&&(!a||1024&n)&&m(M,k,e,e[10],a?h(k,e[10],n,null):g(e[10]),null):S&&S.p&&(!a||4&n)&&S.p(e,a?n:-1),f(t,A=v(q,[{"data-carbon-icon":"ArrowDown16"},{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 16 16"},{fill:"currentColor"},{width:"16"},{height:"16"},(!a||1&n)&&{class:e[0]},{preserveAspectRatio:"xMidYMid meet"},(!a||8&n)&&{style:e[3]},(!a||2&n)&&{id:e[1]},16&n&&e[4]]))},i(e){a||(b(S,e),a=!0)},o(e){x(S,e),a=!1},d(e){e&&u(t),S&&S.d(e),r=!1,w(y)}}}function qt(e,t,n){let l,s,o,i,{$$slots:a={},$$scope:c}=t,{class:r}=t,{id:u}=t,{tabindex:$}=t,{focusable:f=!1}=t,{title:p}=t,{style:m}=t;return e.$$set=e=>{n(18,t=d(d({},t),y(e))),"class"in e&&n(0,r=e.class),"id"in e&&n(1,u=e.id),"tabindex"in e&&n(5,$=e.tabindex),"focusable"in e&&n(6,f=e.focusable),"title"in e&&n(2,p=e.title),"style"in e&&n(3,m=e.style),"$$scope"in e&&n(10,c=e.$$scope)},e.$$.update=()=>{n(9,l=t["aria-label"]),n(8,s=t["aria-labelledby"]),772&e.$$.dirty&&n(7,o=l||s||p),992&e.$$.dirty&&n(4,i={"aria-label":l,"aria-labelledby":s,"aria-hidden":!o||void 0,role:o?"img":void 0,focusable:"0"===$||f,tabindex:$})},t=y(t),[r,u,p,m,i,$,f,o,s,l,c,a,function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)},function(t){k.call(this,e,t)}]}var At=class extends e{constructor(e){super(),t(this,e,qt,St,n,{class:0,id:1,tabindex:5,focusable:6,title:2,style:3})}};function zt(e){let t,n,l,s,i;var a=bt;return a&&(n=new a({})),{c(){t=S("div"),n&&q(n.$$.fragment),$(t,"class","icon-button svelte-1bds2xv")},m(a,c){o(a,t,c),n&&A(n,t,null),l=!0,s||(i=p(t,"click",e[17]),s=!0)},p(e,l){if(a!==(a=bt)){if(n){L();const e=n;x(e.$$.fragment,1,0,(()=>{C(e,1)})),R()}a?(n=new a({}),q(n.$$.fragment),b(n.$$.fragment,1),A(n,t,null)):n=null}},i(e){l||(n&&b(n.$$.fragment,e),l=!0)},o(e){n&&x(n.$$.fragment,e),l=!1},d(e){e&&u(t),n&&C(n),s=!1,i()}}}function Ct(e){let t,n,l,s,i,a,c,r;var d=kt;d&&(n=new d({}));var f=At;return f&&(i=new f({})),{c(){t=S("div"),n&&q(n.$$.fragment),l=N(),s=S("div"),i&&q(i.$$.fragment),$(t,"class","icon-button svelte-1bds2xv"),$(s,"class","icon-button svelte-1bds2xv")},m(u,d){o(u,t,d),n&&A(n,t,null),o(u,l,d),o(u,s,d),i&&A(i,s,null),a=!0,c||(r=[p(t,"click",e[18]),p(s,"click",e[19])],c=!0)},p(e,l){if(d!==(d=kt)){if(n){L();const e=n;x(e.$$.fragment,1,0,(()=>{C(e,1)})),R()}d?(n=new d({}),q(n.$$.fragment),b(n.$$.fragment,1),A(n,t,null)):n=null}if(f!==(f=At)){if(i){L();const e=i;x(e.$$.fragment,1,0,(()=>{C(e,1)})),R()}f?(i=new f({}),q(i.$$.fragment),b(i.$$.fragment,1),A(i,s,null)):i=null}},i(e){a||(n&&b(n.$$.fragment,e),i&&b(i.$$.fragment,e),a=!0)},o(e){n&&x(n.$$.fragment,e),i&&x(i.$$.fragment,e),a=!1},d(e){e&&u(t),n&&C(n),e&&u(l),e&&u(s),i&&C(i),c=!1,w(r)}}}function Ot(e){let t,n,l,s,i,d,f,m,g,h,v,y,k,M,z,O,j,B,F,V,Y,E,T,_,W,J,X,Z=(100*e[0]).toFixed(0)+"";var D=dt;D&&(s=new D({}));var U=mt;U&&(f=new U({}));var G=I;G&&(v=new G({}));var K=P;K&&(B=new K({}));var Q=at;Q&&(Y=new Q({}));let ee=e[2].length>0&&zt(e),te=1===e[2].length&&Ct(e);return{c(){t=S("div"),n=S("div"),l=S("div"),s&&q(s.$$.fragment),i=N(),d=S("div"),f&&q(f.$$.fragment),m=N(),g=S("div"),h=S("div"),v&&q(v.$$.fragment),y=N(),k=S("div"),M=a(Z),z=a("%"),O=N(),j=S("div"),B&&q(B.$$.fragment),F=N(),V=S("div"),Y&&q(Y.$$.fragment),E=N(),T=S("div"),ee&&ee.c(),_=N(),te&&te.c(),$(l,"class","icon-button svelte-1bds2xv"),H(l,"disabled",0===e[1].backward.length),$(d,"class","icon-button svelte-1bds2xv"),H(d,"disabled",0===e[1].forward.length),$(n,"class","history"),$(h,"class","icon-button svelte-1bds2xv"),$(k,"class","zoom-value svelte-1bds2xv"),$(j,"class","icon-button svelte-1bds2xv"),$(V,"class","icon-button svelte-1bds2xv"),$(g,"class","zoom"),$(T,"class","widget"),$(t,"class","tool-container absolute inset-0 flex flex-col items-center space-y-5 svelte-1bds2xv")},m(a,r){o(a,t,r),c(t,n),c(n,l),s&&A(s,l,null),c(n,i),c(n,d),f&&A(f,d,null),c(t,m),c(t,g),c(g,h),v&&A(v,h,null),c(g,y),c(g,k),c(k,M),c(k,z),c(g,O),c(g,j),B&&A(B,j,null),c(g,F),c(g,V),Y&&A(Y,V,null),c(t,E),c(t,T),ee&&ee.m(T,null),c(T,_),te&&te.m(T,null),W=!0,J||(X=[p(l,"click",e[12]),p(d,"click",e[13]),p(h,"click",e[14]),p(j,"click",e[15]),p(V,"click",e[16]),p(t,"keydown",Nt)],J=!0)},p(e,[t]){if(D!==(D=dt)){if(s){L();const e=s;x(e.$$.fragment,1,0,(()=>{C(e,1)})),R()}D?(s=new D({}),q(s.$$.fragment),b(s.$$.fragment,1),A(s,l,null)):s=null}if(2&t&&H(l,"disabled",0===e[1].backward.length),U!==(U=mt)){if(f){L();const e=f;x(e.$$.fragment,1,0,(()=>{C(e,1)})),R()}U?(f=new U({}),q(f.$$.fragment),b(f.$$.fragment,1),A(f,d,null)):f=null}if(2&t&&H(d,"disabled",0===e[1].forward.length),G!==(G=I)){if(v){L();const e=v;x(e.$$.fragment,1,0,(()=>{C(e,1)})),R()}G?(v=new G({}),q(v.$$.fragment),b(v.$$.fragment,1),A(v,h,null)):v=null}if((!W||1&t)&&Z!==(Z=(100*e[0]).toFixed(0)+"")&&r(M,Z),K!==(K=P)){if(B){L();const e=B;x(e.$$.fragment,1,0,(()=>{C(e,1)})),R()}K?(B=new K({}),q(B.$$.fragment),b(B.$$.fragment,1),A(B,j,null)):B=null}if(Q!==(Q=at)){if(Y){L();const e=Y;x(e.$$.fragment,1,0,(()=>{C(e,1)})),R()}Q?(Y=new Q({}),q(Y.$$.fragment),b(Y.$$.fragment,1),A(Y,V,null)):Y=null}e[2].length>0?ee?(ee.p(e,t),4&t&&b(ee,1)):(ee=zt(e),ee.c(),b(ee,1),ee.m(T,_)):ee&&(L(),x(ee,1,1,(()=>{ee=null})),R()),1===e[2].length?te?(te.p(e,t),4&t&&b(te,1)):(te=Ct(e),te.c(),b(te,1),te.m(T,null)):te&&(L(),x(te,1,1,(()=>{te=null})),R())},i(e){W||(s&&b(s.$$.fragment,e),f&&b(f.$$.fragment,e),v&&b(v.$$.fragment,e),B&&b(B.$$.fragment,e),Y&&b(Y.$$.fragment,e),b(ee),b(te),W=!0)},o(e){s&&x(s.$$.fragment,e),f&&x(f.$$.fragment,e),v&&x(v.$$.fragment,e),B&&x(B.$$.fragment,e),Y&&x(Y.$$.fragment,e),x(ee),x(te),W=!1},d(e){e&&u(t),s&&C(s),f&&C(f),v&&C(v),B&&C(B),Y&&C(Y),ee&&ee.d(),te&&te.d(),J=!1,w(X)}}}const Nt=e=>e.stopPropagation();function Ht(e,t,n){let l,s,o,i;const{stage:a,selected:c,history:r,zoom:u,dispatch:d}=ue((e=>e.editor));function $(e){if(s<=.5&&e<0||s>=5&&e>0)return;const t=e?parseFloat((s+.1*e).toFixed(2)):1;d("updateZoom",t)}function f(){const e=ge(l);d("deleteWidget",e.map((e=>e.id())))}function p(){const e=ge(l),[t]=e;t.moveUp(),d("updateZindex")}function m(){const e=ge(l),[t]=e;t.zIndex()>1&&(t.moveDown(),d("updateZindex"))}T(e,a,(e=>n(20,l=e))),T(e,c,(e=>n(2,i=e))),T(e,r,(e=>n(1,o=e))),T(e,u,(e=>n(0,s=e)));return[s,o,i,a,c,r,u,d,$,f,p,m,()=>d("backward"),()=>d("forward"),()=>$(1),()=>$(-1),()=>$(),()=>f(),()=>p(),()=>m()]}class Lt extends e{constructor(e){super(),t(this,e,Ht,Ot,n,{})}}function Rt(e){let t,n,l,s,i,a,c,r,d,$;return t=new qe({props:{label:"X",$$slots:{default:[jt]},$$scope:{ctx:e}}}),l=new qe({props:{label:"Y",$$slots:{default:[Bt]},$$scope:{ctx:e}}}),i=new qe({props:{label:"宽度",$$slots:{default:[Ft]},$$scope:{ctx:e}}}),c=new qe({props:{label:"高度",$$slots:{default:[Vt]},$$scope:{ctx:e}}}),d=new qe({props:{label:"角度",$$slots:{default:[Yt]},$$scope:{ctx:e}}}),{c(){q(t.$$.fragment),n=N(),q(l.$$.fragment),s=N(),q(i.$$.fragment),a=N(),q(c.$$.fragment),r=N(),q(d.$$.fragment)},m(e,u){A(t,e,u),o(e,n,u),A(l,e,u),o(e,s,u),A(i,e,u),o(e,a,u),A(c,e,u),o(e,r,u),A(d,e,u),$=!0},p(e,n){const s={};131073&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s);const o={};131073&n&&(o.$$scope={dirty:n,ctx:e}),l.$set(o);const a={};131073&n&&(a.$$scope={dirty:n,ctx:e}),i.$set(a);const r={};131073&n&&(r.$$scope={dirty:n,ctx:e}),c.$set(r);const u={};131073&n&&(u.$$scope={dirty:n,ctx:e}),d.$set(u)},i(e){$||(b(t.$$.fragment,e),b(l.$$.fragment,e),b(i.$$.fragment,e),b(c.$$.fragment,e),b(d.$$.fragment,e),$=!0)},o(e){x(t.$$.fragment,e),x(l.$$.fragment,e),x(i.$$.fragment,e),x(c.$$.fragment,e),x(d.$$.fragment,e),$=!1},d(e){C(t,e),e&&u(n),C(l,e),e&&u(s),C(i,e),e&&u(a),C(c,e),e&&u(r),C(d,e)}}}function jt(e){let t,n,l;function s(t){e[4](t)}let o={};return void 0!==e[0].x&&(o.value=e[0].x),t=new W({props:o}),E.push((()=>J(t,"value",s))),t.$on("change",e[3]),{c(){q(t.$$.fragment)},m(e,n){A(t,e,n),l=!0},p(e,l){const s={};!n&&1&l&&(n=!0,s.value=e[0].x,X((()=>n=!1))),t.$set(s)},i(e){l||(b(t.$$.fragment,e),l=!0)},o(e){x(t.$$.fragment,e),l=!1},d(e){C(t,e)}}}function Bt(e){let t,n,l;function s(t){e[5](t)}let o={};return void 0!==e[0].y&&(o.value=e[0].y),t=new W({props:o}),E.push((()=>J(t,"value",s))),t.$on("change",e[3]),{c(){q(t.$$.fragment)},m(e,n){A(t,e,n),l=!0},p(e,l){const s={};!n&&1&l&&(n=!0,s.value=e[0].y,X((()=>n=!1))),t.$set(s)},i(e){l||(b(t.$$.fragment,e),l=!0)},o(e){x(t.$$.fragment,e),l=!1},d(e){C(t,e)}}}function Ft(e){let t,n,l;function s(t){e[6](t)}let o={min:0};return void 0!==e[0].width&&(o.value=e[0].width),t=new W({props:o}),E.push((()=>J(t,"value",s))),t.$on("change",e[3]),{c(){q(t.$$.fragment)},m(e,n){A(t,e,n),l=!0},p(e,l){const s={};!n&&1&l&&(n=!0,s.value=e[0].width,X((()=>n=!1))),t.$set(s)},i(e){l||(b(t.$$.fragment,e),l=!0)},o(e){x(t.$$.fragment,e),l=!1},d(e){C(t,e)}}}function Vt(e){let t,n,l;function s(t){e[7](t)}let o={min:0};return void 0!==e[0].height&&(o.value=e[0].height),t=new W({props:o}),E.push((()=>J(t,"value",s))),t.$on("change",e[3]),{c(){q(t.$$.fragment)},m(e,n){A(t,e,n),l=!0},p(e,l){const s={};!n&&1&l&&(n=!0,s.value=e[0].height,X((()=>n=!1))),t.$set(s)},i(e){l||(b(t.$$.fragment,e),l=!0)},o(e){x(t.$$.fragment,e),l=!1},d(e){C(t,e)}}}function Yt(e){let t,n,l;function s(t){e[8](t)}let o={};return void 0!==e[0].rotation&&(o.value=e[0].rotation),t=new W({props:o}),E.push((()=>J(t,"value",s))),t.$on("change",e[3]),{c(){q(t.$$.fragment)},m(e,n){A(t,e,n),l=!0},p(e,l){const s={};!n&&1&l&&(n=!0,s.value=e[0].rotation,X((()=>n=!1))),t.$set(s)},i(e){l||(b(t.$$.fragment,e),l=!0)},o(e){x(t.$$.fragment,e),l=!1},d(e){C(t,e)}}}function Et(e){let t,n,l=e[0]&&Rt(e);return{c(){l&&l.c(),t=s()},m(e,s){l&&l.m(e,s),o(e,t,s),n=!0},p(e,n){e[0]?l?(l.p(e,n),1&n&&b(l,1)):(l=Rt(e),l.c(),b(l,1),l.m(t.parentNode,t)):l&&(L(),x(l,1,1,(()=>{l=null})),R())},i(e){n||(b(l),n=!0)},o(e){x(l),n=!1},d(e){l&&l.d(e),e&&u(t)}}}function It(e){let t,n;return t=new Se({props:{$$slots:{default:[Et]},$$scope:{ctx:e}}}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},p(e,[n]){const l={};131073&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Pt(e,t,n){let l,s;const{selected:o,widgets:i,dispatch:a,stage:c}=ue((e=>e.editor));T(e,o,(e=>n(11,s=e))),T(e,c,(e=>n(10,l=e)));let r,u={width:0,height:0,x:0,y:0,rotation:0};return i.subscribe((e=>{const t=e.find((e=>1===s.length&&e.id===s[0]));r=t,t&&function(){const e=_(Object.keys(u),r.property);JSON.stringify(u)!==JSON.stringify(e)&&n(0,u=e)}()})),[u,o,c,function(){const e=_(Object.keys(u),r.property);JSON.stringify(u)!==JSON.stringify(e)&&(!function(){const[e]=s;if(!e)return;const t=l.findOne(`#${e}`);Object.entries(u).forEach((([e,n])=>{t.getAttr(e)!==n&&t.setAttr(e,n)}))}(),a("updateWidget",{id:r.id,property:Object.assign(Object.assign({},r.property),u)}))},function(t){e.$$.not_equal(u.x,t)&&(u.x=t,n(0,u))},function(t){e.$$.not_equal(u.y,t)&&(u.y=t,n(0,u))},function(t){e.$$.not_equal(u.width,t)&&(u.width=t,n(0,u))},function(t){e.$$.not_equal(u.height,t)&&(u.height=t,n(0,u))},function(t){e.$$.not_equal(u.rotation,t)&&(u.rotation=t,n(0,u))}]}class Tt extends e{constructor(e){super(),t(this,e,Pt,It,n,{})}}function _t(e){let t,n,l,s,i,d,f,m,g,h,v,b,x,y,k,M,q,A,C,O,H,L,R,j,B,F,V,Y,E,I,P,T,_,W,J,X,Z,D,U,G,K,Q,ee,te,ne,le,se;return{c(){t=S("div"),n=S("div"),l=S("div"),s=S("div"),i=S("div"),d=N(),f=S("div"),m=N(),g=S("div"),h=S("div"),v=N(),b=S("div"),x=N(),y=S("div"),k=S("div"),M=N(),q=S("div"),A=N(),C=S("div"),O=N(),H=S("div"),L=S("div"),L.innerHTML='<div class="color-picked svelte-1polsdl"></div>',R=N(),j=S("div"),B=S("p"),F=a(e[3]),V=N(),Y=S("div"),E=S("div"),I=S("p"),P=a(e[0]),T=N(),_=S("p"),_.textContent="R",W=N(),J=S("div"),X=S("p"),Z=a(e[1]),D=N(),U=S("p"),U.textContent="G",G=N(),K=S("div"),Q=S("p"),ee=a(e[2]),te=N(),ne=S("p"),ne.textContent="B",$(i,"id","colorsquare-picker"),$(i,"class","svelte-1polsdl"),$(f,"id","colorsquare-event"),$(f,"class","svelte-1polsdl"),$(s,"class","value-gradient svelte-1polsdl"),$(l,"class","saturation-gradient svelte-1polsdl"),$(n,"class","colorsquare size svelte-1polsdl"),$(h,"id","hue-picker"),$(h,"class","svelte-1polsdl"),$(b,"id","hue-event"),$(b,"class","svelte-1polsdl"),$(g,"class","hue-selector svelte-1polsdl"),$(k,"class","alpha-value svelte-1polsdl"),$(q,"id","alpha-picker"),$(q,"class","svelte-1polsdl"),$(C,"id","alpha-event"),$(C,"class","svelte-1polsdl"),$(y,"class","alpha-selector svelte-1polsdl"),$(L,"class","color-picked-bg svelte-1polsdl"),$(B,"class","text svelte-1polsdl"),$(j,"class","hex-text-block svelte-1polsdl"),$(I,"class","text svelte-1polsdl"),$(_,"class","text-label svelte-1polsdl"),$(E,"class","rgb-text-block svelte-1polsdl"),$(X,"class","text svelte-1polsdl"),$(U,"class","text-label svelte-1polsdl"),$(J,"class","rgb-text-block svelte-1polsdl"),$(Q,"class","text svelte-1polsdl"),$(ne,"class","text-label svelte-1polsdl"),$(K,"class","rgb-text-block svelte-1polsdl"),$(Y,"class","rgb-text-div svelte-1polsdl"),$(H,"class","color-info-box svelte-1polsdl"),$(t,"class","main-container svelte-1polsdl")},m(a,r){o(a,t,r),c(t,n),c(n,l),c(l,s),c(s,i),c(s,d),c(s,f),c(t,m),c(t,g),c(g,h),c(g,v),c(g,b),c(t,x),c(t,y),c(y,k),c(y,M),c(y,q),c(y,A),c(y,C),c(t,O),c(t,H),c(H,L),c(H,R),c(H,j),c(j,B),c(B,F),c(H,V),c(H,Y),c(Y,E),c(E,I),c(I,P),c(E,T),c(E,_),c(Y,W),c(Y,J),c(J,X),c(X,Z),c(J,D),c(J,U),c(Y,G),c(Y,K),c(K,Q),c(Q,ee),c(K,te),c(K,ne),le||(se=[p(f,"mousedown",e[4]),p(f,"touchstart",e[5]),p(b,"mousedown",e[6]),p(b,"touchstart",e[7]),p(C,"mousedown",e[8]),p(C,"touchstart",e[9])],le=!0)},p(e,[t]){8&t&&r(F,e[3]),1&t&&r(P,e[0]),2&t&&r(Z,e[1]),4&t&&r(ee,e[2])},i:z,o:z,d(e){e&&u(t),le=!1,w(se)}}}function Wt(e,t,n){let l=document.querySelector(e);l&&l.removeEventListener(t,n)}function Jt(e,t,n){var l,s,o,i=Math.floor(6*e),a=6*e-i,c=n*(1-t),r=n*(1-a*t),u=n*(1-(1-a)*t);switch(i%6){case 0:l=n,s=u,o=c;break;case 1:l=r,s=n,o=c;break;case 2:l=c,s=n,o=u;break;case 3:l=c,s=r,o=n;break;case 4:l=u,s=c,o=n;break;case 5:l=n,s=c,o=r}return[Math.round(255*l),Math.round(255*s),Math.round(255*o)]}function Xt(e,t,n){let{startColor:l="#FF0000"}=t;F((()=>{document.addEventListener("mouseup",x),document.addEventListener("touchend",x),document.addEventListener("mousemove",g),document.addEventListener("touchmove",h),document.addEventListener("touchstart",p),document.addEventListener("mousedown",m),function(){let e=l.replace("#","");if(8!==e.length&&6!==e.length&&3!==e.length&&!e.match(/([^A-F0-9])/gi))return void alert("Invalid property value (startColor)");let t="";3===e.length||4===e.length?e.split("").forEach((e=>{t+=e+e})):t=e;n(3,f=t.slice(0,6)),n(0,u=parseInt(t.substring(0,2),16)),n(1,d=parseInt(t.substring(2,4),16)),n(2,$=parseInt(t.substring(4,6),16)),r=parseInt(t.substring(6,8)||"FF",16)/255,function(e,t,n,l){let s,o,r,u,d,$,f,p,m,g;s=e/255,o=t/255,r=n/255,u=Math.max(s,o,r),d=Math.min(s,o,r),$=u-d,g=u,m=0==g?0:$/u;for(let i=0;i<3;i++)if([s,o,r][i]===u){f=i;break}if(0==$)return p=0,l?(i=p,a=m,c=g,void k()):{h:p,s:m,v:g};switch(f){case 0:p=(o-r)/$%6*60/360;break;case 1:p=60*((r-s)/$+2)/360;break;case 2:p=60*((s-o)/$+4)/360}p<0&&(p+=6);if(!l)return{h:p,s:m,v:g};i=p,a=m,c=g,k()}(u,d,$,!0),function(){let e=document.querySelector("#colorsquare-picker"),t=100*a,n=100*(1-c);e.style.top=n+"%",e.style.left=t+"%"}(),function(){let e=document.querySelector("#hue-picker"),t=100*i;e.style.left=t+"%"}(),function(){let e=document.querySelector("#alpha-picker"),t=100*r;e.style.left=t+"%"}()}()}));const s=Z();let o,i=1,a=1,c=1,r=1,u=255,d=0,$=0,f="#FF0000";function p(){Wt("#alpha-event","mousedown",S),Wt("#colorsquare-event","mousedown",v),Wt("#hue-event","mousedown",w),document.removeEventListener("mouseup",x),document.removeEventListener("mousemove",g),document.removeEventListener("touchstart",p),document.removeEventListener("mousedown",m)}function m(){Wt("#alpha-event","touchstart",q),Wt("#colorsquare-event","touchstart",b),Wt("#hue-event","touchstart",y),document.removeEventListener("touchend",x),document.removeEventListener("touchmove",h),document.removeEventListener("touchstart",p),document.removeEventListener("mousedown",m)}function g(e){if(o){let t,n,l,s=e.clientX,u=e.clientY,d=o.getBoundingClientRect();switch(o.id){case"colorsquare-event":t=(s-d.x)/240*100,n=(u-d.y)/160*100,t>100?t=100:t<0&&(t=0),n>100?n=100:n<0&&(n=0),l=document.querySelector("#colorsquare-picker"),n=n.toFixed(2),t=t.toFixed(2),l.style.top=n+"%",l.style.left=t+"%",a=t/100,c=1-n/100,M();break;case"hue-event":t=(s-10-d.x)/220*100,t>100?t=100:t<0&&(t=0),t=t.toFixed(2),l=document.querySelector("#hue-picker"),l.style.left=t+"%",i=t/100,k();break;case"alpha-event":t=(s-10-d.x)/220*100,t>100?t=100:t<0&&(t=0),t=t.toFixed(2),l=document.querySelector("#alpha-picker"),l.style.left=t+"%",r=t/100,M()}}}function h(e){if(o){let t,n,l,s=e.touches[0].clientX,u=e.touches[0].clientY,d=o.getBoundingClientRect();switch(o.id){case"colorsquare-event":t=(s-d.x)/240*100,n=(u-d.y)/160*100,t>100?t=100:t<0&&(t=0),n>100?n=100:n<0&&(n=0),l=document.querySelector("#colorsquare-picker"),n=n.toFixed(2),t=t.toFixed(2),l.style.top=n+"%",l.style.left=t+"%",a=t/100,c=1-n/100,M();break;case"hue-event":t=(s-10-d.x)/220*100,t>100?t=100:t<0&&(t=0),t=t.toFixed(2),l=document.querySelector("#hue-picker"),l.style.left=t+"%",i=t/100,k();break;case"alpha-event":t=(s-10-d.x)/220*100,t>100?t=100:t<0&&(t=0),t=t.toFixed(2),l=document.querySelector("#alpha-picker"),l.style.left=t+"%",r=t/100,M()}}}function v(e){o=e.currentTarget;let t=(e.offsetX+1)/240*100,n=(e.offsetY+1)/160*100;n=n.toFixed(2),t=t.toFixed(2);let l=document.querySelector("#colorsquare-picker");l.style.top=n+"%",l.style.left=t+"%",a=t/100,c=1-n/100,M()}function b(e){o=e.currentTarget;let t=e.target.getBoundingClientRect(),n=(e.targetTouches[0].clientX-t.left+1)/240*100,l=(e.targetTouches[0].clientY-t.top+1)/160*100;l=l.toFixed(2),n=n.toFixed(2);let s=document.querySelector("#colorsquare-picker");s.style.top=l+"%",s.style.left=n+"%",a=n/100,c=1-l/100,M()}function x(e){o=null}function w(e){o=e.currentTarget;let t=(e.offsetX-9)/220*100;t=t.toFixed(2),document.querySelector("#hue-picker").style.left=t+"%",i=t/100,k()}function y(e){o=e.currentTarget;let t=e.target.getBoundingClientRect(),n=(e.targetTouches[0].clientX-t.left-9)/220*100;n=n.toFixed(2),document.querySelector("#hue-picker").style.left=n+"%",i=n/100,k()}function k(){let e=Jt(i,1,1);document.querySelector(".colorsquare").style.background=`rgba(${e[0]},${e[1]},${e[2]},1)`,M()}function M(){let e=Jt(i,a,c);n(0,u=e[0]),n(1,d=e[1]),n(2,$=e[2]),n(3,f=function(){let e=u.toString(16),t=d.toString(16),n=$.toString(16);1==e.length&&(e="0"+e);1==t.length&&(t="0"+t);1==n.length&&(n="0"+n);return("#"+e+t+n).toUpperCase()}()),document.querySelector(".color-picked").style.background=`rgba(${e[0]},${e[1]},${e[2]},${r})`,s("colorChange",{r:u,g:d,b:$,a:r})}function S(e){o=e.currentTarget;let t=(e.offsetX-9)/220*100;t=t.toFixed(2),document.querySelector("#alpha-picker").style.left=t+"%",r=t/100,M()}function q(e){o=e.currentTarget;let t=e.target.getBoundingClientRect(),n=(e.targetTouches[0].clientX-t.left-9)/220*100;n=n.toFixed(2),document.querySelector("#alpha-picker").style.left=n+"%",r=n/100,M()}return e.$$set=e=>{"startColor"in e&&n(10,l=e.startColor)},[u,d,$,f,v,b,w,y,S,q,l]}class Zt extends e{constructor(e){super(),t(this,e,Xt,_t,n,{startColor:10})}}function Dt(e,t,n){const l=e.slice();return l[23]=t[n],l}function Ut(e,t,n){const l=e.slice();return l[23]=t[n],l}function Gt(e){let t,n,l;function s(t){e[7](t)}let o={};return void 0!==e[0].text&&(o.value=e[0].text),t=new D({props:o}),E.push((()=>J(t,"value",s))),t.$on("change",e[3]),{c(){q(t.$$.fragment)},m(e,n){A(t,e,n),l=!0},p(e,l){const s={};!n&&1&l&&(n=!0,s.value=e[0].text,X((()=>n=!1))),t.$set(s)},i(e){l||(b(t.$$.fragment,e),l=!0)},o(e){x(t.$$.fragment,e),l=!1},d(e){C(t,e)}}}function Kt(e){let t,n,l;function s(t){e[8](t)}let o={};return void 0!==e[0].fontSize&&(o.value=e[0].fontSize),t=new W({props:o}),E.push((()=>J(t,"value",s))),t.$on("change",e[3]),{c(){q(t.$$.fragment)},m(e,n){A(t,e,n),l=!0},p(e,l){const s={};!n&&1&l&&(n=!0,s.value=e[0].fontSize,X((()=>n=!1))),t.$set(s)},i(e){l||(b(t.$$.fragment,e),l=!0)},o(e){x(t.$$.fragment,e),l=!1},d(e){C(t,e)}}}function Qt(e){let t,n,l,s,i,a,r,d,f;function m(t){e[9](t)}let g={readonly:!0};return void 0!==e[0].fill&&(g.value=e[0].fill),n=new U({props:g}),E.push((()=>J(n,"value",m))),n.$on("change",e[3]),{c(){t=S("div"),q(n.$$.fragment),s=N(),i=S("div"),a=S("div"),$(a,"class","indicator svelte-ce0ld0"),G(a,"background-color",e[0].fill),$(i,"class","indicator-container svelte-ce0ld0"),$(t,"class","flex")},m(l,u){o(l,t,u),A(n,t,null),c(t,s),c(t,i),c(i,a),r=!0,d||(f=p(i,"click",e[6]),d=!0)},p(e,t){const s={};!l&&1&t&&(l=!0,s.value=e[0].fill,X((()=>l=!1))),n.$set(s),(!r||1&t)&&G(a,"background-color",e[0].fill)},i(e){r||(b(n.$$.fragment,e),r=!0)},o(e){x(n.$$.fragment,e),r=!1},d(e){e&&u(t),C(n),d=!1,f()}}}function en(e){let t,n;return t=new Q({props:{text:e[23].label,value:e[23].value}}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},p:z,i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function tn(e){let t,n,l=we,i=[];for(let s=0;s<l.length;s+=1)i[s]=en(Ut(e,l,s));const a=e=>x(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=s()},m(e,l){for(let t=0;t<i.length;t+=1)i[t].m(e,l);o(e,t,l),n=!0},p(e,n){if(0&n){let s;for(l=we,s=0;s<l.length;s+=1){const o=Ut(e,l,s);i[s]?(i[s].p(o,n),b(i[s],1)):(i[s]=en(o),i[s].c(),b(i[s],1),i[s].m(t.parentNode,t))}for(L(),s=l.length;s<i.length;s+=1)a(s);R()}},i(e){if(!n){for(let e=0;e<l.length;e+=1)b(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)x(i[t]);n=!1},d(e){j(i,e),e&&u(t)}}}function nn(e){let t,n,l;function s(t){e[11](t)}let o={size:"sm",selectedIndex:we.findIndex(e[10]),$$slots:{default:[tn]},$$scope:{ctx:e}};return void 0!==e[0].align&&(o.value=e[0].align),t=new K({props:o}),E.push((()=>J(t,"value",s))),t.$on("change",e[4]),{c(){q(t.$$.fragment)},m(e,n){A(t,e,n),l=!0},p(e,l){const s={};1&l&&(s.selectedIndex=we.findIndex(e[10])),268435456&l&&(s.$$scope={dirty:l,ctx:e}),!n&&1&l&&(n=!0,s.value=e[0].align,X((()=>n=!1))),t.$set(s)},i(e){l||(b(t.$$.fragment,e),l=!0)},o(e){x(t.$$.fragment,e),l=!1},d(e){C(t,e)}}}function ln(e){let t,n;return t=new Q({props:{text:e[23].label,value:e[23].value}}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},p:z,i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function sn(e){let t,n,l=ye,i=[];for(let s=0;s<l.length;s+=1)i[s]=ln(Dt(e,l,s));const a=e=>x(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=s()},m(e,l){for(let t=0;t<i.length;t+=1)i[t].m(e,l);o(e,t,l),n=!0},p(e,n){if(0&n){let s;for(l=ye,s=0;s<l.length;s+=1){const o=Dt(e,l,s);i[s]?(i[s].p(o,n),b(i[s],1)):(i[s]=ln(o),i[s].c(),b(i[s],1),i[s].m(t.parentNode,t))}for(L(),s=l.length;s<i.length;s+=1)a(s);R()}},i(e){if(!n){for(let e=0;e<l.length;e+=1)b(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)x(i[t]);n=!1},d(e){j(i,e),e&&u(t)}}}function on(e){let t,n,l;function s(t){e[13](t)}let o={size:"sm",selectedIndex:ye.findIndex(e[12]),$$slots:{default:[sn]},$$scope:{ctx:e}};return void 0!==e[0].fontStyle&&(o.value=e[0].fontStyle),t=new K({props:o}),E.push((()=>J(t,"value",s))),t.$on("change",e[5]),{c(){q(t.$$.fragment)},m(e,n){A(t,e,n),l=!0},p(e,l){const s={};1&l&&(s.selectedIndex=ye.findIndex(e[12])),268435456&l&&(s.$$scope={dirty:l,ctx:e}),!n&&1&l&&(n=!0,s.value=e[0].fontStyle,X((()=>n=!1))),t.$set(s)},i(e){l||(b(t.$$.fragment,e),l=!0)},o(e){x(t.$$.fragment,e),l=!1},d(e){C(t,e)}}}function an(e){let t,n,l,s,i,a,c,r,d,$;return t=new qe({props:{label:"文本内容",$$slots:{default:[Gt]},$$scope:{ctx:e}}}),l=new qe({props:{label:"文本大小",$$slots:{default:[Kt]},$$scope:{ctx:e}}}),i=new qe({props:{label:"文本颜色",$$slots:{default:[Qt]},$$scope:{ctx:e}}}),c=new qe({props:{label:"文本对齐",$$slots:{default:[nn]},$$scope:{ctx:e}}}),d=new qe({props:{label:"文本样式",$$slots:{default:[on]},$$scope:{ctx:e}}}),{c(){q(t.$$.fragment),n=N(),q(l.$$.fragment),s=N(),q(i.$$.fragment),a=N(),q(c.$$.fragment),r=N(),q(d.$$.fragment)},m(e,u){A(t,e,u),o(e,n,u),A(l,e,u),o(e,s,u),A(i,e,u),o(e,a,u),A(c,e,u),o(e,r,u),A(d,e,u),$=!0},p(e,n){const s={};268435457&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s);const o={};268435457&n&&(o.$$scope={dirty:n,ctx:e}),l.$set(o);const a={};268435457&n&&(a.$$scope={dirty:n,ctx:e}),i.$set(a);const r={};268435457&n&&(r.$$scope={dirty:n,ctx:e}),c.$set(r);const u={};268435457&n&&(u.$$scope={dirty:n,ctx:e}),d.$set(u)},i(e){$||(b(t.$$.fragment,e),b(l.$$.fragment,e),b(i.$$.fragment,e),b(c.$$.fragment,e),b(d.$$.fragment,e),$=!0)},o(e){x(t.$$.fragment,e),x(l.$$.fragment,e),x(i.$$.fragment,e),x(c.$$.fragment,e),x(d.$$.fragment,e),$=!1},d(e){C(t,e),e&&u(n),C(l,e),e&&u(s),C(i,e),e&&u(a),C(c,e),e&&u(r),C(d,e)}}}function cn(e){let t,n;return t=new Se({props:{labelWidth:80,layout:"float",$$slots:{default:[an]},$$scope:{ctx:e}}}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},p(e,[n]){const l={};268435457&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function rn(e,t,n){let l,s;const o=O(),{selected:i,widgets:a,dispatch:c,stage:r}=ue((e=>e.editor));let u;T(e,i,(e=>n(16,s=e))),T(e,r,(e=>n(15,l=e)));let d={fontSize:12,fontFamily:"",fontStyle:"",text:"",align:"",fill:""};function $(){const e=_(Object.keys(d),u.property);JSON.stringify(d)!==JSON.stringify(e)&&(!function(){const[e]=s;if(!e)return;const t=l.findOne(`#${e}`);Object.entries(d).forEach((([e,n])=>{t.getAttr(e)!==n&&t.setAttr(e,n)}))}(),c("updateWidget",{id:u.id,textProperty:Object.assign(Object.assign({},u.textProperty),d)}))}a.subscribe((e=>{const t=function(e){const t=e.find((e=>1===s.length&&e.id===s[0]));if(!t||"Text"===l.findOne(`#${t.id}`).getClassName())return t}(e);u=t,t&&function(){const e=_(Object.keys(d),u.textProperty);JSON.stringify(d)!==JSON.stringify(e)&&n(0,d=e)}()}));return[d,i,r,$,function({detail:e}){n(0,d.align=we[e].value,d),$()},function({detail:e}){n(0,d.fontStyle=ye[e].value,d),$()},function(){o.open({component:Zt,header:!1,title:"选择颜色",maskClosable:!0,props:{startColor:d.fill},event:{colorChange:({detail:{r:e,g:t,b:l,a:s}})=>{const o=e=>e.toString(16).padStart(2,"0"),i=o(e),a=o(t),c=o(l),r=o(Math.round(255*s));n(0,d.fill=`#${i}${a}${c}${r}`,d),$()}}})},function(t){e.$$.not_equal(d.text,t)&&(d.text=t,n(0,d))},function(t){e.$$.not_equal(d.fontSize,t)&&(d.fontSize=t,n(0,d))},function(t){e.$$.not_equal(d.fill,t)&&(d.fill=t,n(0,d))},e=>e.value===d.align,function(t){e.$$.not_equal(d.align,t)&&(d.align=t,n(0,d))},e=>e.value===d.fontStyle,function(t){e.$$.not_equal(d.fontStyle,t)&&(d.fontStyle=t,n(0,d))}]}class un extends e{constructor(e){super(),t(this,e,rn,cn,n,{})}}function dn(e){let t,n,s,i,a,r,d,f,v;const w=e[4].default,y=l(w,e,e[3],null);return{c(){t=S("div"),n=S("div"),s=S("input"),a=N(),r=S("div"),y&&y.c(),$(s,"class","upload-input svelte-1qfj8ms"),$(s,"type","file"),$(s,"accept",e[1]),s.multiple=i="multiple"===e[0],$(n,"class","upload-wrapper svelte-1qfj8ms"),$(r,"class","upload-content"),$(t,"class","upload svelte-1qfj8ms")},m(l,i){o(l,t,i),c(t,n),c(n,s),c(t,a),c(t,r),y&&y.m(r,null),d=!0,f||(v=p(s,"change",e[2]),f=!0)},p(e,[t]){(!d||2&t)&&$(s,"accept",e[1]),(!d||1&t&&i!==(i="multiple"===e[0]))&&(s.multiple=i),y&&y.p&&(!d||8&t)&&m(y,w,e,e[3],d?h(w,e[3],t,null):g(e[3]),null)},i(e){d||(b(y,e),d=!0)},o(e){x(y,e),d=!1},d(e){e&&u(t),y&&y.d(e),f=!1,v()}}}function $n(e,t,n){let{$$slots:l={},$$scope:s}=t,{mode:o="single"}=t,{type:i="image/*"}=t;const a=Z();return e.$$set=e=>{"mode"in e&&n(0,o=e.mode),"type"in e&&n(1,i=e.type),"$$scope"in e&&n(3,s=e.$$scope)},[o,i,function({target:e}){let t=e.files;if("single"===o){const[e]=t;t=e}a("upload",t)},s,l]}class fn extends e{constructor(e){super(),t(this,e,$n,dn,n,{mode:0,type:1})}}function pn(e){let t,n;return{c(){t=S("img"),$(t,"class","w-full"),$(t,"alt",""),ee(t.src,n=e[0].url)||$(t,"src",n)},m(e,n){o(e,t,n)},p(e,l){1&l&&!ee(t.src,n=e[0].url)&&$(t,"src",n)},d(e){e&&u(t)}}}function mn(e){let t,n;return t=new fn({props:{$$slots:{default:[pn]},$$scope:{ctx:e}}}),t.$on("upload",e[3]),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},p(e,n){const l={};32769&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function gn(e){let t,n;return t=new qe({props:{label:"图片",$$slots:{default:[mn]},$$scope:{ctx:e}}}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},p(e,n){const l={};32769&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function hn(e){let t,n;return t=new Se({props:{labelWidth:80,layout:"float",$$slots:{default:[gn]},$$scope:{ctx:e}}}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},p(e,[n]){const l={};32769&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function vn(e,t,n){let l,s;O();const{selected:o,widgets:i,dispatch:a,stage:c}=ue((e=>e.editor));let r;T(e,o,(e=>n(6,s=e))),T(e,c,(e=>n(5,l=e)));let u={url:""};function d(){const e=_(Object.keys(u),r.property);JSON.stringify(u)!==JSON.stringify(e)&&(!function(){const e={url:$},[t]=s;if(!t)return;const n=l.findOne(`#${t}`);Object.entries(u).forEach((([t,l])=>{const s=e[t];s?s(n,l):n.getAttr(t)!==l&&n.setAttr(t,l)}))}(),a("updateWidget",{id:r.id,imageProperty:Object.assign(Object.assign({},r.imageProperty),u)}))}function $(e,t){const n=new Image;n.onload=()=>{e.image(n),e.width(n.width),e.height(n.height),a("updateWidget",{id:r.id,property:Object.assign(Object.assign({},r.property),{width:n.width,height:n.height})})},n.src=t}return i.subscribe((e=>{const t=function(e){const t=e.find((e=>1===s.length&&e.id===s[0]));if(!t||"Image"===l.findOne(`#${t.id}`).getClassName())return t}(e);r=t,t&&function(){const e=_(Object.keys(u),r.imageProperty);JSON.stringify(u)!==JSON.stringify(e)&&n(0,u=e)}()})),[u,o,c,function({detail:e}){re.get().uploadFile({cloudPath:`images/${e.name}`,filePath:e}).then((({download_url:e})=>{n(0,u.url=e,u),d()}))}]}class bn extends e{constructor(e){super(),t(this,e,vn,hn,n,{})}}function xn(e){let t,n;return t=new ne({props:{title:"基础属性",open:!0,$$slots:{default:[wn]},$$scope:{ctx:e}}}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function wn(e){let t,n;return t=new Tt({}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function yn(e){let t,n;return t=new ne({props:{title:"文本属性",open:!0,$$slots:{default:[kn]},$$scope:{ctx:e}}}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function kn(e){let t,n;return t=new un({}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Mn(e){let t,n;return t=new ne({props:{title:"图片属性",open:!0,$$slots:{default:[Sn]},$$scope:{ctx:e}}}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Sn(e){let t,n;return t=new bn({}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function qn(e){let t,n,l,i,a=e[0]&&xn(e),c="Text"===e[0]&&yn(e),r="Image"===e[0]&&Mn(e);return{c(){a&&a.c(),t=N(),c&&c.c(),n=N(),r&&r.c(),l=s()},m(e,s){a&&a.m(e,s),o(e,t,s),c&&c.m(e,s),o(e,n,s),r&&r.m(e,s),o(e,l,s),i=!0},p(e,s){e[0]?a?1&s&&b(a,1):(a=xn(e),a.c(),b(a,1),a.m(t.parentNode,t)):a&&(L(),x(a,1,1,(()=>{a=null})),R()),"Text"===e[0]?c?1&s&&b(c,1):(c=yn(e),c.c(),b(c,1),c.m(n.parentNode,n)):c&&(L(),x(c,1,1,(()=>{c=null})),R()),"Image"===e[0]?r?1&s&&b(r,1):(r=Mn(e),r.c(),b(r,1),r.m(l.parentNode,l)):r&&(L(),x(r,1,1,(()=>{r=null})),R())},i(e){i||(b(a),b(c),b(r),i=!0)},o(e){x(a),x(c),x(r),i=!1},d(e){a&&a.d(e),e&&u(t),c&&c.d(e),e&&u(n),r&&r.d(e),e&&u(l)}}}function An(e){let t,n,l;return n=new te({props:{size:"sm",$$slots:{default:[qn]},$$scope:{ctx:e}}}),{c(){t=S("div"),q(n.$$.fragment),$(t,"class","widget-property")},m(e,s){o(e,t,s),A(n,t,null),l=!0},p(e,[t]){const l={};17&t&&(l.$$scope={dirty:t,ctx:e}),n.$set(l)},i(e){l||(b(n.$$.fragment,e),l=!0)},o(e){x(n.$$.fragment,e),l=!1},d(e){e&&u(t),C(n)}}}function zn(e,t,n){let l;const{selected:s,stage:o}=ue((e=>e.editor));T(e,o,(e=>n(2,l=e)));let i="";return s.subscribe((e=>{if(1===e.length){const t=l.findOne(`#${e[0]}`).getClassName();n(0,i=t)}else n(0,i="")})),[i,o]}class Cn extends e{constructor(e){super(),t(this,e,zn,An,n,{})}}function On(e){let t,n,l;function s(t){e[4](t)}let o={};return void 0!==e[0].title&&(o.value=e[0].title),t=new U({props:o}),E.push((()=>J(t,"value",s))),t.$on("change",e[3]),{c(){q(t.$$.fragment)},m(e,n){A(t,e,n),l=!0},p(e,l){const s={};!n&&1&l&&(n=!0,s.value=e[0].title,X((()=>n=!1))),t.$set(s)},i(e){l||(b(t.$$.fragment,e),l=!0)},o(e){x(t.$$.fragment,e),l=!1},d(e){C(t,e)}}}function Nn(e){let t;return{c(){t=S("div"),t.textContent="上传背景图片",$(t,"class","image-uploader w-full h-10 flex items-center justify-center svelte-1vto05f")},m(e,n){o(e,t,n)},p:z,d(e){e&&u(t)}}}function Hn(e){let t,n;return{c(){t=S("img"),$(t,"class","w-full"),$(t,"alt",""),ee(t.src,n=e[0].background)||$(t,"src",n)},m(e,n){o(e,t,n)},p(e,l){1&l&&!ee(t.src,n=e[0].background)&&$(t,"src",n)},d(e){e&&u(t)}}}function Ln(e){let t;function n(e,t){return e[0].background?Hn:Nn}let l=n(e),i=l(e);return{c(){i.c(),t=s()},m(e,n){i.m(e,n),o(e,t,n)},p(e,s){l===(l=n(e))&&i?i.p(e,s):(i.d(1),i=l(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&u(t)}}}function Rn(e){let t,n;return t=new fn({props:{$$slots:{default:[Ln]},$$scope:{ctx:e}}}),t.$on("upload",e[2]),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},p(e,n){const l={};129&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function jn(e){let t,n,l,s;return t=new qe({props:{label:"页面标题",$$slots:{default:[On]},$$scope:{ctx:e}}}),l=new qe({props:{label:"页面背景",$$slots:{default:[Rn]},$$scope:{ctx:e}}}),{c(){q(t.$$.fragment),n=N(),q(l.$$.fragment)},m(e,i){A(t,e,i),o(e,n,i),A(l,e,i),s=!0},p(e,n){const s={};129&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s);const o={};129&n&&(o.$$scope={dirty:n,ctx:e}),l.$set(o)},i(e){s||(b(t.$$.fragment,e),b(l.$$.fragment,e),s=!0)},o(e){x(t.$$.fragment,e),x(l.$$.fragment,e),s=!1},d(e){C(t,e),e&&u(n),C(l,e)}}}function Bn(e){let t,n;return t=new Se({props:{labelWidth:80,layout:"float",$$slots:{default:[jn]},$$scope:{ctx:e}}}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},p(e,[n]){const l={};129&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Fn(e,t,n){let l;const{dispatch:s,page:o}=ue((e=>e.editor));T(e,o,(e=>n(5,l=e)));let i={background:l.background,title:l.title};return o.subscribe((e=>{e.background!==i.background&&n(0,i.background=e.background,i),e.title!==i.title&&n(0,i.title=e.title,i)})),F((()=>{})),[i,o,function({detail:e}){re.get().uploadFile({cloudPath:`images/${e.name}`,filePath:e}).then((({download_url:e})=>{n(0,i.background=e,i),s("updateBackground",e)}))},function(){s("updatePage",Object.assign(Object.assign({},l),{title:i.title}))},function(t){e.$$.not_equal(i.title,t)&&(i.title=t,n(0,i))}]}class Vn extends e{constructor(e){super(),t(this,e,Fn,Bn,n,{})}}function Yn(e){let t,n,l,s,i,a;return t=new se({props:{label:"属性"}}),l=new se({props:{label:"页面"}}),i=new se({props:{label:"行为"}}),{c(){q(t.$$.fragment),n=N(),q(l.$$.fragment),s=N(),q(i.$$.fragment)},m(e,c){A(t,e,c),o(e,n,c),A(l,e,c),o(e,s,c),A(i,e,c),a=!0},p:z,i(e){a||(b(t.$$.fragment,e),b(l.$$.fragment,e),b(i.$$.fragment,e),a=!0)},o(e){x(t.$$.fragment,e),x(l.$$.fragment,e),x(i.$$.fragment,e),a=!1},d(e){C(t,e),e&&u(n),C(l,e),e&&u(s),C(i,e)}}}function En(e){let t,n;return t=new Cn({}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function In(e){let t,n,l=1===e[0].length&&En();return{c(){l&&l.c(),t=s()},m(e,s){l&&l.m(e,s),o(e,t,s),n=!0},p(e,n){1===e[0].length?l?1&n&&b(l,1):(l=En(),l.c(),b(l,1),l.m(t.parentNode,t)):l&&(L(),x(l,1,1,(()=>{l=null})),R())},i(e){n||(b(l),n=!0)},o(e){x(l),n=!1},d(e){l&&l.d(e),e&&u(t)}}}function Pn(e){let t,n;return t=new Vn({}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function Tn(e){let t,n;return t=new Vn({}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function _n(e){let t,n,l,s,i,a,r;return n=new oe({props:{$$slots:{default:[In]},$$scope:{ctx:e}}}),s=new oe({props:{$$slots:{default:[Pn]},$$scope:{ctx:e}}}),a=new oe({props:{$$slots:{default:[Tn]},$$scope:{ctx:e}}}),{c(){t=S("div"),q(n.$$.fragment),l=N(),q(s.$$.fragment),i=N(),q(a.$$.fragment),$(t,"slot","content")},m(e,u){o(e,t,u),A(n,t,null),c(t,l),A(s,t,null),c(t,i),A(a,t,null),r=!0},p(e,t){const l={};5&t&&(l.$$scope={dirty:t,ctx:e}),n.$set(l);const o={};4&t&&(o.$$scope={dirty:t,ctx:e}),s.$set(o);const i={};4&t&&(i.$$scope={dirty:t,ctx:e}),a.$set(i)},i(e){r||(b(n.$$.fragment,e),b(s.$$.fragment,e),b(a.$$.fragment,e),r=!0)},o(e){x(n.$$.fragment,e),x(s.$$.fragment,e),x(a.$$.fragment,e),r=!1},d(e){e&&u(t),C(n),C(s),C(a)}}}function Wn(e){let t,n,l,s,i;return n=new le({props:{$$slots:{content:[_n],default:[Yn]},$$scope:{ctx:e}}}),{c(){t=S("div"),q(n.$$.fragment),$(t,"class","property-container svelte-1ikntx1")},m(e,a){o(e,t,a),A(n,t,null),l=!0,s||(i=p(t,"keydown",Jn),s=!0)},p(e,[t]){const l={};5&t&&(l.$$scope={dirty:t,ctx:e}),n.$set(l)},i(e){l||(b(n.$$.fragment,e),l=!0)},o(e){x(n.$$.fragment,e),l=!1},d(e){e&&u(t),C(n),s=!1,i()}}}const Jn=e=>e.stopPropagation();function Xn(e,t,n){let l;const{selected:s}=ue((e=>e.editor));return T(e,s,(e=>n(0,l=e))),[l,s]}class Zn extends e{constructor(e){super(),t(this,e,Xn,Wn,n,{})}}function Dn(e){let t,n,l,s,i,a,r,d,f,p,m,g,h;return l=new Ke({}),a=new lt({}),f=new Lt({}),g=new Zn({}),{c(){t=S("div"),n=S("div"),q(l.$$.fragment),s=N(),i=S("div"),q(a.$$.fragment),r=N(),d=S("div"),q(f.$$.fragment),p=N(),m=S("div"),q(g.$$.fragment),$(n,"class","editor-sidebar relative svelte-evxple"),$(i,"class","editor-content relative svelte-evxple"),$(d,"class","editor-tool relative svelte-evxple"),$(m,"class","editor-property relative svelte-evxple"),$(t,"class","editor-container absolute inset-0 svelte-evxple")},m(e,u){o(e,t,u),c(t,n),A(l,n,null),c(t,s),c(t,i),A(a,i,null),c(t,r),c(t,d),A(f,d,null),c(t,p),c(t,m),A(g,m,null),h=!0},i(e){h||(b(l.$$.fragment,e),b(a.$$.fragment,e),b(f.$$.fragment,e),b(g.$$.fragment,e),h=!0)},o(e){x(l.$$.fragment,e),x(a.$$.fragment,e),x(f.$$.fragment,e),x(g.$$.fragment,e),h=!1},d(e){e&&u(t),C(l),C(a),C(f),C(g)}}}function Un(e){let t;return{c(){t=a("返回")},m(e,n){o(e,t,n)},d(e){e&&u(t)}}}function Gn(e){let t;return{c(){t=a("保存")},m(e,n){o(e,t,n)},d(e){e&&u(t)}}}function Kn(e){let t,n,l,s;return t=new ie({props:{kind:"secondary",size:"small",$$slots:{default:[Un]},$$scope:{ctx:e}}}),t.$on("click",e[3]),l=new ie({props:{size:"small",$$slots:{default:[Gn]},$$scope:{ctx:e}}}),l.$on("click",e[2]),{c(){q(t.$$.fragment),n=N(),q(l.$$.fragment)},m(e,i){A(t,e,i),o(e,n,i),A(l,e,i),s=!0},p(e,n){const s={};512&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s);const o={};512&n&&(o.$$scope={dirty:n,ctx:e}),l.$set(o)},i(e){s||(b(t.$$.fragment,e),b(l.$$.fragment,e),s=!0)},o(e){x(t.$$.fragment,e),x(l.$$.fragment,e),s=!1},d(e){C(t,e),e&&u(n),C(l,e)}}}function Qn(e){let t,n;return t=new ce({props:{title:"编辑中心",layout:"default",$$slots:{action:[Kn],default:[Dn]},$$scope:{ctx:e}}}),{c(){q(t.$$.fragment)},m(e,l){A(t,e,l),n=!0},p(e,[n]){const l={};512&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){x(t.$$.fragment,e),n=!1},d(e){C(t,e)}}}function el(e,t,n){let l,s,{router:o}=t;const{page:i,widgets:a,dispatch:c}=ue((e=>e.editor));return T(e,i,(e=>n(6,s=e))),T(e,a,(e=>n(5,l=e))),F((()=>{const{id:e}=o.currentRoute.query;e&&function(e){re.get().database().collection("pages").doc(e).get().then((({data:e})=>{const[t]=e;t&&(c("updatePage",t.page),c("updateWidgets",ae(Me,t.widgets)),setTimeout((()=>{c("renderStage")}),500))}))}(e)})),e.$$set=e=>{"router"in e&&n(4,o=e.router)},[i,a,function(){const e=re.get().database(),{id:t}=o.currentRoute.query;(t?()=>e.collection("pages").doc(t).update({page:s,widgets:l}):()=>e.collection("pages").add({page:s,widgets:l}))().then((()=>{ke({type:"success",message:"保存成功"}),o.push("/page-center")})).catch((()=>{ke({type:"error",message:"保存失败"})}))},function(){o.push("/page-center")},o]}class tl extends e{constructor(e){super(),t(this,e,el,Qn,n,{router:4})}}export{tl as default};
