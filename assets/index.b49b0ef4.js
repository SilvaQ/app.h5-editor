var t=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(e,n,o)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,i=(t,e)=>{for(var n in e||(e={}))r.call(e,n)&&a(t,n,e[n]);if(o)for(var n of o(e))s.call(e,n)&&a(t,n,e[n]);return t},c=(t,o)=>e(t,n(o));import{T as l,c as d,K as u,o as f,a as g,p,s as h,b as m,d as w,e as y,f as $,u as b,g as v,S as x,i as k,h as O,R as E,j as P,m as S,n as j,t as M,k as I,l as L,q as z,r as C,v as _,w as A,x as T,y as X,z as B,A as W,B as Y,C as D,D as N,E as R,F as V,G as U,H,I as F,J as K,L as Z,M as q,N as G,O as J,P as Q,Q as tt,U as et,V as nt,W as ot,X as rt,Y as st,Z as at,_ as it,$ as ct,a0 as lt,a1 as dt,a2 as ut,a3 as ft,a4 as gt,a5 as pt,a6 as ht}from"./vendor.6ac7b93b.js";const mt={ready:!1,layout:"default"},wt={keys:Object.keys(mt),module:t=>{t.on("@init",(()=>mt)),t.on("ready",(()=>({ready:!0}))),t.on("updateLayout",((t,e)=>c(i({},t),{layout:e})))}};var yt,$t,bt,vt,xt,kt;($t=yt||(yt={})).image="IMAGE",$t.text="TEXT",(bt||(bt={})).username="USERNAME",(vt||(vt={})).input="input",(kt=xt||(xt={})).stage="stage",kt.widget="widget";const Ot=[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}];class Et{}class Pt{}var St=Object.defineProperty,jt=Object.getOwnPropertyDescriptor;class Mt{get id(){return this.property.id}}((t,e,n,o)=>{for(var r,s=o>1?void 0:o?jt(e,n):e,a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o?r(e,n,s):r(s))||s);o&&s&&St(e,n,s)})([l((()=>Pt))],Mt.prototype,"property",2);var It=Object.defineProperty,Lt=Object.getOwnPropertyDescriptor;class zt extends Mt{constructor(){super(...arguments),this.widgetType=yt.image}}((t,e,n,o)=>{for(var r,s=o>1?void 0:o?Lt(e,n):e,a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o?r(e,n,s):r(s))||s);o&&s&&It(e,n,s)})([l((()=>Et))],zt.prototype,"imageProperty",2);class Ct{}var _t=Object.defineProperty,At=Object.getOwnPropertyDescriptor;class Tt extends Mt{constructor(){super(...arguments),this.widgetType=yt.text}}((t,e,n,o)=>{for(var r,s=o>1?void 0:o?At(e,n):e,a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o?r(e,n,s):r(s))||s);o&&s&&_t(e,n,s)})([l((()=>Ct))],Tt.prototype,"textProperty",2);const Xt={[yt.text]:function(t="请输入文本"){const e=new Tt;return e.property=function(){const t=new Pt;return t.id=Math.random().toString(32).slice(2),t.height=60,t.width=200,t.opacity=1,t.rotation=0,t.scaleX=1,t.scaleY=1,t.x=0,t.y=0,t}(),e.textProperty=function(t){const e=new Ct;return e.fill="#000",e.fontFamily="Arial",e.align="left",e.fontSize=32,e.fontStyle="",e.text=t,e}(t),e},[yt.image]:function(t){const e=new zt;return e.property=function(){const t=new Pt;return t.id=Math.random().toString(32).slice(2),t.height=100,t.width=100,t.opacity=1,t.rotation=0,t.scaleX=1,t.scaleY=1,t.x=0,t.y=0,t}(),e.imageProperty=function(t){const e=new Et;return e.url=t,e}(t),e}};function Bt(t,e){const n=Xt[t];if(!n)throw Error("不存在该组件类型");return n(e)}function Wt(t){const e=d(t);return e.property.id=Math.random().toString(32).slice(2),e}const Yt={cloudbase:{env:"test-4glnlr77348551c8",region:"ap-shanghai"},editor:{content:{scale:3,width:1080,height:1920}}},Dt={Text:function(t){t.on(vt.input,(()=>{!function(t,e){const{widgets:n}=ve.get(),o=n.find((e=>e.id===t.id()));if(!o)return;ve.dispatch("updateWidget",{id:o.id,textProperty:i(i({},o.textProperty),e)})}(t,{text:t.text()})}))},Image:function(){}};function Nt(t,e){const{widgets:n}=ve.get(),o=n.find((e=>e.id===t.id()));o&&ve.dispatch("updateWidget",{id:o.id,property:i(i({},o.property),e)})}function Rt(t){const e=t.container(),{content:n}=Ut(),{width:o,height:r}=Yt.editor.content;t.width(e.offsetWidth),t.height(e.offsetHeight),n.x(e.offsetWidth/2-o*n.scaleX()/2),n.y(e.offsetHeight/2-r*n.scaleY()/2),n.draw()}function Vt(t){const e=t.clientWidth,n=t.clientHeight,o=new u.Stage({container:t,width:e,height:n}),{content:r,background:s}=function(t){const{width:e,height:n,scale:o}=Yt.editor.content,r=new u.Layer({name:"content",x:t.width()/2-e/2,y:t.height()/2-n/2,scaleX:1/o,scaleY:1/o,clip:{x:0,y:0,width:e,height:n}});ve.dispatch("updateSize",{width:e,height:n});const s=new u.Layer({name:"background"});return{content:r,background:s}}(o);return o.add(r),o.add(s),r.draw(),s.draw(),ve.dispatch("updateStage",o),o}function Ut(){const{stage:t}=ve.get();if(!t)throw"请初始化Stage";const e=t.getLayers();return{content:e.find((t=>"content"===t.name())),background:e.find((t=>"background"===t.name()))}}const Ht=["background"],Ft={Text:["top-center","bottom-center","middle-right","middle-left"],Image:["top-left","top-right","bottom-left","bottom-right"],default:["top-left","top-right","bottom-left","bottom-right"]};function Kt(t){return t.find("Transformer").find((t=>"selected"===t.name()))}function Zt(t,e){return t.find("Transformer").find((t=>t.nodes().includes(e)))}function qt(t,e,n=!1){const o=new u.Transformer({keepRatio:!0,resizeEnabled:n,rotateEnabled:n});if(1===e.length){const[t]=e;o.enabledAnchors((r=t.getClassName(),Ft[r]||Ft.default))}var r;return o.nodes(e),t.add(o),t.draw(),(n||e.length>1)&&o.name("selected"),o}function Gt(t){t.find("Transformer").forEach((t=>t.destroy())),t.draw()}function Jt(t){const{content:e}=Ut();t.on("mousedown",(n=>{if(n.target===t)return Gt(t),void ve.dispatch("updateSelected",[]);return e.findOne((t=>Ht.includes(n.target.name())))?(Gt(t),void ve.dispatch("updateSelected",[])):void 0}))}function Qt(t){const e=t.getLayer(),n=e.getLayer(),o=n.offsetX()+t.absolutePosition().x,r=n.offsetY()+t.absolutePosition().y,s=document.createElement("textarea");document.getElementById("canvas-container").appendChild(s),s.value=t.text(),s.style.position="absolute",s.style.top=r+"px",s.style.left=o+"px",s.style.width=t.width()-2*t.padding()+"px",s.style.height=t.height()-2*t.padding()+5+"px",s.style.fontSize=`${t.fontSize()}px`,s.style.border="none",s.style.padding="0px",s.style.margin="0px",s.style.overflow="hidden",s.style.background="none",s.style.outline="none",s.style.resize="none",s.style.wordBreak="break-all",s.style.fontFamily=t.fontFamily(),s.style.transformOrigin="left top",s.style.textAlign=t.align(),s.style.color=t.fill(),s.style.transform=`rotateZ(${t.rotation()}deg) scale(${e.scaleX()})`,s.focus(),s.addEventListener("keydown",(function(t){"Enter"!==t.key||t.shiftKey||s.blur()})),s.addEventListener("blur",(function(e){t.text(s.value),t.fire(vt.input),s.parentNode.removeChild(s),t.show()}))}const te={[yt.text]:function(t){const{preview:e}=ve.get(),n=new u.Text(i(i({},f(["zIndex"],t.property)),t.textProperty));return e||function(t){t.on("dblclick dbltap",(()=>{t.hide(),Qt(t)}))}(n),function(t){t.on("transform",(e=>{t.setAttrs({width:Math.max(t.width()*t.scaleX(),100),height:Math.max(t.height()*t.scaleY(),50),scaleX:1,scaleY:1})}))}(n),n},[yt.image]:function(t){const e=new Image;e.crossOrigin="Anonymous";const n=new u.Image(c(i({},f(["zIndex"],t.property)),{image:e}));return e.onload=()=>{},e.src=t.imageProperty.url,function(t){t.on("transform",(e=>{t.setAttrs({width:Math.max(t.width()*t.scaleX()),height:Math.max(t.height()*t.scaleY()),scaleX:1,scaleY:1})}))}(n),n}};function ee(t){const e=te[t.widgetType],{preview:n}=ve.get();if(!e)throw Error("组件类型不存在");const o=e(t);return o.draggable(!n),o}function ne(t,e,n=!0){const{content:o,background:r}=Ut(),{preview:s}=ve.get();s||function(t,e){const{background:n}=Ut();e.on("mouseenter",(o=>{Zt(t,e)||qt(n,[e],!1)})),e.on("mouseout",(n=>{const o=Zt(t,e);o&&"selected"!==o.name()&&o.destroy()})),e.on("mousedown",(o=>{const r=Kt(t),s=Zt(t,e);if(s&&s===r)return;const a=o.evt.ctrlKey&&r?[...r.nodes(),e]:[e];Gt(t),qt(n,a,1===a.length),ve.dispatch("updateSelected",a.map((t=>t.id())))}))}(t,e),Gt(t),n&&!s&&qt(r,[e],!0),function(t){t.on("transformend",(()=>{Nt(t,{x:Math.round(t.x()),y:Math.round(t.y()),width:Math.round(t.width()),height:Math.round(t.height()),scaleX:Math.round(t.scaleX()),scaleY:Math.round(t.scaleY()),rotation:Math.round(t.rotation())})})),t.on("dragend",(()=>{Nt(t,{x:Math.round(t.x()),y:Math.round(t.y())})}));const e=Dt[t.getClassName()];e&&e(t)}(e),o.add(e)}function oe(t){const e=Kt(t);if(!e)return;return e.getNodes().filter((t=>t.visible()))}function re(){const{content:t}=Ut(),{width:e,height:n}=Yt.editor.content,o=new u.Rect({width:e,height:n,fill:"#fff",name:"background"});t.add(o)}function se(t){const e=g(t.widgets);t.stage.width(),t.stage.height();return{widgets:e,selected:[...t.selected],page:{size:{width:t.stage.width(),height:t.stage.height()},background:t.page.background,title:t.page.title}}}function ae(t){return{widgets:p(Mt,t.widgets),page:i({},t.page),selected:t.selected}}function ie(t){return t.history.forward=[],t.history.backward.push(se(t)),{history:{forward:t.history.forward,backward:t.history.backward}}}function ce(t){const e=t.history.backward.pop();if(e)return c(i({},ae(e)),{history:{backward:[...t.history.backward],forward:[...t.history.forward,se(t)]}})}function le(t){const e=t.history.forward.pop();if(e)return c(i({},ae(e)),{history:{backward:[...t.history.backward,se(t)],forward:[...t.history.forward]}})}const de={stage:void 0,page:{size:{width:Yt.editor.content.width,height:Yt.editor.content.height},title:"未命名",background:""},selected:[],copied:[],zoom:1,widgets:[],history:{backward:[],forward:[]},preview:!1},ue={keys:Object.keys(de),module:t=>{t.on("@init",(()=>de)),t.on("updateStage",((t,e)=>c(i({},t),{stage:e}))),t.on("updateSize",((t,e)=>c(i({},t),{size:e}))),t.on("updatePreview",((t,e)=>c(i({},t),{preview:e}))),t.on("updatePage",((t,e)=>c(i({},t),{page:e}))),t.on("updateWidgets",((t,e)=>c(i({},t),{widgets:e}))),t.on("updateSelected",((t,e)=>c(i({},t),{selected:e}))),t.on("updateCopied",((t,e)=>c(i({},t),{copied:e}))),t.on("updateWidget",ke(ge,{before:[ie]})),t.on("updateZoom",ke(fe)),t.on("backward",ke(ce,{after:[ye]})),t.on("forward",ke(le,{after:[ye]})),t.on("createWidget",ke(pe,{before:[ie]})),t.on("deleteWidget",ke(he,{before:[ie]})),t.on("updateBackground",ke(me,{before:[ie]})),t.on("updateZindex",ke(we,{before:[ie]})),t.on("renderStage",(t=>(ye(t),t)))}};function fe(t,e){const{scale:n}=Yt.editor.content,{content:o}=Ut();return o.scaleX(1/n*e),o.scaleY(1/n*e),Rt(t.stage),{zoom:e}}function ge(t,e){const n=t.widgets.find((t=>t.id===e.id));return n&&Object.entries(e).forEach((([t,o])=>{"id"!==t&&(n[t]=i(i({},n[t]),e[t]))})),{widgets:t.widgets}}function pe(t,e){const{stage:n,widgets:o}=t,r=e instanceof Mt?e:Bt(e),s=ee(r);return ne(n,s),{widgets:[...o,r],selected:[s.id()]}}function he(t,e){const{stage:n}=t,o=e instanceof Array?e:[e];return o.forEach((t=>{!function(t,e){const{content:n}=Ut(),[o]=n.getChildren((t=>t.id()===e));o&&(o.destroy(),Gt(t))}(n,t)})),{selected:[],widgets:t.widgets.filter((t=>!o.includes[t.id]))}}function me(t,e){const{stage:n,page:o}=t,r=n.findOne(".background"),s=new Image;return s.onload=()=>{r.fill(""),r.fillPatternImage(s)},s.src=e,{page:{size:t.page.size,title:t.page.title,background:e}}}function we(t){const{widgets:e,stage:n}=t;return{widgets:e.map((t=>{const e=n.findOne(`#${t.id}`);return t.property.zIndex=e.zIndex(),t}))}}function ye(t){const{stage:e,widgets:n,selected:o,page:r,preview:s}=t,{content:a,background:i}=Ut();var c;if(a.destroyChildren(),Gt(e),re(),(c=h([m(w(["property","zIndex"]))])(n),c.map((t=>ee(t)))).forEach((t=>ne(e,t,!1))),!s&&o.length&&qt(i,o.map((t=>e.findOne(`#${t}`))),1===o.length),r&&r.background){const t=e.findOne(".background"),n=new Image;n.crossOrigin="Anonymous",n.onload=()=>{t.fill(""),t.fillPatternImage(n)},n.src=r.background}}const $e={userid:"",username:""},be={user:{keys:Object.keys($e),module:t=>{t.on("@init",(()=>$e)),t.on("login",((t,e)=>c(i({},t),{userid:e,username:e+":name"})))},persist:["userid"]},app:wt,editor:ue},ve=y([...Object.values(be).map((t=>t.module)),$(Object.values(be).filter((t=>t.persist)).map((t=>t.persist)).flat())]);function xe(t){return b(...t(be).keys)}function ke(t,e={after:[],before:[]}){return(n,o)=>{const{before:r=[],after:s=[]}=e,a=r.reduce(((t,e)=>i(i({},t),e(t)||{})),n),c=i(i({},n),t(n,o)),l=s.reduce(((t,e)=>i(i({},t),e(t)||{})),c);return i(i(i({},a),c),l)}}const Oe={"interactive-01":"#1890ff","interactive-04":"#1890ff","layer-selected-inverse":"#1890ff"};function Ee(t){let e,n;return e=new E({}),{c(){P(e.$$.fragment)},m(t,o){S(e,t,o),n=!0},p:j,i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}let Pe;const Se={},je=function(t,e){if(!e||0===e.length)return t();if(void 0===Pe){const t=document.createElement("link").relList;Pe=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if((t=`/app.h5-editor/${t}`)in Se)return;Se[t]=!0;const e=t.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const o=document.createElement("link");return o.rel=e?"stylesheet":Pe,e||(o.as="script",o.crossOrigin=""),o.href=t,document.head.appendChild(o),e?new Promise(((t,e)=>{o.addEventListener("load",t),o.addEventListener("error",e)})):void 0}))).then((()=>t()))};function Me(t){let e,n,o=[{class:"icon"},{viewBox:"0 0 1024 1024"},{xmlns:"http://www.w3.org/2000/svg"},{width:"200"},{height:"200"},t[0]],r={};for(let s=0;s<o.length;s+=1)r=z(r,o[s]);return{c(){e=C("svg"),n=C("path"),this.h()},l(t){e=_(t,"svg",{class:!0,viewBox:!0,xmlns:!0,width:!0,height:!0},1);var o=A(e);n=_(o,"path",{d:!0,fill:!0},1),A(n).forEach(T),o.forEach(T),this.h()},h(){X(n,"d","m544 82.464 323.968 187.072a64 64 0 0 1 32 55.424v374.08a64 64 0 0 1-32 55.424L544 941.536a64 64 0 0 1-64 0L156.032 754.464a64 64 0 0 1-32-55.424V324.96a64 64 0 0 1 32-55.424L480 82.464a64 64 0 0 1 64 0zM810.56 336a32 32 0 0 0-40.384-13.408l-3.328 1.696L512 471.392 257.184 324.288a32 32 0 0 0-35.136 53.376l3.136 2.048L480 526.848V816a32 32 0 0 0 63.776 3.744L544 816V526.848l254.848-147.136A32 32 0 0 0 810.56 336z"),X(n,"fill","#B19C4A"),B(e,r)},m(t,o){W(t,e,o),Y(e,n)},p(t,[n]){B(e,r=D(o,[{class:"icon"},{viewBox:"0 0 1024 1024"},{xmlns:"http://www.w3.org/2000/svg"},{width:"200"},{height:"200"},1&n&&t[0]]))},i:j,o:j,d(t){t&&T(e)}}}function Ie(t,e,n){return t.$$set=t=>{n(0,e=z(z({},e),N(t)))},[e=N(e)]}const Le=[{path:"/",component:()=>je((()=>import("./login.57d64e22.js")),["assets/login.57d64e22.js","assets/login.0a1b7451.css","assets/vendor.6ac7b93b.js","assets/vendor.11618b7d.css","assets/page-container.8523c8ac.js","assets/page-container.3a1c8316.css","assets/form-item.b65ba572.js","assets/form-item.a0cf0e49.css"]),name:"login",auth:!1},{path:"/page-center",component:()=>je((()=>import("./page-center.f52c8cfe.js")),["assets/page-center.f52c8cfe.js","assets/page-center.cd746336.css","assets/vendor.6ac7b93b.js","assets/vendor.11618b7d.css","assets/page-container.8523c8ac.js","assets/page-container.3a1c8316.css"]),name:"page-center",meta:{menu:{title:"页面中心",icon:class extends x{constructor(t){super(),k(this,t,Ie,Me,O,{})}}}}},{path:"/page-preview",component:()=>je((()=>import("./page-preview.45d1e7b3.js")),["assets/page-preview.45d1e7b3.js","assets/page-preview.69452742.css","assets/vendor.6ac7b93b.js","assets/vendor.11618b7d.css","assets/page-container.8523c8ac.js","assets/page-container.3a1c8316.css"]),name:"page-preview"},{path:"/editor",component:()=>je((()=>import("./editor.16e584e4.js")),["assets/editor.16e584e4.js","assets/editor.f78378ac.css","assets/vendor.6ac7b93b.js","assets/vendor.11618b7d.css","assets/page-container.8523c8ac.js","assets/page-container.3a1c8316.css","assets/form-item.b65ba572.js","assets/form-item.a0cf0e49.css"]),name:"editor"}];class ze extends R{constructor(){super(...arguments),this.before=t=>{t.options.header=t.options.header||{},t.options.header["X-UserID"]="001"},this.after=(t,e)=>{}}}class Ce{static init(){Ce.app||(Ce.app=U.init({env:Yt.cloudbase.env,region:Yt.cloudbase.region}),console.log("CLOUDBASE SDK 初始化成功"))}static get(){return Ce.app||Ce.init(),Ce.app}static getUser(){return Ce.get().auth({persistence:"local"}).currentUser}}async function _e(){Ce.init()}async function Ae(){V.setConfig({server:"http://api.test.com/",timeout:3e3}),V.interceptors.status.use((t=>!0)),V.interceptors.success.use((t=>t.data)),V.interceptors.error.use((t=>t)),V.requestCatchHandle=t=>{t&&((t.data||{}).message||t.status,403===t.status&&console.error(t.data))},V.installExtendService(new ze),await Promise.all([Promise.resolve(),_e()])}const Te=new H({mode:F,omitTrailingSlash:!0,base:"/app.h5-editor/",routes:Le});Te.beforeEach((async(t,e,n)=>{const{ready:o}=ve.get();o||(await Ae(),ve.dispatch("ready")),!t.meta.auth||Ce.getUser()?n():n("/login")}));function Xe(t,e,n){const o=t.slice();return o[4]=e[n],o}function Be(t){let e,n,o,r,s,a,i,c,l,d=t[4].title+"";var u=t[4].icon;function f(){return t[3](t[4])}return u&&(n=new u({props:{width:28,height:28}})),{c(){e=K("div"),n&&P(n.$$.fragment),o=Z(),r=K("div"),s=q(d),a=Z(),X(r,"class","title text-xs pt-1"),X(e,"class","menu-item m-3 py-2 cursor-pointer active:bg-gray-100 hover:bg-gray-200 flex flex-col justify-center items-center rounded svelte-6ff0y4"),G(e,"active",t[4].name===t[0])},m(t,d){J(t,e,d),n&&S(n,e,null),Q(e,o),Q(e,r),Q(r,s),Q(e,a),i=!0,c||(l=tt(e,"click",f),c=!0)},p(r,s){if(u!==(u=(t=r)[4].icon)){if(n){et();const t=n;I(t.$$.fragment,1,0,(()=>{L(t,1)})),nt()}u?(n=new u({props:{width:28,height:28}}),P(n.$$.fragment),M(n.$$.fragment,1),S(n,e,o)):n=null}3&s&&G(e,"active",t[4].name===t[0])},i(t){i||(n&&M(n.$$.fragment,t),i=!0)},o(t){n&&I(n.$$.fragment,t),i=!1},d(t){t&&T(e),n&&L(n),c=!1,l()}}}function We(t){let e,n,o,r,s,a,i,c=t[1],l=[];for(let u=0;u<c.length;u+=1)l[u]=Be(Xe(t,c,u));const d=t=>I(l[t],1,1,(()=>{l[t]=null}));return{c(){e=K("section"),n=K("div");for(let t=0;t<l.length;t+=1)l[t].c();o=Z(),r=K("div"),r.textContent="2",s=Z(),a=K("div"),a.textContent="3",X(n,"class","menu flex-auto svelte-6ff0y4"),X(r,"class","toolbar svelte-6ff0y4"),X(a,"class","user"),X(e,"class","shadow-lg absolute inset-0 flex flex-col")},m(t,c){J(t,e,c),Q(e,n);for(let e=0;e<l.length;e+=1)l[e].m(n,null);Q(e,o),Q(e,r),Q(e,s),Q(e,a),i=!0},p(t,[e]){if(7&e){let o;for(c=t[1],o=0;o<c.length;o+=1){const r=Xe(t,c,o);l[o]?(l[o].p(r,e),M(l[o],1)):(l[o]=Be(r),l[o].c(),M(l[o],1),l[o].m(n,null))}for(et(),o=c.length;o<l.length;o+=1)d(o);nt()}},i(t){if(!i){for(let t=0;t<c.length;t+=1)M(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)I(l[e]);i=!1},d(t){t&&T(e),ot(l,t)}}}function Ye(t,e,n){let o;const r=Le.filter((t=>{var e;return null===(e=null==t?void 0:t.meta)||void 0===e?void 0:e.menu})).map((t=>({name:t.name,path:t.path,title:t.meta.menu.title,icon:t.meta.menu.icon})));function s(t){Te.push(t)}Te.currentMatched.subscribe((t=>{if(t&&t.length){const[e]=t;n(0,o=e.name)}}));return[o,r,s,t=>s(t.path)]}class De extends x{constructor(t){super(),k(this,t,Ye,We,O,{})}}function Ne(t){let e,n,o,r,s,a,i;return o=new De({}),a=new E({}),{c(){e=K("main"),n=K("div"),P(o.$$.fragment),r=Z(),s=K("div"),P(a.$$.fragment),X(n,"class","sidebar relative"),X(s,"class","content relative"),X(e,"class","absolute inset-0 grid grid-cols-2 svelte-15go9i5")},m(t,c){J(t,e,c),Q(e,n),S(o,n,null),Q(e,r),Q(e,s),S(a,s,null),i=!0},p:j,i(t){i||(M(o.$$.fragment,t),M(a.$$.fragment,t),i=!0)},o(t){I(o.$$.fragment,t),I(a.$$.fragment,t),i=!1},d(t){t&&T(e),L(o),L(a)}}}const Re={default:class extends x{constructor(t){super(),k(this,t,null,Ee,O,{})}},workspace:class extends x{constructor(t){super(),k(this,t,null,Ne,O,{})}}};function Ve(t,e,n){const o=t.slice();return o[1]=e[n],o}function Ue(t,e,n){const o=t.slice();return o[4]=e[n],o}function He(t){let e,n,o=t[1].actions,r=[];for(let a=0;a<o.length;a+=1)r[a]=Ke(Ue(t,o,a));const s=t=>I(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=rt()},m(t,o){for(let e=0;e<r.length;e+=1)r[e].m(t,o);J(t,e,o),n=!0},p(t,n){if(1&n){let a;for(o=t[1].actions,a=0;a<o.length;a+=1){const s=Ue(t,o,a);r[a]?(r[a].p(s,n),M(r[a],1)):(r[a]=Ke(s),r[a].c(),M(r[a],1),r[a].m(e.parentNode,e))}for(et(),a=o.length;a<r.length;a+=1)s(a);nt()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)M(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)I(r[e]);n=!1},d(t){ot(r,t),t&&T(e)}}}function Fe(t){let e,n=t[4].title+"";return{c(){e=q(n)},m(t,n){J(t,e,n)},p(t,o){1&o&&n!==(n=t[4].title+"")&&ft(e,n)},d(t){t&&T(e)}}}function Ke(t){let e,n;return e=new ut({props:{$$slots:{default:[Fe]},$$scope:{ctx:t}}}),e.$on("click",(function(){lt(t[4].onclick)&&t[4].onclick.apply(this,arguments)})),{c(){P(e.$$.fragment)},m(t,o){S(e,t,o),n=!0},p(n,o){t=n;const r={};129&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Ze(t){let e,n,o,r=t[1].actions&&He(t);return{c(){e=K("div"),r&&r.c(),n=Z(),X(e,"slot","actions")},m(t,s){J(t,e,s),r&&r.m(e,null),Q(e,n),o=!0},p(t,o){t[1].actions?r?(r.p(t,o),1&o&&M(r,1)):(r=He(t),r.c(),M(r,1),r.m(e,n)):r&&(et(),I(r,1,1,(()=>{r=null})),nt())},i(t){o||(M(r),o=!0)},o(t){I(r),o=!1},d(t){t&&T(e),r&&r.d()}}}function qe(t,e){let n,o,r;return o=new ct({props:{kind:e[1].type,title:e[1].title+":",subtitle:e[1].message,timeout:e[1].timeout,hideCloseButton:e[1].hideClose,$$slots:{actions:[Ze]},$$scope:{ctx:e}}}),o.$on("close",(function(){lt(nn(e[1]))&&nn(e[1]).apply(this,arguments)})),{key:t,first:null,c(){n=rt(),P(o.$$.fragment),this.first=n},m(t,e){J(t,n,e),S(o,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.kind=e[1].type),1&n&&(r.title=e[1].title+":"),1&n&&(r.subtitle=e[1].message),1&n&&(r.timeout=e[1].timeout),1&n&&(r.hideCloseButton=e[1].hideClose),129&n&&(r.$$scope={dirty:n,ctx:e}),o.$set(r)},i(t){r||(M(o.$$.fragment,t),r=!0)},o(t){I(o.$$.fragment,t),r=!1},d(t){t&&T(n),L(o,t)}}}function Ge(t){let e,n,o=[],r=new Map,s=t[0];const a=t=>t[1].id;for(let i=0;i<s.length;i+=1){let e=Ve(t,s,i),n=a(e);r.set(n,o[i]=qe(n,e))}return{c(){e=K("div");for(let t=0;t<o.length;t+=1)o[t].c();X(e,"class","toast-container flex flex-col items-center")},m(t,r){J(t,e,r);for(let n=0;n<o.length;n+=1)o[n].m(e,null);n=!0},p(t,[n]){1&n&&(s=t[0],et(),o=st(o,n,a,1,t,s,r,e,dt,qe,null,Ve),nt())},i(t){if(!n){for(let t=0;t<s.length;t+=1)M(o[t]);n=!0}},o(t){for(let e=0;e<o.length;e+=1)I(o[e]);n=!1},d(t){t&&T(e);for(let e=0;e<o.length;e+=1)o[e].d()}}}const Je=at([]),Qe={success:"成功",warning:"警告",error:"错误",info:"确认"};function tn(t){Je.update((e=>[...e,{id:Math.random().toString(32).slice(2),title:Qe[t.type],type:t.type,message:t.message,timeout:t.timeout||2e3}]))}function en(t){const e=t=>{Je.update((e=>e.filter((e=>e.id!==t))))},n=Math.random().toString(32).slice(2);return new Promise(((o,r)=>{Je.update((s=>[...s,{id:n,title:Qe.info,type:"info",message:t.message,timeout:0,hideClose:!0,actions:[{onclick:()=>{e(n),o(!0)},title:"确定"},{onclick:()=>{e(n),r(!1)},title:"取消"}]}]))}))}function nn(t){return()=>{Je.update((e=>e.filter((e=>e.id!==t.id))))}}function on(t,e,n){let o;return it(t,Je,(t=>n(0,o=t))),[o]}class rn extends x{constructor(t){super(),k(this,t,on,Ge,O,{})}}function sn(t){let e,n,o;var r=t[0];return r&&(e=new r({})),{c(){e&&P(e.$$.fragment),n=rt()},m(t,r){e&&S(e,t,r),J(t,n,r),o=!0},p(t,o){if(r!==(r=t[0])){if(e){et();const t=e;I(t.$$.fragment,1,0,(()=>{L(t,1)})),nt()}r?(e=new r({}),P(e.$$.fragment),M(e.$$.fragment,1),S(e,n.parentNode,n)):e=null}},i(t){o||(e&&M(e.$$.fragment,t),o=!0)},o(t){e&&I(e.$$.fragment,t),o=!1},d(t){t&&T(n),e&&L(e,t)}}}function an(t){let e,n;return e=new ht({props:{minWidth:100,$$slots:{default:[sn]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(t,o){S(e,t,o),n=!0},p(t,n){const o={};17&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function cn(t){let e,n,o,r,s,a;return e=new gt({props:{router:Te,$$slots:{default:[an]},$$scope:{ctx:t}}}),o=new rn({}),s=new pt({props:{theme:"white",tokens:t[1]}}),{c(){P(e.$$.fragment),n=Z(),P(o.$$.fragment),r=Z(),P(s.$$.fragment)},m(t,i){S(e,t,i),J(t,n,i),S(o,t,i),J(t,r,i),S(s,t,i),a=!0},p(t,[n]){const o={};17&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){a||(M(e.$$.fragment,t),M(o.$$.fragment,t),M(s.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),I(o.$$.fragment,t),I(s.$$.fragment,t),a=!1},d(t){L(e,t),t&&T(n),L(o,t),t&&T(r),L(s,t)}}}function ln(t,e,n){let o,r;v(ve);const s=Oe,{layout:a}=xe((t=>t.app));return it(t,a,(t=>n(3,r=t))),t.$$.update=()=>{8&t.$$.dirty&&n(0,o=Re[r])},[o,s,a,r]}new class extends x{constructor(t){super(),k(this,t,ln,cn,O,{})}}({target:document.getElementById("app")});export{Ce as C,Mt as W,en as a,Yt as b,Vt as c,re as d,yt as e,Bt as f,Ut as g,Kt as h,Wt as i,oe as j,Jt as k,tn as o,Rt as r,ve as s,Ot as t,xe as u};
