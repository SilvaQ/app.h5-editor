var t=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(e,n,o)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,i=(t,e)=>{for(var n in e||(e={}))r.call(e,n)&&s(t,n,e[n]);if(o)for(var n of o(e))a.call(e,n)&&s(t,n,e[n]);return t},c=(t,o)=>e(t,n(o));import{T as l,c as d,K as u,o as f,a as g,p,s as h,b as m,d as w,e as y,f as $,u as b,g as v,S as x,i as k,h as E,R as O,j as P,m as S,n as j,t as L,k as M,l as I,q as z,r as C,v as _,w as T,x as A,y as X,z as B,A as D,B as W,C as Y,D as R,E as N,F as U,G as V,H as F,I as H,J as K,L as Z,M as q,N as G,O as J,P as Q,Q as tt,U as et,V as nt,W as ot,X as rt,Y as at,Z as st,_ as it,$ as ct,a0 as lt,a1 as dt,a2 as ut,a3 as ft,a4 as gt,a5 as pt,a6 as ht}from"./vendor.6ce12853.js";const mt={ready:!1,layout:"default"},wt={keys:Object.keys(mt),module:t=>{t.on("@init",(()=>mt)),t.on("ready",(()=>({ready:!0}))),t.on("updateLayout",((t,e)=>c(i({},t),{layout:e})))}};var yt,$t,bt,vt,xt,kt;($t=yt||(yt={})).image="IMAGE",$t.text="TEXT",(bt||(bt={})).username="USERNAME",(vt||(vt={})).input="input",(kt=xt||(xt={})).stage="stage",kt.widget="widget";const Et=[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}];class Ot{}class Pt{}var St=Object.defineProperty,jt=Object.getOwnPropertyDescriptor;class Lt{get id(){return this.property.id}}((t,e,n,o)=>{for(var r,a=o>1?void 0:o?jt(e,n):e,s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o?r(e,n,a):r(a))||a);o&&a&&St(e,n,a)})([l((()=>Pt))],Lt.prototype,"property",2);var Mt=Object.defineProperty,It=Object.getOwnPropertyDescriptor;class zt extends Lt{constructor(){super(...arguments),this.widgetType=yt.image}}((t,e,n,o)=>{for(var r,a=o>1?void 0:o?It(e,n):e,s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o?r(e,n,a):r(a))||a);o&&a&&Mt(e,n,a)})([l((()=>Ot))],zt.prototype,"imageProperty",2);class Ct{}var _t=Object.defineProperty,Tt=Object.getOwnPropertyDescriptor;class At extends Lt{constructor(){super(...arguments),this.widgetType=yt.text}}((t,e,n,o)=>{for(var r,a=o>1?void 0:o?Tt(e,n):e,s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o?r(e,n,a):r(a))||a);o&&a&&_t(e,n,a)})([l((()=>Ct))],At.prototype,"textProperty",2);const Xt={[yt.text]:function(t="请输入文本"){const e=new At;return e.property=function(){const t=new Pt;return t.id=Math.random().toString(32).slice(2),t.height=60,t.width=200,t.opacity=1,t.rotation=0,t.scaleX=1,t.scaleY=1,t.x=0,t.y=0,t}(),e.textProperty=function(t){const e=new Ct;return e.fill="#000",e.fontFamily="Arial",e.align="left",e.fontSize=32,e.fontStyle="",e.text=t,e}(t),e},[yt.image]:function(t){const e=new zt;return e.property=function(){const t=new Pt;return t.id=Math.random().toString(32).slice(2),t.height=100,t.width=100,t.opacity=1,t.rotation=0,t.scaleX=1,t.scaleY=1,t.x=0,t.y=0,t}(),e.imageProperty=function(t){const e=new Ot;return e.url=t,e}(t),e}};function Bt(t,e){const n=Xt[t];if(!n)throw Error("不存在该组件类型");return n(e)}function Dt(t){const e=d(t);return e.property.id=Math.random().toString(32).slice(2),e}const Wt={cloudbase:{env:"test-4glnlr77348551c8",region:"ap-shanghai"},editor:{content:{scale:3,width:1080,height:1920}}},Yt={Text:function(t){t.on(vt.input,(()=>{!function(t,e){const{widgets:n}=xe.get(),o=n.find((e=>e.id===t.id()));if(!o)return;xe.dispatch("updateWidget",{id:o.id,textProperty:i(i({},o.textProperty),e)})}(t,{text:t.text()})}))},Image:function(){}};function Rt(t,e){const{widgets:n}=xe.get(),o=n.find((e=>e.id===t.id()));o&&xe.dispatch("updateWidget",{id:o.id,property:i(i({},o.property),e)})}function Nt(t){const e=t.container(),{content:n}=Vt(),{width:o,height:r}=Wt.editor.content;t.width(e.offsetWidth),t.height(e.offsetHeight),n.x(e.offsetWidth/2-o*n.scaleX()/2),n.y(e.offsetHeight/2-r*n.scaleY()/2),n.draw()}function Ut(t){const e=t.clientWidth,n=t.clientHeight,o=new u.Stage({container:t,width:e,height:n}),{content:r,background:a}=function(t){const{width:e,height:n,scale:o}=Wt.editor.content,r=new u.Layer({name:"content",x:t.width()/2-e/2,y:t.height()/2-n/2,scaleX:1/o,scaleY:1/o,clip:{x:0,y:0,width:e,height:n}});xe.dispatch("updateSize",{width:e,height:n});const a=new u.Layer({name:"background"});return{content:r,background:a}}(o);return o.add(r),o.add(a),r.draw(),a.draw(),xe.dispatch("updateStage",o),o}function Vt(){const{stage:t}=xe.get();if(!t)throw"请初始化Stage";const e=t.getLayers();return{content:e.find((t=>"content"===t.name())),background:e.find((t=>"background"===t.name()))}}const Ft=["background"],Ht={Text:["top-center","bottom-center","middle-right","middle-left"],Image:["top-left","top-right","bottom-left","bottom-right"],default:["top-left","top-right","bottom-left","bottom-right"]};function Kt(t){return t.find("Transformer").find((t=>"selected"===t.name()))}function Zt(t,e){return t.find("Transformer").find((t=>t.nodes().includes(e)))}function qt(t,e,n=!1){const o=new u.Transformer({keepRatio:!0,resizeEnabled:n,rotateEnabled:n});if(1===e.length){const[t]=e;o.enabledAnchors((r=t.getClassName(),Ht[r]||Ht.default))}var r;return o.nodes(e),t.add(o),t.draw(),(n||e.length>1)&&o.name("selected"),o}function Gt(t){t.find("Transformer").forEach((t=>t.destroy())),t.draw()}function Jt(t){const{content:e}=Vt();t.on("mousedown",(n=>{if(n.target===t)return Gt(t),void xe.dispatch("updateSelected",[]);return e.findOne((t=>Ft.includes(n.target.name())))?(Gt(t),void xe.dispatch("updateSelected",[])):void 0}))}async function Qt(t){const e=await fetch(t),n=await e.blob();return new Promise((t=>{const e=new FileReader;e.readAsDataURL(n),e.onloadend=()=>{const n=e.result;t(n)}}))}function te(t){const e=t.getLayer(),n=e.getLayer(),o=n.offsetX()+t.absolutePosition().x,r=n.offsetY()+t.absolutePosition().y,a=document.createElement("textarea");document.getElementById("canvas-container").appendChild(a),a.value=t.text(),a.style.position="absolute",a.style.top=r+"px",a.style.left=o+"px",a.style.width=t.width()-2*t.padding()+"px",a.style.height=t.height()-2*t.padding()+5+"px",a.style.fontSize=`${t.fontSize()}px`,a.style.border="none",a.style.padding="0px",a.style.margin="0px",a.style.overflow="hidden",a.style.background="none",a.style.outline="none",a.style.resize="none",a.style.wordBreak="break-all",a.style.fontFamily=t.fontFamily(),a.style.transformOrigin="left top",a.style.textAlign=t.align(),a.style.color=t.fill(),a.style.transform=`rotateZ(${t.rotation()}deg) scale(${e.scaleX()})`,a.focus(),a.addEventListener("keydown",(function(t){"Enter"!==t.key||t.shiftKey||a.blur()})),a.addEventListener("blur",(function(e){t.text(a.value),t.fire(vt.input),a.parentNode.removeChild(a),t.show()}))}const ee={[yt.text]:function(t){const{preview:e}=xe.get(),n=new u.Text(i(i({},f(["zIndex"],t.property)),t.textProperty));return e||function(t){t.on("dblclick dbltap",(()=>{t.hide(),te(t)}))}(n),function(t){t.on("transform",(e=>{t.setAttrs({width:Math.max(t.width()*t.scaleX(),100),height:Math.max(t.height()*t.scaleY(),50),scaleX:1,scaleY:1})}))}(n),n},[yt.image]:function(t){const e=new Image,n=new u.Image(c(i({},f(["zIndex"],t.property)),{image:e}));return Qt(t.imageProperty.url).then((t=>{e.src=t})),function(t){t.on("transform",(e=>{t.setAttrs({width:Math.max(t.width()*t.scaleX()),height:Math.max(t.height()*t.scaleY()),scaleX:1,scaleY:1})}))}(n),n}};function ne(t){const e=ee[t.widgetType],{preview:n}=xe.get();if(!e)throw Error("组件类型不存在");const o=e(t);return o.draggable(!n),o}function oe(t,e,n=!0){const{content:o,background:r}=Vt(),{preview:a}=xe.get();a||function(t,e){const{background:n}=Vt();e.on("mouseenter",(o=>{Zt(t,e)||qt(n,[e],!1)})),e.on("mouseout",(n=>{const o=Zt(t,e);o&&"selected"!==o.name()&&o.destroy()})),e.on("mousedown",(o=>{const r=Kt(t),a=Zt(t,e);if(a&&a===r)return;const s=o.evt.ctrlKey&&r?[...r.nodes(),e]:[e];Gt(t),qt(n,s,1===s.length),xe.dispatch("updateSelected",s.map((t=>t.id())))}))}(t,e),Gt(t),n&&!a&&qt(r,[e],!0),function(t){t.on("transformend",(()=>{Rt(t,{x:Math.round(t.x()),y:Math.round(t.y()),width:Math.round(t.width()),height:Math.round(t.height()),scaleX:Math.round(t.scaleX()),scaleY:Math.round(t.scaleY()),rotation:Math.round(t.rotation())})})),t.on("dragend",(()=>{Rt(t,{x:Math.round(t.x()),y:Math.round(t.y())})}));const e=Yt[t.getClassName()];e&&e(t)}(e),o.add(e)}function re(t){const e=Kt(t);if(!e)return;return e.getNodes().filter((t=>t.visible()))}function ae(){const{content:t}=Vt(),{width:e,height:n}=Wt.editor.content,o=new u.Rect({width:e,height:n,fill:"#fff",name:"background"});t.add(o)}function se(t){const e=g(t.widgets);t.stage.width(),t.stage.height();return{widgets:e,selected:[...t.selected],page:{size:{width:t.stage.width(),height:t.stage.height()},background:t.page.background,title:t.page.title}}}function ie(t){return{widgets:p(Lt,t.widgets),page:i({},t.page),selected:t.selected}}function ce(t){return t.history.forward=[],t.history.backward.push(se(t)),{history:{forward:t.history.forward,backward:t.history.backward}}}function le(t){const e=t.history.backward.pop();if(e)return c(i({},ie(e)),{history:{backward:[...t.history.backward],forward:[...t.history.forward,se(t)]}})}function de(t){const e=t.history.forward.pop();if(e)return c(i({},ie(e)),{history:{backward:[...t.history.backward,se(t)],forward:[...t.history.forward]}})}const ue={stage:void 0,page:{size:{width:Wt.editor.content.width,height:Wt.editor.content.height},title:"未命名",background:""},selected:[],copied:[],zoom:1,widgets:[],history:{backward:[],forward:[]},preview:!1},fe={keys:Object.keys(ue),module:t=>{t.on("@init",(()=>ue)),t.on("updateStage",((t,e)=>c(i({},t),{stage:e}))),t.on("updateSize",((t,e)=>c(i({},t),{size:e}))),t.on("updatePreview",((t,e)=>c(i({},t),{preview:e}))),t.on("updatePage",((t,e)=>c(i({},t),{page:e}))),t.on("updateWidgets",((t,e)=>c(i({},t),{widgets:e}))),t.on("updateSelected",((t,e)=>c(i({},t),{selected:e}))),t.on("updateCopied",((t,e)=>c(i({},t),{copied:e}))),t.on("updateWidget",Ee(pe,{before:[ce]})),t.on("updateZoom",Ee(ge)),t.on("backward",Ee(le,{after:[$e]})),t.on("forward",Ee(de,{after:[$e]})),t.on("createWidget",Ee(he,{before:[ce]})),t.on("deleteWidget",Ee(me,{before:[ce]})),t.on("updateBackground",Ee(we,{before:[ce]})),t.on("updateZindex",Ee(ye,{before:[ce]})),t.on("renderStage",(t=>($e(t),t)))}};function ge(t,e){const{scale:n}=Wt.editor.content,{content:o}=Vt();return o.scaleX(1/n*e),o.scaleY(1/n*e),Nt(t.stage),{zoom:e}}function pe(t,e){const n=t.widgets.find((t=>t.id===e.id));return n&&Object.entries(e).forEach((([t,o])=>{"id"!==t&&(n[t]=i(i({},n[t]),e[t]))})),{widgets:t.widgets}}function he(t,e){const{stage:n,widgets:o}=t,r=e instanceof Lt?e:Bt(e),a=ne(r);return oe(n,a),{widgets:[...o,r],selected:[a.id()]}}function me(t,e){const{stage:n}=t,o=e instanceof Array?e:[e];return o.forEach((t=>{!function(t,e){const{content:n}=Vt(),[o]=n.getChildren((t=>t.id()===e));o&&(o.destroy(),Gt(t))}(n,t)})),{selected:[],widgets:t.widgets.filter((t=>!o.includes[t.id]))}}function we(t,e){const{stage:n,page:o}=t,r=n.findOne(".background"),a=new Image;return a.onload=()=>{r.fill(""),r.fillPatternImage(a)},a.src=e,{page:{size:t.page.size,title:t.page.title,background:e}}}function ye(t){const{widgets:e,stage:n}=t;return{widgets:e.map((t=>{const e=n.findOne(`#${t.id}`);return t.property.zIndex=e.zIndex(),t}))}}function $e(t){const{stage:e,widgets:n,selected:o,page:r,preview:a}=t,{content:s,background:i}=Vt();var c;if(s.destroyChildren(),Gt(e),ae(),(c=h([m(w(["property","zIndex"]))])(n),c.map((t=>ne(t)))).forEach((t=>oe(e,t,!1))),!a&&o.length&&qt(i,o.map((t=>e.findOne(`#${t}`))),1===o.length),r&&r.background){const t=e.findOne(".background"),n=new Image;n.onload=()=>{t.fill(""),t.fillPatternImage(n)},Qt(r.background).then((t=>{n.src=t}))}}const be={userid:"",username:""},ve={user:{keys:Object.keys(be),module:t=>{t.on("@init",(()=>be)),t.on("login",((t,e)=>c(i({},t),{userid:e,username:e+":name"})))},persist:["userid"]},app:wt,editor:fe},xe=y([...Object.values(ve).map((t=>t.module)),$(Object.values(ve).filter((t=>t.persist)).map((t=>t.persist)).flat())]);function ke(t){return b(...t(ve).keys)}function Ee(t,e={after:[],before:[]}){return(n,o)=>{const{before:r=[],after:a=[]}=e,s=r.reduce(((t,e)=>i(i({},t),e(t)||{})),n),c=i(i({},n),t(n,o)),l=a.reduce(((t,e)=>i(i({},t),e(t)||{})),c);return i(i(i({},s),c),l)}}const Oe={"interactive-01":"#1890ff","interactive-04":"#1890ff","layer-selected-inverse":"#1890ff"};function Pe(t){let e,n;return e=new O({}),{c(){P(e.$$.fragment)},m(t,o){S(e,t,o),n=!0},p:j,i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}let Se;const je={},Le=function(t,e){if(!e||0===e.length)return t();if(void 0===Se){const t=document.createElement("link").relList;Se=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if((t=`/app.h5-editor/${t}`)in je)return;je[t]=!0;const e=t.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const o=document.createElement("link");return o.rel=e?"stylesheet":Se,e||(o.as="script",o.crossOrigin=""),o.href=t,document.head.appendChild(o),e?new Promise(((t,e)=>{o.addEventListener("load",t),o.addEventListener("error",e)})):void 0}))).then((()=>t()))};function Me(t){let e,n,o=[{class:"icon"},{viewBox:"0 0 1024 1024"},{xmlns:"http://www.w3.org/2000/svg"},{width:"200"},{height:"200"},t[0]],r={};for(let a=0;a<o.length;a+=1)r=z(r,o[a]);return{c(){e=C("svg"),n=C("path"),this.h()},l(t){e=_(t,"svg",{class:!0,viewBox:!0,xmlns:!0,width:!0,height:!0},1);var o=T(e);n=_(o,"path",{d:!0,fill:!0},1),T(n).forEach(A),o.forEach(A),this.h()},h(){X(n,"d","m544 82.464 323.968 187.072a64 64 0 0 1 32 55.424v374.08a64 64 0 0 1-32 55.424L544 941.536a64 64 0 0 1-64 0L156.032 754.464a64 64 0 0 1-32-55.424V324.96a64 64 0 0 1 32-55.424L480 82.464a64 64 0 0 1 64 0zM810.56 336a32 32 0 0 0-40.384-13.408l-3.328 1.696L512 471.392 257.184 324.288a32 32 0 0 0-35.136 53.376l3.136 2.048L480 526.848V816a32 32 0 0 0 63.776 3.744L544 816V526.848l254.848-147.136A32 32 0 0 0 810.56 336z"),X(n,"fill","#B19C4A"),B(e,r)},m(t,o){D(t,e,o),W(e,n)},p(t,[n]){B(e,r=Y(o,[{class:"icon"},{viewBox:"0 0 1024 1024"},{xmlns:"http://www.w3.org/2000/svg"},{width:"200"},{height:"200"},1&n&&t[0]]))},i:j,o:j,d(t){t&&A(e)}}}function Ie(t,e,n){return t.$$set=t=>{n(0,e=z(z({},e),R(t)))},[e=R(e)]}const ze=[{path:"/",component:()=>Le((()=>import("./login.85fe8d4a.js")),["assets/login.85fe8d4a.js","assets/login.0a1b7451.css","assets/vendor.6ce12853.js","assets/vendor.11618b7d.css","assets/page-container.17299d21.js","assets/page-container.3a1c8316.css","assets/form-item.eec47ff0.js","assets/form-item.a0cf0e49.css"]),name:"login",auth:!1},{path:"/page-center",component:()=>Le((()=>import("./page-center.55770116.js")),["assets/page-center.55770116.js","assets/page-center.cd746336.css","assets/vendor.6ce12853.js","assets/vendor.11618b7d.css","assets/page-container.17299d21.js","assets/page-container.3a1c8316.css"]),name:"page-center",meta:{menu:{title:"页面中心",icon:class extends x{constructor(t){super(),k(this,t,Ie,Me,E,{})}}}}},{path:"/page-preview",component:()=>Le((()=>import("./page-preview.0b07d457.js")),["assets/page-preview.0b07d457.js","assets/page-preview.69452742.css","assets/vendor.6ce12853.js","assets/vendor.11618b7d.css","assets/page-container.17299d21.js","assets/page-container.3a1c8316.css"]),name:"page-preview"},{path:"/editor",component:()=>Le((()=>import("./editor.f3358cbf.js")),["assets/editor.f3358cbf.js","assets/editor.f78378ac.css","assets/vendor.6ce12853.js","assets/vendor.11618b7d.css","assets/page-container.17299d21.js","assets/page-container.3a1c8316.css","assets/form-item.eec47ff0.js","assets/form-item.a0cf0e49.css"]),name:"editor"}];class Ce extends N{constructor(){super(...arguments),this.before=t=>{t.options.header=t.options.header||{},t.options.header["X-UserID"]="001"},this.after=(t,e)=>{}}}class _e{static init(){_e.app||(_e.app=V.init({env:Wt.cloudbase.env,region:Wt.cloudbase.region}),console.log("CLOUDBASE SDK 初始化成功"))}static get(){return _e.app||_e.init(),_e.app}static getUser(){return _e.get().auth({persistence:"local"}).currentUser}}async function Te(){_e.init()}async function Ae(){U.setConfig({server:"http://api.test.com/",timeout:3e3}),U.interceptors.status.use((t=>!0)),U.interceptors.success.use((t=>t.data)),U.interceptors.error.use((t=>t)),U.requestCatchHandle=t=>{t&&((t.data||{}).message||t.status,403===t.status&&console.error(t.data))},U.installExtendService(new Ce),await Promise.all([Promise.resolve(),Te()])}const Xe=new F({mode:H,omitTrailingSlash:!0,base:"/app.h5-editor/",routes:ze});Xe.beforeEach((async(t,e,n)=>{const{ready:o}=xe.get();o||(await Ae(),xe.dispatch("ready")),!t.meta.auth||_e.getUser()?n():n("/login")}));function Be(t,e,n){const o=t.slice();return o[4]=e[n],o}function De(t){let e,n,o,r,a,s,i,c,l,d=t[4].title+"";var u=t[4].icon;function f(){return t[3](t[4])}return u&&(n=new u({props:{width:28,height:28}})),{c(){e=K("div"),n&&P(n.$$.fragment),o=Z(),r=K("div"),a=q(d),s=Z(),X(r,"class","title text-xs pt-1"),X(e,"class","menu-item m-3 py-2 cursor-pointer active:bg-gray-100 hover:bg-gray-200 flex flex-col justify-center items-center rounded svelte-6ff0y4"),G(e,"active",t[4].name===t[0])},m(t,d){J(t,e,d),n&&S(n,e,null),Q(e,o),Q(e,r),Q(r,a),Q(e,s),i=!0,c||(l=tt(e,"click",f),c=!0)},p(r,a){if(u!==(u=(t=r)[4].icon)){if(n){et();const t=n;M(t.$$.fragment,1,0,(()=>{I(t,1)})),nt()}u?(n=new u({props:{width:28,height:28}}),P(n.$$.fragment),L(n.$$.fragment,1),S(n,e,o)):n=null}3&a&&G(e,"active",t[4].name===t[0])},i(t){i||(n&&L(n.$$.fragment,t),i=!0)},o(t){n&&M(n.$$.fragment,t),i=!1},d(t){t&&A(e),n&&I(n),c=!1,l()}}}function We(t){let e,n,o,r,a,s,i,c=t[1],l=[];for(let u=0;u<c.length;u+=1)l[u]=De(Be(t,c,u));const d=t=>M(l[t],1,1,(()=>{l[t]=null}));return{c(){e=K("section"),n=K("div");for(let t=0;t<l.length;t+=1)l[t].c();o=Z(),r=K("div"),r.textContent="2",a=Z(),s=K("div"),s.textContent="3",X(n,"class","menu flex-auto svelte-6ff0y4"),X(r,"class","toolbar svelte-6ff0y4"),X(s,"class","user"),X(e,"class","shadow-lg absolute inset-0 flex flex-col")},m(t,c){J(t,e,c),Q(e,n);for(let e=0;e<l.length;e+=1)l[e].m(n,null);Q(e,o),Q(e,r),Q(e,a),Q(e,s),i=!0},p(t,[e]){if(7&e){let o;for(c=t[1],o=0;o<c.length;o+=1){const r=Be(t,c,o);l[o]?(l[o].p(r,e),L(l[o],1)):(l[o]=De(r),l[o].c(),L(l[o],1),l[o].m(n,null))}for(et(),o=c.length;o<l.length;o+=1)d(o);nt()}},i(t){if(!i){for(let t=0;t<c.length;t+=1)L(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)M(l[e]);i=!1},d(t){t&&A(e),ot(l,t)}}}function Ye(t,e,n){let o;const r=ze.filter((t=>{var e;return null===(e=null==t?void 0:t.meta)||void 0===e?void 0:e.menu})).map((t=>({name:t.name,path:t.path,title:t.meta.menu.title,icon:t.meta.menu.icon})));function a(t){Xe.push(t)}Xe.currentMatched.subscribe((t=>{if(t&&t.length){const[e]=t;n(0,o=e.name)}}));return[o,r,a,t=>a(t.path)]}class Re extends x{constructor(t){super(),k(this,t,Ye,We,E,{})}}function Ne(t){let e,n,o,r,a,s,i;return o=new Re({}),s=new O({}),{c(){e=K("main"),n=K("div"),P(o.$$.fragment),r=Z(),a=K("div"),P(s.$$.fragment),X(n,"class","sidebar relative"),X(a,"class","content relative"),X(e,"class","absolute inset-0 grid grid-cols-2 svelte-15go9i5")},m(t,c){J(t,e,c),Q(e,n),S(o,n,null),Q(e,r),Q(e,a),S(s,a,null),i=!0},p:j,i(t){i||(L(o.$$.fragment,t),L(s.$$.fragment,t),i=!0)},o(t){M(o.$$.fragment,t),M(s.$$.fragment,t),i=!1},d(t){t&&A(e),I(o),I(s)}}}const Ue={default:class extends x{constructor(t){super(),k(this,t,null,Pe,E,{})}},workspace:class extends x{constructor(t){super(),k(this,t,null,Ne,E,{})}}};function Ve(t,e,n){const o=t.slice();return o[1]=e[n],o}function Fe(t,e,n){const o=t.slice();return o[4]=e[n],o}function He(t){let e,n,o=t[1].actions,r=[];for(let s=0;s<o.length;s+=1)r[s]=Ze(Fe(t,o,s));const a=t=>M(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=rt()},m(t,o){for(let e=0;e<r.length;e+=1)r[e].m(t,o);J(t,e,o),n=!0},p(t,n){if(1&n){let s;for(o=t[1].actions,s=0;s<o.length;s+=1){const a=Fe(t,o,s);r[s]?(r[s].p(a,n),L(r[s],1)):(r[s]=Ze(a),r[s].c(),L(r[s],1),r[s].m(e.parentNode,e))}for(et(),s=o.length;s<r.length;s+=1)a(s);nt()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)L(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)M(r[e]);n=!1},d(t){ot(r,t),t&&A(e)}}}function Ke(t){let e,n=t[4].title+"";return{c(){e=q(n)},m(t,n){J(t,e,n)},p(t,o){1&o&&n!==(n=t[4].title+"")&&ft(e,n)},d(t){t&&A(e)}}}function Ze(t){let e,n;return e=new ut({props:{$$slots:{default:[Ke]},$$scope:{ctx:t}}}),e.$on("click",(function(){lt(t[4].onclick)&&t[4].onclick.apply(this,arguments)})),{c(){P(e.$$.fragment)},m(t,o){S(e,t,o),n=!0},p(n,o){t=n;const r={};129&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function qe(t){let e,n,o,r=t[1].actions&&He(t);return{c(){e=K("div"),r&&r.c(),n=Z(),X(e,"slot","actions")},m(t,a){J(t,e,a),r&&r.m(e,null),Q(e,n),o=!0},p(t,o){t[1].actions?r?(r.p(t,o),1&o&&L(r,1)):(r=He(t),r.c(),L(r,1),r.m(e,n)):r&&(et(),M(r,1,1,(()=>{r=null})),nt())},i(t){o||(L(r),o=!0)},o(t){M(r),o=!1},d(t){t&&A(e),r&&r.d()}}}function Ge(t,e){let n,o,r;return o=new ct({props:{kind:e[1].type,title:e[1].title+":",subtitle:e[1].message,timeout:e[1].timeout,hideCloseButton:e[1].hideClose,$$slots:{actions:[qe]},$$scope:{ctx:e}}}),o.$on("close",(function(){lt(on(e[1]))&&on(e[1]).apply(this,arguments)})),{key:t,first:null,c(){n=rt(),P(o.$$.fragment),this.first=n},m(t,e){J(t,n,e),S(o,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.kind=e[1].type),1&n&&(r.title=e[1].title+":"),1&n&&(r.subtitle=e[1].message),1&n&&(r.timeout=e[1].timeout),1&n&&(r.hideCloseButton=e[1].hideClose),129&n&&(r.$$scope={dirty:n,ctx:e}),o.$set(r)},i(t){r||(L(o.$$.fragment,t),r=!0)},o(t){M(o.$$.fragment,t),r=!1},d(t){t&&A(n),I(o,t)}}}function Je(t){let e,n,o=[],r=new Map,a=t[0];const s=t=>t[1].id;for(let i=0;i<a.length;i+=1){let e=Ve(t,a,i),n=s(e);r.set(n,o[i]=Ge(n,e))}return{c(){e=K("div");for(let t=0;t<o.length;t+=1)o[t].c();X(e,"class","toast-container flex flex-col items-center")},m(t,r){J(t,e,r);for(let n=0;n<o.length;n+=1)o[n].m(e,null);n=!0},p(t,[n]){1&n&&(a=t[0],et(),o=at(o,n,s,1,t,a,r,e,dt,Ge,null,Ve),nt())},i(t){if(!n){for(let t=0;t<a.length;t+=1)L(o[t]);n=!0}},o(t){for(let e=0;e<o.length;e+=1)M(o[e]);n=!1},d(t){t&&A(e);for(let e=0;e<o.length;e+=1)o[e].d()}}}const Qe=st([]),tn={success:"成功",warning:"警告",error:"错误",info:"确认"};function en(t){Qe.update((e=>[...e,{id:Math.random().toString(32).slice(2),title:tn[t.type],type:t.type,message:t.message,timeout:t.timeout||2e3}]))}function nn(t){const e=t=>{Qe.update((e=>e.filter((e=>e.id!==t))))},n=Math.random().toString(32).slice(2);return new Promise(((o,r)=>{Qe.update((a=>[...a,{id:n,title:tn.info,type:"info",message:t.message,timeout:0,hideClose:!0,actions:[{onclick:()=>{e(n),o(!0)},title:"确定"},{onclick:()=>{e(n),r(!1)},title:"取消"}]}]))}))}function on(t){return()=>{Qe.update((e=>e.filter((e=>e.id!==t.id))))}}function rn(t,e,n){let o;return it(t,Qe,(t=>n(0,o=t))),[o]}class an extends x{constructor(t){super(),k(this,t,rn,Je,E,{})}}function sn(t){let e,n,o;var r=t[0];return r&&(e=new r({})),{c(){e&&P(e.$$.fragment),n=rt()},m(t,r){e&&S(e,t,r),J(t,n,r),o=!0},p(t,o){if(r!==(r=t[0])){if(e){et();const t=e;M(t.$$.fragment,1,0,(()=>{I(t,1)})),nt()}r?(e=new r({}),P(e.$$.fragment),L(e.$$.fragment,1),S(e,n.parentNode,n)):e=null}},i(t){o||(e&&L(e.$$.fragment,t),o=!0)},o(t){e&&M(e.$$.fragment,t),o=!1},d(t){t&&A(n),e&&I(e,t)}}}function cn(t){let e,n;return e=new ht({props:{minWidth:100,$$slots:{default:[sn]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(t,o){S(e,t,o),n=!0},p(t,n){const o={};17&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function ln(t){let e,n,o,r,a,s;return e=new gt({props:{router:Xe,$$slots:{default:[cn]},$$scope:{ctx:t}}}),o=new an({}),a=new pt({props:{theme:"white",tokens:t[1]}}),{c(){P(e.$$.fragment),n=Z(),P(o.$$.fragment),r=Z(),P(a.$$.fragment)},m(t,i){S(e,t,i),J(t,n,i),S(o,t,i),J(t,r,i),S(a,t,i),s=!0},p(t,[n]){const o={};17&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){s||(L(e.$$.fragment,t),L(o.$$.fragment,t),L(a.$$.fragment,t),s=!0)},o(t){M(e.$$.fragment,t),M(o.$$.fragment,t),M(a.$$.fragment,t),s=!1},d(t){I(e,t),t&&A(n),I(o,t),t&&A(r),I(a,t)}}}function dn(t,e,n){let o,r;v(xe);const a=Oe,{layout:s}=ke((t=>t.app));return it(t,s,(t=>n(3,r=t))),t.$$.update=()=>{8&t.$$.dirty&&n(0,o=Ue[r])},[o,a,s,r]}new class extends x{constructor(t){super(),k(this,t,dn,ln,E,{})}}({target:document.getElementById("app")});export{_e as C,Lt as W,nn as a,Wt as b,Ut as c,ae as d,yt as e,Bt as f,Vt as g,Kt as h,Dt as i,re as j,Jt as k,en as o,Nt as r,xe as s,Et as t,ke as u};
