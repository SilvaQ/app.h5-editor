var t=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(e,n,o)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,i=(t,e)=>{for(var n in e||(e={}))r.call(e,n)&&s(t,n,e[n]);if(o)for(var n of o(e))a.call(e,n)&&s(t,n,e[n]);return t},c=(t,o)=>e(t,n(o));import{T as l,c as d,K as u,o as f,a as p,b as g,p as h,s as m,d as w,e as y,f as $,g as b,u as v,h as x,S as k,i as E,j as P,R as O,k as S,m as j,n as M,t as L,l as I,q as T,r as z,v as C,w as _,x as A,y as D,z as X,A as B,B as W,C as Y,D as q,E as R,F as U,G as N,H as V,I as F,J as H,L as K,M as Z,N as G,O as Q,P as J,Q as tt,U as et,V as nt,W as ot,X as rt,Y as at,Z as st,_ as it,$ as ct,a0 as lt,a1 as dt,a2 as ut,a3 as ft,a4 as pt,a5 as gt,a6 as ht}from"./vendor.289f5275.js";const mt={ready:!1,layout:"default"},wt={keys:Object.keys(mt),module:t=>{t.on("@init",(()=>mt)),t.on("ready",(()=>({ready:!0}))),t.on("updateLayout",((t,e)=>c(i({},t),{layout:e})))}};var yt,$t,bt,vt,xt,kt,Et;($t=yt||(yt={})).image="IMAGE",$t.text="TEXT",(vt=bt||(bt={})).username="USERNAME",vt.email="EMAIL",(xt||(xt={})).input="input",(Et=kt||(kt={})).stage="stage",Et.widget="widget";const Pt=[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}],Ot=[{label:"正常",value:"normal"},{label:"粗体",value:"bold"},{label:"斜体",value:"italic"},{label:"斜粗",value:"italic bold"}];class St{}class jt{}class Mt{}var Lt=Object.defineProperty,It=Object.getOwnPropertyDescriptor,Tt=(t,e,n,o)=>{for(var r,a=o>1?void 0:o?It(e,n):e,s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o?r(e,n,a):r(a))||a);return o&&a&&Lt(e,n,a),a};class zt{get id(){return this.property.id}}Tt([l((()=>jt))],zt.prototype,"quoteData",2),Tt([l((()=>Mt))],zt.prototype,"property",2);var Ct=Object.defineProperty,_t=Object.getOwnPropertyDescriptor;class At extends zt{constructor(){super(...arguments),this.widgetType=yt.image}}((t,e,n,o)=>{for(var r,a=o>1?void 0:o?_t(e,n):e,s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o?r(e,n,a):r(a))||a);o&&a&&Ct(e,n,a)})([l((()=>St))],At.prototype,"imageProperty",2);class Dt{}var Xt=Object.defineProperty,Bt=Object.getOwnPropertyDescriptor;class Wt extends zt{constructor(){super(...arguments),this.widgetType=yt.text}}((t,e,n,o)=>{for(var r,a=o>1?void 0:o?Bt(e,n):e,s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o?r(e,n,a):r(a))||a);o&&a&&Xt(e,n,a)})([l((()=>Dt))],Wt.prototype,"textProperty",2);const Yt={[yt.text]:function({text:t}={text:"请输入文本"}){const e=new Wt;return e.property=function(){const t=new Mt;return t.id=Math.random().toString(32).slice(2),t.height=60,t.width=200,t.opacity=1,t.rotation=0,t.scaleX=1,t.scaleY=1,t.x=0,t.y=0,t}(),e.textProperty=function(t){const e=new Dt;return e.fill="#000",e.fontFamily="Arial",e.align="left",e.fontSize=32,e.fontStyle="normal",e.text=t,e}(t),e},[yt.image]:function({url:t}){const e=new At;return e.property=function(){const t=new Mt;return t.id=Math.random().toString(32).slice(2),t.height=100,t.width=100,t.opacity=1,t.rotation=0,t.scaleX=1,t.scaleY=1,t.x=0,t.y=0,t}(),e.imageProperty=function(t){const e=new St;return e.url=t,e}(t),e}};function qt({widgetType:t,quoteType:e,widgetData:n,quoteData:o}){const r=Yt[t];if(!r)throw Error("不存在该组件类型");const a=r(n);return e&&(a.quoteType=e,a.quoteData=o),a}function Rt(t){const e=d(t);return e.property.id=Math.random().toString(32).slice(2),e}const Ut={cloudbase:{env:"test-4glnlr77348551c8",region:"ap-shanghai"},editor:{content:{scale:3,width:1080,height:1920}}},Nt={Text:function(t){t.on(xt.input,(()=>{!function(t,e){const{widgets:n}=je.get(),o=n.find((e=>e.id===t.id()));if(!o)return;je.dispatch("updateWidget",{id:o.id,textProperty:i(i({},o.textProperty),e)})}(t,{text:t.text()})}))},Image:function(){}};function Vt(t,e){const{widgets:n}=je.get(),o=n.find((e=>e.id===t.id()));o&&je.dispatch("updateWidget",{id:o.id,property:i(i({},o.property),e)})}function Ft(t){const e=t.container(),{content:n}=Kt(),{width:o,height:r}=Ut.editor.content;t.width(e.offsetWidth),t.height(e.offsetHeight),n.x(e.offsetWidth/2-o*n.scaleX()/2),n.y(e.offsetHeight/2-r*n.scaleY()/2),n.draw()}function Ht(t){const e=t.clientWidth,n=t.clientHeight,o=new u.Stage({container:t,width:e,height:n}),{content:r,background:a}=function(t){const{width:e,height:n,scale:o}=Ut.editor.content,r=new u.Layer({name:"content",x:t.width()/2-e/2,y:t.height()/2-n/2,scaleX:1/o,scaleY:1/o,clip:{x:0,y:0,width:e,height:n}});je.dispatch("updateSize",{width:e,height:n});const a=new u.Layer({name:"background"});return{content:r,background:a}}(o);return o.add(r),o.add(a),r.draw(),a.draw(),je.dispatch("updateStage",o),o}function Kt(){const{stage:t}=je.get();if(!t)throw"请初始化Stage";const e=t.getLayers();return{content:e.find((t=>"content"===t.name())),background:e.find((t=>"background"===t.name()))}}const Zt=["background"],Gt={Text:["top-center","bottom-center","middle-right","middle-left"],Image:["top-left","top-right","bottom-left","bottom-right"],default:["top-left","top-right","bottom-left","bottom-right"]};function Qt(t){return t.find("Transformer").find((t=>"selected"===t.name()))}function Jt(t,e){return t.find("Transformer").find((t=>t.nodes().includes(e)))}function te(t,e,n=!1){const o=new u.Transformer({keepRatio:!0,resizeEnabled:n,rotateEnabled:n});if(1===e.length){const[t]=e;o.enabledAnchors((r=t.getClassName(),Gt[r]||Gt.default))}var r;return o.nodes(e),t.add(o),t.draw(),(n||e.length>1)&&o.name("selected"),o}function ee(t){t.find("Transformer").forEach((t=>t.destroy())),t.draw()}function ne(t){const{content:e}=Kt();t.on("mousedown",(n=>{if(n.target===t)return ee(t),void je.dispatch("updateSelected",[]);return e.findOne((t=>Zt.includes(n.target.name())))?(ee(t),void je.dispatch("updateSelected",[])):void 0}))}async function oe(t){const e=Math.random().toString(32).slice(2),n=await fetch(t+`?v=${e}`),o=await n.blob();return new Promise((t=>{const e=new FileReader;e.readAsDataURL(o),e.onloadend=()=>{const n=e.result;t(n)}}))}function re(t){const e=t.getLayer(),n=e.getLayer(),o=n.offsetX()+t.absolutePosition().x,r=n.offsetY()+t.absolutePosition().y,a=document.createElement("textarea");document.getElementById("canvas-container").appendChild(a),a.value=t.text(),a.style.position="absolute",a.style.top=r+"px",a.style.left=o+"px",a.style.width=t.width()-2*t.padding()+"px",a.style.height=t.height()-2*t.padding()+5+"px",a.style.fontSize=`${t.fontSize()}px`,a.style.border="none",a.style.padding="0px",a.style.margin="0px",a.style.overflow="hidden",a.style.background="none",a.style.outline="none",a.style.resize="none",a.style.wordBreak="break-all",a.style.fontFamily=t.fontFamily(),a.style.transformOrigin="left top",a.style.textAlign=t.align(),a.style.color=t.fill(),a.style.transform=`rotateZ(${t.rotation()}deg) scale(${e.scaleX()})`,a.focus(),a.addEventListener("keydown",(function(t){"Enter"!==t.key||t.shiftKey||a.blur()})),a.addEventListener("blur",(function(e){t.text(a.value),t.fire(xt.input),a.parentNode.removeChild(a),t.show()}))}class ae{static init(){ae.app||(ae.app=p.init({env:Ut.cloudbase.env,region:Ut.cloudbase.region}),console.log("CLOUDBASE SDK 初始化成功"))}static get(){return ae.app||ae.init(),ae.app}static getUser(){return ae.get().auth({persistence:"local"}).currentUser}}const se={[bt.username]:function(t){t.textProperty.text="紫菜苔"},[bt.email]:function(t){const e=ae.getUser();t.textProperty.text=e.email}};const ie={[yt.text]:function(t){const{preview:e}=je.get(),n=new u.Text(i(i({},f(["zIndex"],t.property)),t.textProperty));return e||t.quoteType||function(t){t.on("dblclick dbltap",(()=>{t.hide(),re(t)}))}(n),function(t){t.on("transform",(e=>{t.setAttrs({width:Math.max(t.width()*t.scaleX(),100),height:Math.max(t.height()*t.scaleY(),50),scaleX:1,scaleY:1})}))}(n),n},[yt.image]:function(t){const e=new Image,n=new u.Image(c(i({},f(["zIndex"],t.property)),{image:e}));return oe(t.imageProperty.url).then((t=>{e.src=t})),function(t){t.on("transform",(e=>{t.setAttrs({width:Math.max(t.width()*t.scaleX()),height:Math.max(t.height()*t.scaleY()),scaleX:1,scaleY:1})}))}(n),n}};function ce(t){const e=ie[t.widgetType],{preview:n}=je.get();if(!e)throw Error("组件类型不存在");n&&t.quoteType&&function(t){const e=se[t.quoteType];if(!e)throw Error("引用类型不存在");e&&e(t)}(t);const o=e(t);return o.draggable(!n),o}function le(t,e,n=!0){const{content:o,background:r}=Kt(),{preview:a}=je.get();a||function(t,e){const{background:n}=Kt();e.on("mouseenter",(o=>{Jt(t,e)||te(n,[e],!1)})),e.on("mouseout",(n=>{const o=Jt(t,e);o&&"selected"!==o.name()&&o.destroy()})),e.on("mousedown",(o=>{const r=Qt(t),a=Jt(t,e);if(a&&a===r)return;const s=o.evt.ctrlKey&&r?[...r.nodes(),e]:[e];ee(t),te(n,s,1===s.length),je.dispatch("updateSelected",s.map((t=>t.id())))}))}(t,e),ee(t),n&&!a&&te(r,[e],!0),function(t){t.on("transformend",(()=>{Vt(t,{x:Math.round(t.x()),y:Math.round(t.y()),width:Math.round(t.width()),height:Math.round(t.height()),scaleX:Math.round(t.scaleX()),scaleY:Math.round(t.scaleY()),rotation:Math.round(t.rotation())})})),t.on("dragend",(()=>{Vt(t,{x:Math.round(t.x()),y:Math.round(t.y())})}));const e=Nt[t.getClassName()];e&&e(t)}(e),o.add(e)}function de(t){const e=Qt(t);if(!e)return;return e.getNodes().filter((t=>t.visible()))}function ue(){const{content:t}=Kt(),{width:e,height:n}=Ut.editor.content,o=new u.Rect({width:e,height:n,fill:"#fff",name:"background"});t.add(o)}function fe(t){const e=g(t.widgets);t.stage.width(),t.stage.height();return{widgets:e,selected:[...t.selected],page:{size:{width:t.stage.width(),height:t.stage.height()},background:t.page.background,title:t.page.title}}}function pe(t){return{widgets:h(zt,t.widgets),page:i({},t.page),selected:t.selected}}function ge(t){return t.history.forward=[],t.history.backward.push(fe(t)),{history:{forward:t.history.forward,backward:t.history.backward}}}function he(t){const e=t.history.backward.pop();if(e)return c(i({},pe(e)),{history:{backward:[...t.history.backward],forward:[...t.history.forward,fe(t)]}})}function me(t){const e=t.history.forward.pop();if(e)return c(i({},pe(e)),{history:{backward:[...t.history.backward,fe(t)],forward:[...t.history.forward]}})}const we={stage:void 0,page:{size:{width:Ut.editor.content.width,height:Ut.editor.content.height},title:"未命名",background:""},selected:[],copied:[],zoom:1,widgets:[],history:{backward:[],forward:[]},preview:!1},ye={keys:Object.keys(we),module:t=>{t.on("@init",(()=>we)),t.on("updateStage",((t,e)=>c(i({},t),{stage:e}))),t.on("updateSize",((t,e)=>c(i({},t),{size:e}))),t.on("updatePreview",((t,e)=>c(i({},t),{preview:e}))),t.on("updatePage",((t,e)=>c(i({},t),{page:e}))),t.on("updateWidgets",((t,e)=>c(i({},t),{widgets:e}))),t.on("updateSelected",((t,e)=>c(i({},t),{selected:e}))),t.on("updateCopied",((t,e)=>c(i({},t),{copied:e}))),t.on("updateWidget",Le(be,{before:[ge]})),t.on("updateZoom",Le($e)),t.on("backward",Le(he,{after:[Pe]})),t.on("forward",Le(me,{after:[Pe]})),t.on("createWidget",Le(ve,{before:[ge]})),t.on("deleteWidget",Le(xe,{before:[ge]})),t.on("updateBackground",Le(ke,{before:[ge]})),t.on("updateZindex",Le(Ee,{before:[ge]})),t.on("renderStage",(t=>(Pe(t),t)))}};function $e(t,e){const{scale:n}=Ut.editor.content,{content:o}=Kt();return o.scaleX(1/n*e),o.scaleY(1/n*e),Ft(t.stage),{zoom:e}}function be(t,e){const n=t.widgets.find((t=>t.id===e.id));return n&&Object.entries(e).forEach((([t,o])=>{"id"!==t&&(n[t]=i(i({},n[t]),e[t]))})),{widgets:t.widgets}}function ve(t,e){const{stage:n,widgets:o}=t,r=e instanceof zt?e:qt(e),a=ce(r);return le(n,a),{widgets:[...o,r],selected:[a.id()]}}function xe(t,e){const{stage:n}=t,o=e instanceof Array?e:[e];return o.forEach((t=>{!function(t,e){const{content:n}=Kt(),[o]=n.getChildren((t=>t.id()===e));o&&(o.destroy(),ee(t))}(n,t)})),{selected:[],widgets:t.widgets.filter((t=>!o.includes[t.id]))}}function ke(t,e){const{stage:n,page:o}=t,r=n.findOne(".background"),a=new Image;return a.onload=()=>{r.fill(""),r.fillPatternImage(a)},a.src=e,{page:{size:t.page.size,title:t.page.title,background:e}}}function Ee(t){const{widgets:e,stage:n}=t;return{widgets:e.map((t=>{const e=n.findOne(`#${t.id}`);return t.property.zIndex=e.zIndex(),t}))}}function Pe(t){const{stage:e,widgets:n,selected:o,page:r,preview:a}=t,{content:s,background:i}=Kt();var c;if(s.destroyChildren(),ee(e),ue(),(c=m([w(y(["property","zIndex"]))])(n),c.map((t=>ce(t)))).forEach((t=>le(e,t,!1))),!a&&o.length&&te(i,o.map((t=>e.findOne(`#${t}`))),1===o.length),r&&r.background){const t=e.findOne(".background"),n=new Image;n.onload=()=>{t.fill(""),t.fillPatternImage(n)},oe(r.background).then((t=>{n.src=t}))}}const Oe={userid:"",username:""},Se={user:{keys:Object.keys(Oe),module:t=>{t.on("@init",(()=>Oe)),t.on("login",((t,e)=>c(i({},t),{userid:e,username:e+":name"})))},persist:["userid"]},app:wt,editor:ye},je=$([...Object.values(Se).map((t=>t.module)),b(Object.values(Se).filter((t=>t.persist)).map((t=>t.persist)).flat())]);function Me(t){return v(...t(Se).keys)}function Le(t,e={after:[],before:[]}){return(n,o)=>{const{before:r=[],after:a=[]}=e,s=r.reduce(((t,e)=>i(i({},t),e(t)||{})),n),c=i(i({},n),t(n,o)),l=a.reduce(((t,e)=>i(i({},t),e(t)||{})),c);return i(i(i({},s),c),l)}}const Ie={"interactive-01":"#1890ff","interactive-04":"#1890ff","layer-selected-inverse":"#1890ff"};function Te(t){let e,n;return e=new O({}),{c(){S(e.$$.fragment)},m(t,o){j(e,t,o),n=!0},p:M,i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}let ze;const Ce={},_e=function(t,e){if(!e||0===e.length)return t();if(void 0===ze){const t=document.createElement("link").relList;ze=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if((t=`/app.h5-editor/${t}`)in Ce)return;Ce[t]=!0;const e=t.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const o=document.createElement("link");return o.rel=e?"stylesheet":ze,e||(o.as="script",o.crossOrigin=""),o.href=t,document.head.appendChild(o),e?new Promise(((t,e)=>{o.addEventListener("load",t),o.addEventListener("error",e)})):void 0}))).then((()=>t()))};function Ae(t){let e,n,o=[{class:"icon"},{viewBox:"0 0 1024 1024"},{xmlns:"http://www.w3.org/2000/svg"},{width:"200"},{height:"200"},t[0]],r={};for(let a=0;a<o.length;a+=1)r=z(r,o[a]);return{c(){e=C("svg"),n=C("path"),this.h()},l(t){e=_(t,"svg",{class:!0,viewBox:!0,xmlns:!0,width:!0,height:!0},1);var o=A(e);n=_(o,"path",{d:!0,fill:!0},1),A(n).forEach(D),o.forEach(D),this.h()},h(){X(n,"d","m544 82.464 323.968 187.072a64 64 0 0 1 32 55.424v374.08a64 64 0 0 1-32 55.424L544 941.536a64 64 0 0 1-64 0L156.032 754.464a64 64 0 0 1-32-55.424V324.96a64 64 0 0 1 32-55.424L480 82.464a64 64 0 0 1 64 0zM810.56 336a32 32 0 0 0-40.384-13.408l-3.328 1.696L512 471.392 257.184 324.288a32 32 0 0 0-35.136 53.376l3.136 2.048L480 526.848V816a32 32 0 0 0 63.776 3.744L544 816V526.848l254.848-147.136A32 32 0 0 0 810.56 336z"),X(n,"fill","#B19C4A"),B(e,r)},m(t,o){W(t,e,o),Y(e,n)},p(t,[n]){B(e,r=q(o,[{class:"icon"},{viewBox:"0 0 1024 1024"},{xmlns:"http://www.w3.org/2000/svg"},{width:"200"},{height:"200"},1&n&&t[0]]))},i:M,o:M,d(t){t&&D(e)}}}function De(t,e,n){return t.$$set=t=>{n(0,e=z(z({},e),R(t)))},[e=R(e)]}const Xe=[{path:"/",component:()=>_e((()=>import("./login.ca62c206.js")),["assets/login.ca62c206.js","assets/login.0a1b7451.css","assets/vendor.289f5275.js","assets/vendor.11618b7d.css","assets/page-container.9e7ce3bc.js","assets/page-container.3a1c8316.css","assets/form-item.ea224da0.js","assets/form-item.a0cf0e49.css"]),name:"login",auth:!1},{path:"/page-center",component:()=>_e((()=>import("./page-center.01f27ead.js")),["assets/page-center.01f27ead.js","assets/page-center.cd746336.css","assets/vendor.289f5275.js","assets/vendor.11618b7d.css","assets/page-container.9e7ce3bc.js","assets/page-container.3a1c8316.css"]),name:"page-center",meta:{menu:{title:"页面中心",icon:class extends k{constructor(t){super(),E(this,t,De,Ae,P,{})}}}}},{path:"/page-preview",component:()=>_e((()=>import("./page-preview.e884da3f.js")),["assets/page-preview.e884da3f.js","assets/page-preview.69452742.css","assets/vendor.289f5275.js","assets/vendor.11618b7d.css","assets/page-container.9e7ce3bc.js","assets/page-container.3a1c8316.css"]),name:"page-preview"},{path:"/editor",component:()=>_e((()=>import("./editor.835d1777.js")),["assets/editor.835d1777.js","assets/editor.f78378ac.css","assets/vendor.289f5275.js","assets/vendor.11618b7d.css","assets/page-container.9e7ce3bc.js","assets/page-container.3a1c8316.css","assets/form-item.ea224da0.js","assets/form-item.a0cf0e49.css"]),name:"editor"}];class Be extends U{constructor(){super(...arguments),this.before=t=>{t.options.header=t.options.header||{},t.options.header["X-UserID"]="001"},this.after=(t,e)=>{}}}async function We(){ae.init()}async function Ye(){N.setConfig({server:"http://api.test.com/",timeout:3e3}),N.interceptors.status.use((t=>!0)),N.interceptors.success.use((t=>t.data)),N.interceptors.error.use((t=>t)),N.requestCatchHandle=t=>{t&&((t.data||{}).message||t.status,403===t.status&&console.error(t.data))},N.installExtendService(new Be),await Promise.all([Promise.resolve(),We()])}const qe=new V({mode:F,omitTrailingSlash:!0,base:"/app.h5-editor/",routes:Xe});qe.beforeEach((async(t,e,n)=>{const{ready:o}=je.get();o||(await Ye(),je.dispatch("ready")),!t.meta.auth||ae.getUser()?n():n("/login")}));function Re(t,e,n){const o=t.slice();return o[4]=e[n],o}function Ue(t){let e,n,o,r,a,s,i,c,l,d=t[4].title+"";var u=t[4].icon;function f(){return t[3](t[4])}return u&&(n=new u({props:{width:28,height:28}})),{c(){e=H("div"),n&&S(n.$$.fragment),o=K(),r=H("div"),a=Z(d),s=K(),X(r,"class","title text-xs pt-1"),X(e,"class","menu-item m-3 py-2 cursor-pointer active:bg-gray-100 hover:bg-gray-200 flex flex-col justify-center items-center rounded svelte-6ff0y4"),G(e,"active",t[4].name===t[0])},m(t,d){Q(t,e,d),n&&j(n,e,null),J(e,o),J(e,r),J(r,a),J(e,s),i=!0,c||(l=tt(e,"click",f),c=!0)},p(r,a){if(u!==(u=(t=r)[4].icon)){if(n){et();const t=n;I(t.$$.fragment,1,0,(()=>{T(t,1)})),nt()}u?(n=new u({props:{width:28,height:28}}),S(n.$$.fragment),L(n.$$.fragment,1),j(n,e,o)):n=null}3&a&&G(e,"active",t[4].name===t[0])},i(t){i||(n&&L(n.$$.fragment,t),i=!0)},o(t){n&&I(n.$$.fragment,t),i=!1},d(t){t&&D(e),n&&T(n),c=!1,l()}}}function Ne(t){let e,n,o,r,a,s,i,c=t[1],l=[];for(let u=0;u<c.length;u+=1)l[u]=Ue(Re(t,c,u));const d=t=>I(l[t],1,1,(()=>{l[t]=null}));return{c(){e=H("section"),n=H("div");for(let t=0;t<l.length;t+=1)l[t].c();o=K(),r=H("div"),r.textContent="2",a=K(),s=H("div"),s.textContent="3",X(n,"class","menu flex-auto svelte-6ff0y4"),X(r,"class","toolbar svelte-6ff0y4"),X(s,"class","user"),X(e,"class","shadow-lg absolute inset-0 flex flex-col")},m(t,c){Q(t,e,c),J(e,n);for(let e=0;e<l.length;e+=1)l[e].m(n,null);J(e,o),J(e,r),J(e,a),J(e,s),i=!0},p(t,[e]){if(7&e){let o;for(c=t[1],o=0;o<c.length;o+=1){const r=Re(t,c,o);l[o]?(l[o].p(r,e),L(l[o],1)):(l[o]=Ue(r),l[o].c(),L(l[o],1),l[o].m(n,null))}for(et(),o=c.length;o<l.length;o+=1)d(o);nt()}},i(t){if(!i){for(let t=0;t<c.length;t+=1)L(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)I(l[e]);i=!1},d(t){t&&D(e),ot(l,t)}}}function Ve(t,e,n){let o;const r=Xe.filter((t=>{var e;return null===(e=null==t?void 0:t.meta)||void 0===e?void 0:e.menu})).map((t=>({name:t.name,path:t.path,title:t.meta.menu.title,icon:t.meta.menu.icon})));function a(t){qe.push(t)}qe.currentMatched.subscribe((t=>{if(t&&t.length){const[e]=t;n(0,o=e.name)}}));return[o,r,a,t=>a(t.path)]}class Fe extends k{constructor(t){super(),E(this,t,Ve,Ne,P,{})}}function He(t){let e,n,o,r,a,s,i;return o=new Fe({}),s=new O({}),{c(){e=H("main"),n=H("div"),S(o.$$.fragment),r=K(),a=H("div"),S(s.$$.fragment),X(n,"class","sidebar relative"),X(a,"class","content relative"),X(e,"class","absolute inset-0 grid grid-cols-2 svelte-15go9i5")},m(t,c){Q(t,e,c),J(e,n),j(o,n,null),J(e,r),J(e,a),j(s,a,null),i=!0},p:M,i(t){i||(L(o.$$.fragment,t),L(s.$$.fragment,t),i=!0)},o(t){I(o.$$.fragment,t),I(s.$$.fragment,t),i=!1},d(t){t&&D(e),T(o),T(s)}}}const Ke={default:class extends k{constructor(t){super(),E(this,t,null,Te,P,{})}},workspace:class extends k{constructor(t){super(),E(this,t,null,He,P,{})}}};function Ze(t,e,n){const o=t.slice();return o[1]=e[n],o}function Ge(t,e,n){const o=t.slice();return o[4]=e[n],o}function Qe(t){let e,n,o=t[1].actions,r=[];for(let s=0;s<o.length;s+=1)r[s]=tn(Ge(t,o,s));const a=t=>I(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=rt()},m(t,o){for(let e=0;e<r.length;e+=1)r[e].m(t,o);Q(t,e,o),n=!0},p(t,n){if(1&n){let s;for(o=t[1].actions,s=0;s<o.length;s+=1){const a=Ge(t,o,s);r[s]?(r[s].p(a,n),L(r[s],1)):(r[s]=tn(a),r[s].c(),L(r[s],1),r[s].m(e.parentNode,e))}for(et(),s=o.length;s<r.length;s+=1)a(s);nt()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)L(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)I(r[e]);n=!1},d(t){ot(r,t),t&&D(e)}}}function Je(t){let e,n=t[4].title+"";return{c(){e=Z(n)},m(t,n){Q(t,e,n)},p(t,o){1&o&&n!==(n=t[4].title+"")&&ft(e,n)},d(t){t&&D(e)}}}function tn(t){let e,n;return e=new ut({props:{$$slots:{default:[Je]},$$scope:{ctx:t}}}),e.$on("click",(function(){lt(t[4].onclick)&&t[4].onclick.apply(this,arguments)})),{c(){S(e.$$.fragment)},m(t,o){j(e,t,o),n=!0},p(n,o){t=n;const r={};129&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function en(t){let e,n,o,r=t[1].actions&&Qe(t);return{c(){e=H("div"),r&&r.c(),n=K(),X(e,"slot","actions")},m(t,a){Q(t,e,a),r&&r.m(e,null),J(e,n),o=!0},p(t,o){t[1].actions?r?(r.p(t,o),1&o&&L(r,1)):(r=Qe(t),r.c(),L(r,1),r.m(e,n)):r&&(et(),I(r,1,1,(()=>{r=null})),nt())},i(t){o||(L(r),o=!0)},o(t){I(r),o=!1},d(t){t&&D(e),r&&r.d()}}}function nn(t,e){let n,o,r;return o=new ct({props:{kind:e[1].type,title:e[1].title+":",subtitle:e[1].message,timeout:e[1].timeout,hideCloseButton:e[1].hideClose,$$slots:{actions:[en]},$$scope:{ctx:e}}}),o.$on("close",(function(){lt(ln(e[1]))&&ln(e[1]).apply(this,arguments)})),{key:t,first:null,c(){n=rt(),S(o.$$.fragment),this.first=n},m(t,e){Q(t,n,e),j(o,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.kind=e[1].type),1&n&&(r.title=e[1].title+":"),1&n&&(r.subtitle=e[1].message),1&n&&(r.timeout=e[1].timeout),1&n&&(r.hideCloseButton=e[1].hideClose),129&n&&(r.$$scope={dirty:n,ctx:e}),o.$set(r)},i(t){r||(L(o.$$.fragment,t),r=!0)},o(t){I(o.$$.fragment,t),r=!1},d(t){t&&D(n),T(o,t)}}}function on(t){let e,n,o=[],r=new Map,a=t[0];const s=t=>t[1].id;for(let i=0;i<a.length;i+=1){let e=Ze(t,a,i),n=s(e);r.set(n,o[i]=nn(n,e))}return{c(){e=H("div");for(let t=0;t<o.length;t+=1)o[t].c();X(e,"class","toast-container flex flex-col items-center")},m(t,r){Q(t,e,r);for(let n=0;n<o.length;n+=1)o[n].m(e,null);n=!0},p(t,[n]){1&n&&(a=t[0],et(),o=at(o,n,s,1,t,a,r,e,dt,nn,null,Ze),nt())},i(t){if(!n){for(let t=0;t<a.length;t+=1)L(o[t]);n=!0}},o(t){for(let e=0;e<o.length;e+=1)I(o[e]);n=!1},d(t){t&&D(e);for(let e=0;e<o.length;e+=1)o[e].d()}}}const rn=st([]),an={success:"成功",warning:"警告",error:"错误",info:"确认"};function sn(t){rn.update((e=>[...e,{id:Math.random().toString(32).slice(2),title:an[t.type],type:t.type,message:t.message,timeout:t.timeout||2e3}]))}function cn(t){const e=t=>{rn.update((e=>e.filter((e=>e.id!==t))))},n=Math.random().toString(32).slice(2);return new Promise(((o,r)=>{rn.update((a=>[...a,{id:n,title:an.info,type:"info",message:t.message,timeout:0,hideClose:!0,actions:[{onclick:()=>{e(n),o(!0)},title:"确定"},{onclick:()=>{e(n),r(!1)},title:"取消"}]}]))}))}function ln(t){return()=>{rn.update((e=>e.filter((e=>e.id!==t.id))))}}function dn(t,e,n){let o;return it(t,rn,(t=>n(0,o=t))),[o]}class un extends k{constructor(t){super(),E(this,t,dn,on,P,{})}}function fn(t){let e,n,o;var r=t[0];return r&&(e=new r({})),{c(){e&&S(e.$$.fragment),n=rt()},m(t,r){e&&j(e,t,r),Q(t,n,r),o=!0},p(t,o){if(r!==(r=t[0])){if(e){et();const t=e;I(t.$$.fragment,1,0,(()=>{T(t,1)})),nt()}r?(e=new r({}),S(e.$$.fragment),L(e.$$.fragment,1),j(e,n.parentNode,n)):e=null}},i(t){o||(e&&L(e.$$.fragment,t),o=!0)},o(t){e&&I(e.$$.fragment,t),o=!1},d(t){t&&D(n),e&&T(e,t)}}}function pn(t){let e,n;return e=new ht({props:{minWidth:100,$$slots:{default:[fn]},$$scope:{ctx:t}}}),{c(){S(e.$$.fragment)},m(t,o){j(e,t,o),n=!0},p(t,n){const o={};17&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function gn(t){let e,n,o,r,a,s;return e=new pt({props:{router:qe,$$slots:{default:[pn]},$$scope:{ctx:t}}}),o=new un({}),a=new gt({props:{theme:"white",tokens:t[1]}}),{c(){S(e.$$.fragment),n=K(),S(o.$$.fragment),r=K(),S(a.$$.fragment)},m(t,i){j(e,t,i),Q(t,n,i),j(o,t,i),Q(t,r,i),j(a,t,i),s=!0},p(t,[n]){const o={};17&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){s||(L(e.$$.fragment,t),L(o.$$.fragment,t),L(a.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),I(o.$$.fragment,t),I(a.$$.fragment,t),s=!1},d(t){T(e,t),t&&D(n),T(o,t),t&&D(r),T(a,t)}}}function hn(t,e,n){let o,r;x(je);const a=Ie,{layout:s}=Me((t=>t.app));return it(t,s,(t=>n(3,r=t))),t.$$.update=()=>{8&t.$$.dirty&&n(0,o=Ke[r])},[o,a,s,r]}new class extends k{constructor(t){super(),E(this,t,hn,gn,P,{})}}({target:document.getElementById("app")});export{ae as C,bt as Q,zt as W,cn as a,Ut as b,Ht as c,ue as d,yt as e,qt as f,Kt as g,Qt as h,Rt as i,de as j,ne as k,Ot as l,sn as o,Ft as r,je as s,Pt as t,Me as u};
