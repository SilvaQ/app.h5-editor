import{S as t,i as e,h as s,j as n,m as a,t as o,k as r,l as c,aa as l,J as i,L as $,M as f,y as u,an as g,O as m,P as d,a3 as p,x as h,U as x,V as k,W as v,ac as b}from"./vendor.53d97470.js";import{P as y}from"./page-container.a4022ba9.js";import{a as w,C as j}from"./index.f85a3014.js";function z(t,e,s){const n=t.slice();return n[8]=e[s],n}function P(t){let e;return{c(){e=f("编辑")},m(t,s){m(t,e,s)},d(t){t&&h(e)}}}function _(t){let e;return{c(){e=f("删除")},m(t,s){m(t,e,s)},d(t){t&&h(e)}}}function B(t){let e,s,l,x,k,v,y,w,j,z,B,C,J=t[8].title+"";return w=new b({props:{size:"small",kind:"ghost",class:"flex-1",$$slots:{default:[P]},$$scope:{ctx:t}}}),w.$on("click",(function(){return t[5](t[8])})),z=new b({props:{size:"small",kind:"ghost",class:"flex-1",$$slots:{default:[_]},$$scope:{ctx:t}}}),z.$on("click",(function(){return t[6](t[8])})),{c(){e=i("div"),s=i("div"),l=$(),x=i("div"),k=f(J),v=$(),y=i("div"),n(w.$$.fragment),j=$(),n(z.$$.fragment),B=$(),u(s,"class","image svelte-18afg2m"),g(s,"background-image","url("+t[8].page.background+")"),u(x,"class","title svelte-18afg2m"),u(y,"class","action flex svelte-18afg2m"),u(e,"class","page-item svelte-18afg2m")},m(t,n){m(t,e,n),d(e,s),d(e,l),d(e,x),d(x,k),d(e,v),d(e,y),a(w,y,null),d(y,j),a(z,y,null),d(e,B),C=!0},p(e,n){t=e,(!C||2&n)&&g(s,"background-image","url("+t[8].page.background+")"),(!C||2&n)&&J!==(J=t[8].title+"")&&p(k,J);const a={};2048&n&&(a.$$scope={dirty:n,ctx:t}),w.$set(a);const o={};2048&n&&(o.$$scope={dirty:n,ctx:t}),z.$set(o)},i(t){C||(o(w.$$.fragment,t),o(z.$$.fragment,t),C=!0)},o(t){r(w.$$.fragment,t),r(z.$$.fragment,t),C=!1},d(t){t&&h(e),c(w),c(z)}}}function C(t){let e,s,n=t[1],a=[];for(let o=0;o<n.length;o+=1)a[o]=B(z(t,n,o));const c=t=>r(a[t],1,1,(()=>{a[t]=null}));return{c(){e=i("div");for(let t=0;t<a.length;t+=1)a[t].c();u(e,"class","container")},m(t,n){m(t,e,n);for(let s=0;s<a.length;s+=1)a[s].m(e,null);s=!0},p(t,s){if(14&s){let r;for(n=t[1],r=0;r<n.length;r+=1){const c=z(t,n,r);a[r]?(a[r].p(c,s),o(a[r],1)):(a[r]=B(c),a[r].c(),o(a[r],1),a[r].m(e,null))}for(x(),r=n.length;r<a.length;r+=1)c(r);k()}},i(t){if(!s){for(let t=0;t<n.length;t+=1)o(a[t]);s=!0}},o(t){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)r(a[e]);s=!1},d(t){t&&h(e),v(a,t)}}}function J(t){let e;return{c(){e=f("新建")},m(t,s){m(t,e,s)},d(t){t&&h(e)}}}function L(t){let e,s;return e=new b({props:{size:"small",$$slots:{default:[J]},$$scope:{ctx:t}}}),e.$on("click",t[4]),{c(){n(e.$$.fragment)},m(t,n){a(e,t,n),s=!0},p(t,s){const n={};2048&s&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){s||(o(e.$$.fragment,t),s=!0)},o(t){r(e.$$.fragment,t),s=!1},d(t){c(e,t)}}}function M(t){let e,s;return e=new y({props:{title:"页面中心",layout:"workspace",$$slots:{action:[L],default:[C]},$$scope:{ctx:t}}}),{c(){n(e.$$.fragment)},m(t,n){a(e,t,n),s=!0},p(t,[s]){const n={};2051&s&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){s||(o(e.$$.fragment,t),s=!0)},o(t){r(e.$$.fragment,t),s=!1},d(t){c(e,t)}}}function O(t,e,s){let{router:n}=e,a=[];function o(){j.get().database().collection("pages").get().then((({data:t})=>{s(1,a=t)}))}function r(t){n.push(`/editor?id=${t}`)}function c(t){w({type:"success",message:"是否确定删除该项目"}).then((e=>{j.get().database().collection("pages").doc(t).remove().then((()=>{o()}))}))}l((()=>{o()}));return t.$$set=t=>{"router"in t&&s(0,n=t.router)},[n,a,r,c,()=>n.push("/editor"),t=>r(t._id),t=>c(t._id)]}class S extends t{constructor(t){super(),e(this,t,O,M,s,{router:0})}}export{S as default};
